(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const h of f.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function i(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function l(c){if(c.ep)return;c.ep=!0;const f=i(c);fetch(c.href,f)}})();function $m(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Ku={exports:{}},as={};var lm;function cp(){if(lm)return as;lm=1;var s=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function i(l,c,f){var h=null;if(f!==void 0&&(h=""+f),c.key!==void 0&&(h=""+c.key),"key"in c){f={};for(var p in c)p!=="key"&&(f[p]=c[p])}else f=c;return c=f.ref,{$$typeof:s,type:l,key:h,ref:c!==void 0?c:null,props:f}}return as.Fragment=a,as.jsx=i,as.jsxs=i,as}var om;function fp(){return om||(om=1,Ku.exports=cp()),Ku.exports}var m=fp(),Iu={exports:{}},Ne={};var um;function dp(){if(um)return Ne;um=1;var s=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),D=Symbol.iterator;function k(_){return _===null||typeof _!="object"?null:(_=D&&_[D]||_["@@iterator"],typeof _=="function"?_:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,F={};function Z(_,H,ee){this.props=_,this.context=H,this.refs=F,this.updater=ee||M}Z.prototype.isReactComponent={},Z.prototype.setState=function(_,H){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,H,"setState")},Z.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function te(){}te.prototype=Z.prototype;function X(_,H,ee){this.props=_,this.context=H,this.refs=F,this.updater=ee||M}var le=X.prototype=new te;le.constructor=X,I(le,Z.prototype),le.isPureReactComponent=!0;var ke=Array.isArray;function ye(){}var ce={H:null,A:null,T:null,S:null},Le=Object.prototype.hasOwnProperty;function Ge(_,H,ee){var W=ee.ref;return{$$typeof:s,type:_,key:H,ref:W!==void 0?W:null,props:ee}}function rt(_,H){return Ge(_.type,H,_.props)}function J(_){return typeof _=="object"&&_!==null&&_.$$typeof===s}function re(_){var H={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(ee){return H[ee]})}var fe=/\/+/g;function Ee(_,H){return typeof _=="object"&&_!==null&&_.key!=null?re(""+_.key):H.toString(36)}function De(_){switch(_.status){case"fulfilled":return _.value;case"rejected":throw _.reason;default:switch(typeof _.status=="string"?_.then(ye,ye):(_.status="pending",_.then(function(H){_.status==="pending"&&(_.status="fulfilled",_.value=H)},function(H){_.status==="pending"&&(_.status="rejected",_.reason=H)})),_.status){case"fulfilled":return _.value;case"rejected":throw _.reason}}throw _}function A(_,H,ee,W,pe){var we=typeof _;(we==="undefined"||we==="boolean")&&(_=null);var je=!1;if(_===null)je=!0;else switch(we){case"bigint":case"string":case"number":je=!0;break;case"object":switch(_.$$typeof){case s:case a:je=!0;break;case x:return je=_._init,A(je(_._payload),H,ee,W,pe)}}if(je)return pe=pe(_),je=W===""?"."+Ee(_,0):W,ke(pe)?(ee="",je!=null&&(ee=je.replace(fe,"$&/")+"/"),A(pe,H,ee,"",function(Gt){return Gt})):pe!=null&&(J(pe)&&(pe=rt(pe,ee+(pe.key==null||_&&_.key===pe.key?"":(""+pe.key).replace(fe,"$&/")+"/")+je)),H.push(pe)),1;je=0;var nt=W===""?".":W+":";if(ke(_))for(var Te=0;Te<_.length;Te++)W=_[Te],we=nt+Ee(W,Te),je+=A(W,H,ee,we,pe);else if(Te=k(_),typeof Te=="function")for(_=Te.call(_),Te=0;!(W=_.next()).done;)W=W.value,we=nt+Ee(W,Te++),je+=A(W,H,ee,we,pe);else if(we==="object"){if(typeof _.then=="function")return A(De(_),H,ee,W,pe);throw H=String(_),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return je}function Y(_,H,ee){if(_==null)return _;var W=[],pe=0;return A(_,W,"","",function(we){return H.call(ee,we,pe++)}),W}function he(_){if(_._status===-1){var H=_._result;H=H(),H.then(function(ee){(_._status===0||_._status===-1)&&(_._status=1,_._result=ee)},function(ee){(_._status===0||_._status===-1)&&(_._status=2,_._result=ee)}),_._status===-1&&(_._status=0,_._result=H)}if(_._status===1)return _._result.default;throw _._result}var _e=typeof reportError=="function"?reportError:function(_){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _=="object"&&_!==null&&typeof _.message=="string"?String(_.message):String(_),error:_});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_);return}console.error(_)},oe={map:Y,forEach:function(_,H,ee){Y(_,function(){H.apply(this,arguments)},ee)},count:function(_){var H=0;return Y(_,function(){H++}),H},toArray:function(_){return Y(_,function(H){return H})||[]},only:function(_){if(!J(_))throw Error("React.Children.only expected to receive a single React element child.");return _}};return Ne.Activity=O,Ne.Children=oe,Ne.Component=Z,Ne.Fragment=i,Ne.Profiler=c,Ne.PureComponent=X,Ne.StrictMode=l,Ne.Suspense=y,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ce,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(_){return ce.H.useMemoCache(_)}},Ne.cache=function(_){return function(){return _.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(_,H,ee){if(_==null)throw Error("The argument must be a React element, but you passed "+_+".");var W=I({},_.props),pe=_.key;if(H!=null)for(we in H.key!==void 0&&(pe=""+H.key),H)!Le.call(H,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&H.ref===void 0||(W[we]=H[we]);var we=arguments.length-2;if(we===1)W.children=ee;else if(1<we){for(var je=Array(we),nt=0;nt<we;nt++)je[nt]=arguments[nt+2];W.children=je}return Ge(_.type,pe,W)},Ne.createContext=function(_){return _={$$typeof:h,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null},_.Provider=_,_.Consumer={$$typeof:f,_context:_},_},Ne.createElement=function(_,H,ee){var W,pe={},we=null;if(H!=null)for(W in H.key!==void 0&&(we=""+H.key),H)Le.call(H,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(pe[W]=H[W]);var je=arguments.length-2;if(je===1)pe.children=ee;else if(1<je){for(var nt=Array(je),Te=0;Te<je;Te++)nt[Te]=arguments[Te+2];pe.children=nt}if(_&&_.defaultProps)for(W in je=_.defaultProps,je)pe[W]===void 0&&(pe[W]=je[W]);return Ge(_,we,pe)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(_){return{$$typeof:p,render:_}},Ne.isValidElement=J,Ne.lazy=function(_){return{$$typeof:x,_payload:{_status:-1,_result:_},_init:he}},Ne.memo=function(_,H){return{$$typeof:v,type:_,compare:H===void 0?null:H}},Ne.startTransition=function(_){var H=ce.T,ee={};ce.T=ee;try{var W=_(),pe=ce.S;pe!==null&&pe(ee,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(ye,_e)}catch(we){_e(we)}finally{H!==null&&ee.types!==null&&(H.types=ee.types),ce.T=H}},Ne.unstable_useCacheRefresh=function(){return ce.H.useCacheRefresh()},Ne.use=function(_){return ce.H.use(_)},Ne.useActionState=function(_,H,ee){return ce.H.useActionState(_,H,ee)},Ne.useCallback=function(_,H){return ce.H.useCallback(_,H)},Ne.useContext=function(_){return ce.H.useContext(_)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(_,H){return ce.H.useDeferredValue(_,H)},Ne.useEffect=function(_,H){return ce.H.useEffect(_,H)},Ne.useEffectEvent=function(_){return ce.H.useEffectEvent(_)},Ne.useId=function(){return ce.H.useId()},Ne.useImperativeHandle=function(_,H,ee){return ce.H.useImperativeHandle(_,H,ee)},Ne.useInsertionEffect=function(_,H){return ce.H.useInsertionEffect(_,H)},Ne.useLayoutEffect=function(_,H){return ce.H.useLayoutEffect(_,H)},Ne.useMemo=function(_,H){return ce.H.useMemo(_,H)},Ne.useOptimistic=function(_,H){return ce.H.useOptimistic(_,H)},Ne.useReducer=function(_,H,ee){return ce.H.useReducer(_,H,ee)},Ne.useRef=function(_){return ce.H.useRef(_)},Ne.useState=function(_){return ce.H.useState(_)},Ne.useSyncExternalStore=function(_,H,ee){return ce.H.useSyncExternalStore(_,H,ee)},Ne.useTransition=function(){return ce.H.useTransition()},Ne.version="19.2.0",Ne}var cm;function pc(){return cm||(cm=1,Iu.exports=dp()),Iu.exports}var ae=pc();const hp=$m(ae);var Xu={exports:{}},rs={},Qu={exports:{}},Ju={};var fm;function mp(){return fm||(fm=1,(function(s){function a(A,Y){var he=A.length;A.push(Y);e:for(;0<he;){var _e=he-1>>>1,oe=A[_e];if(0<c(oe,Y))A[_e]=Y,A[he]=oe,he=_e;else break e}}function i(A){return A.length===0?null:A[0]}function l(A){if(A.length===0)return null;var Y=A[0],he=A.pop();if(he!==Y){A[0]=he;e:for(var _e=0,oe=A.length,_=oe>>>1;_e<_;){var H=2*(_e+1)-1,ee=A[H],W=H+1,pe=A[W];if(0>c(ee,he))W<oe&&0>c(pe,ee)?(A[_e]=pe,A[W]=he,_e=W):(A[_e]=ee,A[H]=he,_e=H);else if(W<oe&&0>c(pe,he))A[_e]=pe,A[W]=he,_e=W;else break e}}return Y}function c(A,Y){var he=A.sortIndex-Y.sortIndex;return he!==0?he:A.id-Y.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;s.unstable_now=function(){return f.now()}}else{var h=Date,p=h.now();s.unstable_now=function(){return h.now()-p}}var y=[],v=[],x=1,O=null,D=3,k=!1,M=!1,I=!1,F=!1,Z=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function le(A){for(var Y=i(v);Y!==null;){if(Y.callback===null)l(v);else if(Y.startTime<=A)l(v),Y.sortIndex=Y.expirationTime,a(y,Y);else break;Y=i(v)}}function ke(A){if(I=!1,le(A),!M)if(i(y)!==null)M=!0,ye||(ye=!0,re());else{var Y=i(v);Y!==null&&De(ke,Y.startTime-A)}}var ye=!1,ce=-1,Le=5,Ge=-1;function rt(){return F?!0:!(s.unstable_now()-Ge<Le)}function J(){if(F=!1,ye){var A=s.unstable_now();Ge=A;var Y=!0;try{e:{M=!1,I&&(I=!1,te(ce),ce=-1),k=!0;var he=D;try{t:{for(le(A),O=i(y);O!==null&&!(O.expirationTime>A&&rt());){var _e=O.callback;if(typeof _e=="function"){O.callback=null,D=O.priorityLevel;var oe=_e(O.expirationTime<=A);if(A=s.unstable_now(),typeof oe=="function"){O.callback=oe,le(A),Y=!0;break t}O===i(y)&&l(y),le(A)}else l(y);O=i(y)}if(O!==null)Y=!0;else{var _=i(v);_!==null&&De(ke,_.startTime-A),Y=!1}}break e}finally{O=null,D=he,k=!1}Y=void 0}}finally{Y?re():ye=!1}}}var re;if(typeof X=="function")re=function(){X(J)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,Ee=fe.port2;fe.port1.onmessage=J,re=function(){Ee.postMessage(null)}}else re=function(){Z(J,0)};function De(A,Y){ce=Z(function(){A(s.unstable_now())},Y)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(A){A.callback=null},s.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Le=0<A?Math.floor(1e3/A):5},s.unstable_getCurrentPriorityLevel=function(){return D},s.unstable_next=function(A){switch(D){case 1:case 2:case 3:var Y=3;break;default:Y=D}var he=D;D=Y;try{return A()}finally{D=he}},s.unstable_requestPaint=function(){F=!0},s.unstable_runWithPriority=function(A,Y){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var he=D;D=A;try{return Y()}finally{D=he}},s.unstable_scheduleCallback=function(A,Y,he){var _e=s.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?_e+he:_e):he=_e,A){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=he+oe,A={id:x++,callback:Y,priorityLevel:A,startTime:he,expirationTime:oe,sortIndex:-1},he>_e?(A.sortIndex=he,a(v,A),i(y)===null&&A===i(v)&&(I?(te(ce),ce=-1):I=!0,De(ke,he-_e))):(A.sortIndex=oe,a(y,A),M||k||(M=!0,ye||(ye=!0,re()))),A},s.unstable_shouldYield=rt,s.unstable_wrapCallback=function(A){var Y=D;return function(){var he=D;D=Y;try{return A.apply(this,arguments)}finally{D=he}}}})(Ju)),Ju}var dm;function yp(){return dm||(dm=1,Qu.exports=mp()),Qu.exports}var Wu={exports:{}},an={};var hm;function gp(){if(hm)return an;hm=1;var s=pc();function a(y){var v="https://react.dev/errors/"+y;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)v+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+y+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var l={d:{f:i,r:function(){throw Error(a(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},c=Symbol.for("react.portal");function f(y,v,x){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:O==null?null:""+O,children:y,containerInfo:v,implementation:x}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(y,v){if(y==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,an.createPortal=function(y,v){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(a(299));return f(y,v,null,x)},an.flushSync=function(y){var v=h.T,x=l.p;try{if(h.T=null,l.p=2,y)return y()}finally{h.T=v,l.p=x,l.d.f()}},an.preconnect=function(y,v){typeof y=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,l.d.C(y,v))},an.prefetchDNS=function(y){typeof y=="string"&&l.d.D(y)},an.preinit=function(y,v){if(typeof y=="string"&&v&&typeof v.as=="string"){var x=v.as,O=p(x,v.crossOrigin),D=typeof v.integrity=="string"?v.integrity:void 0,k=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;x==="style"?l.d.S(y,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:O,integrity:D,fetchPriority:k}):x==="script"&&l.d.X(y,{crossOrigin:O,integrity:D,fetchPriority:k,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},an.preinitModule=function(y,v){if(typeof y=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var x=p(v.as,v.crossOrigin);l.d.M(y,{crossOrigin:x,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&l.d.M(y)},an.preload=function(y,v){if(typeof y=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var x=v.as,O=p(x,v.crossOrigin);l.d.L(y,x,{crossOrigin:O,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},an.preloadModule=function(y,v){if(typeof y=="string")if(v){var x=p(v.as,v.crossOrigin);l.d.m(y,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:x,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else l.d.m(y)},an.requestFormReset=function(y){l.d.r(y)},an.unstable_batchedUpdates=function(y,v){return y(v)},an.useFormState=function(y,v,x){return h.H.useFormState(y,v,x)},an.useFormStatus=function(){return h.H.useHostTransitionStatus()},an.version="19.2.0",an}var mm;function pp(){if(mm)return Wu.exports;mm=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(a){console.error(a)}}return s(),Wu.exports=gp(),Wu.exports}var ym;function vp(){if(ym)return rs;ym=1;var s=yp(),a=pc(),i=pp();function l(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function y(e){if(f(e)!==e)throw Error(l(188))}function v(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(l(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var u=o.alternate;if(u===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===u.child){for(u=o.child;u;){if(u===n)return y(o),e;if(u===r)return y(o),t;u=u.sibling}throw Error(l(188))}if(n.return!==r.return)n=o,r=u;else{for(var d=!1,g=o.child;g;){if(g===n){d=!0,n=o,r=u;break}if(g===r){d=!0,r=o,n=u;break}g=g.sibling}if(!d){for(g=u.child;g;){if(g===n){d=!0,n=u,r=o;break}if(g===r){d=!0,r=u,n=o;break}g=g.sibling}if(!d)throw Error(l(189))}}if(n.alternate!==r)throw Error(l(190))}if(n.tag!==3)throw Error(l(188));return n.stateNode.current===n?e:t}function x(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=x(e),t!==null)return t;e=e.sibling}return null}var O=Object.assign,D=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),te=Symbol.for("react.consumer"),X=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),ke=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),ce=Symbol.for("react.memo"),Le=Symbol.for("react.lazy"),Ge=Symbol.for("react.activity"),rt=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function re(e){return e===null||typeof e!="object"?null:(e=J&&e[J]||e["@@iterator"],typeof e=="function"?e:null)}var fe=Symbol.for("react.client.reference");function Ee(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===fe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case I:return"Fragment";case Z:return"Profiler";case F:return"StrictMode";case ke:return"Suspense";case ye:return"SuspenseList";case Ge:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case M:return"Portal";case X:return e.displayName||"Context";case te:return(e._context.displayName||"Context")+".Consumer";case le:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ce:return t=e.displayName||null,t!==null?t:Ee(e.type)||"Memo";case Le:t=e._payload,e=e._init;try{return Ee(e(t))}catch{}}return null}var De=Array.isArray,A=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},_e=[],oe=-1;function _(e){return{current:e}}function H(e){0>oe||(e.current=_e[oe],_e[oe]=null,oe--)}function ee(e,t){oe++,_e[oe]=e.current,e.current=t}var W=_(null),pe=_(null),we=_(null),je=_(null);function nt(e,t){switch(ee(we,t),ee(pe,e),ee(W,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?kh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=kh(t),e=Rh(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}H(W),ee(W,e)}function Te(){H(W),H(pe),H(we)}function Gt(e){e.memoizedState!==null&&ee(je,e);var t=W.current,n=Rh(t,e.type);t!==n&&(ee(pe,e),ee(W,n))}function ie(e){pe.current===e&&(H(W),H(pe)),je.current===e&&(H(je),Pi._currentValue=he)}var bt,yt;function Vt(e){if(bt===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);bt=t&&t[1]||"",yt=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bt+e+yt}var Gn=!1;function ot(e,t){if(!e||Gn)return"";Gn=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(B){var U=B}Reflect.construct(e,[],K)}else{try{K.call()}catch(B){U=B}e.call(K.prototype)}}else{try{throw Error()}catch(B){U=B}(K=e())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(B){if(B&&U&&typeof B.stack=="string")return[B.stack,U.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=r.DetermineComponentFrameRoot(),d=u[0],g=u[1];if(d&&g){var b=d.split(`
`),R=g.split(`
`);for(o=r=0;r<b.length&&!b[r].includes("DetermineComponentFrameRoot");)r++;for(;o<R.length&&!R[o].includes("DetermineComponentFrameRoot");)o++;if(r===b.length||o===R.length)for(r=b.length-1,o=R.length-1;1<=r&&0<=o&&b[r]!==R[o];)o--;for(;1<=r&&0<=o;r--,o--)if(b[r]!==R[o]){if(r!==1||o!==1)do if(r--,o--,0>o||b[r]!==R[o]){var $=`
`+b[r].replace(" at new "," at ");return e.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",e.displayName)),$}while(1<=r&&0<=o);break}}}finally{Gn=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Vt(n):""}function gn(e,t){switch(e.tag){case 26:case 27:case 5:return Vt(e.type);case 16:return Vt("Lazy");case 13:return e.child!==t&&t!==null?Vt("Suspense Fallback"):Vt("Suspense");case 19:return Vt("SuspenseList");case 0:case 15:return ot(e.type,!1);case 11:return ot(e.type.render,!1);case 1:return ot(e.type,!0);case 31:return Vt("Activity");default:return""}}function nn(e){try{var t="",n=null;do t+=gn(e,n),n=e,e=e.return;while(e);return t}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var Jn=Object.prototype.hasOwnProperty,jn=s.unstable_scheduleCallback,Ut=s.unstable_cancelCallback,Rt=s.unstable_shouldYield,Yt=s.unstable_requestPaint,_t=s.unstable_now,na=s.unstable_getCurrentPriorityLevel,Wn=s.unstable_ImmediatePriority,z=s.unstable_UserBlockingPriority,P=s.unstable_NormalPriority,de=s.unstable_LowPriority,w=s.unstable_IdlePriority,L=s.log,C=s.unstable_setDisableYieldValue,G=null,ne=null;function ge(e){if(typeof L=="function"&&C(e),ne&&typeof ne.setStrictMode=="function")try{ne.setStrictMode(G,e)}catch{}}var se=Math.clz32?Math.clz32:$e,Se=Math.log,Re=Math.LN2;function $e(e){return e>>>=0,e===0?32:31-(Se(e)/Re|0)|0}var We=256,Me=262144,wt=4194304;function St(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Kt(e,t,n){var r=e.pendingLanes;if(r===0)return 0;var o=0,u=e.suspendedLanes,d=e.pingedLanes;e=e.warmLanes;var g=r&134217727;return g!==0?(r=g&~u,r!==0?o=St(r):(d&=g,d!==0?o=St(d):n||(n=g&~e,n!==0&&(o=St(n))))):(g=r&~u,g!==0?o=St(g):d!==0?o=St(d):n||(n=r&~e,n!==0&&(o=St(n)))),o===0?0:t!==0&&t!==o&&(t&u)===0&&(u=o&-o,n=t&-t,u>=n||u===32&&(n&4194048)!==0)?t:o}function Tt(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ut(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ct(){var e=wt;return wt<<=1,(wt&62914560)===0&&(wt=4194304),e}function rn(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ve(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function xt(e,t,n,r,o,u){var d=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var g=e.entanglements,b=e.expirationTimes,R=e.hiddenUpdates;for(n=d&~n;0<n;){var $=31-se(n),K=1<<$;g[$]=0,b[$]=-1;var U=R[$];if(U!==null)for(R[$]=null,$=0;$<U.length;$++){var B=U[$];B!==null&&(B.lane&=-536870913)}n&=~K}r!==0&&sn(e,r,0),u!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=u&~(d&~t))}function sn(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-se(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|n&261930}function kn(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-se(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}function Zn(e,t){var n=t&-t;return n=(n&42)!==0?1:Rn(n),(n&(e.suspendedLanes|t))!==0?0:n}function Rn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function pn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Dn(){var e=Y.p;return e!==0?e:(e=window.event,e===void 0?32:em(e.type))}function Ea(e,t){var n=Y.p;try{return Y.p=e,t()}finally{Y.p=n}}var on=Math.random().toString(36).slice(2),At="__reactFiber$"+on,zt="__reactProps$"+on,Ta="__reactContainer$"+on,mi="__reactEvents$"+on,zl="__reactListeners$"+on,E="__reactHandles$"+on,N="__reactResources$"+on,q="__reactMarker$"+on;function Q(e){delete e[At],delete e[zt],delete e[mi],delete e[zl],delete e[E]}function ue(e){var t=e[At];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ta]||n[At]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Lh(e);e!==null;){if(n=e[At])return n;e=Lh(e)}return t}e=n,n=e.parentNode}return null}function qe(e){if(e=e[At]||e[Ta]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Pe(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(l(33))}function Fe(e){var t=e[N];return t||(t=e[N]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ue(e){e[q]=!0}var vn=new Set,He={};function it(e,t){Qe(e,t),Qe(e+"Capture",t)}function Qe(e,t){for(He[e]=t,e=0;e<t.length;e++)vn.add(t[e])}var Ze=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),aa={},Fa={};function Sr(e){return Jn.call(Fa,e)?!0:Jn.call(aa,e)?!1:Ze.test(e)?Fa[e]=!0:(aa[e]=!0,!1)}function Aa(e,t,n){if(Sr(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var r=t.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function ra(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function It(e,t,n,r){if(r===null)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+r)}}function un(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function yi(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ml(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,u=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(d){n=""+d,u.call(this,d)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(d){n=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pa(e){if(!e._valueTracker){var t=yi(e)?"checked":"value";e._valueTracker=Ml(e,t,""+e[t])}}function ys(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=yi(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function xr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Bl=/[\n"\\]/g;function Nn(e){return e.replace(Bl,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ll(e,t,n,r,o,u,d,g){e.name="",d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"?e.type=d:e.removeAttribute("type"),t!=null?d==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+un(t)):e.value!==""+un(t)&&(e.value=""+un(t)):d!=="submit"&&d!=="reset"||e.removeAttribute("value"),t!=null?ql(e,d,un(t)):n!=null?ql(e,d,un(n)):r!=null&&e.removeAttribute("value"),o==null&&u!=null&&(e.defaultChecked=!!u),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.name=""+un(g):e.removeAttribute("name")}function xc(e,t,n,r,o,u,d,g){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||n!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){Pa(e);return}n=n!=null?""+un(n):"",t=t!=null?""+un(t):n,g||t===e.value||(e.value=t),e.defaultValue=t}r=r??o,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=g?e.checked:!!r,e.defaultChecked=!!r,d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.name=d),Pa(e)}function ql(e,t,n){t==="number"&&xr(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Er(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+un(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Ec(e,t,n){if(t!=null&&(t=""+un(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+un(n):""}function Tc(e,t,n,r){if(t==null){if(r!=null){if(n!=null)throw Error(l(92));if(De(r)){if(1<r.length)throw Error(l(93));r=r[0]}n=r}n==null&&(n=""),t=n}n=un(t),e.defaultValue=n,r=e.textContent,r===n&&r!==""&&r!==null&&(e.value=r),Pa(e)}function Tr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var iy=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ac(e,t,n){var r=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?r?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":r?e.setProperty(t,n):typeof n!="number"||n===0||iy.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Oc(e,t,n){if(t!=null&&typeof t!="object")throw Error(l(62));if(e=e.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var o in t)r=t[o],t.hasOwnProperty(o)&&n[o]!==r&&Ac(e,o,r)}else for(var u in t)t.hasOwnProperty(u)&&Ac(e,u,t[u])}function Hl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ly=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gs(e){return ly.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ia(){}var $l=null;function Gl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ar=null,Or=null;function Cc(e){var t=qe(e);if(t&&(e=t.stateNode)){var n=e[zt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ll(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Nn(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=r[zt]||null;if(!o)throw Error(l(90));Ll(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)r=n[t],r.form===e.form&&ys(r)}break e;case"textarea":Ec(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Er(e,!!n.multiple,t,!1)}}}var Vl=!1;function jc(e,t,n){if(Vl)return e(t,n);Vl=!0;try{var r=e(t);return r}finally{if(Vl=!1,(Ar!==null||Or!==null)&&(al(),Ar&&(t=Ar,e=Or,Or=Ar=null,Cc(t),e)))for(t=0;t<e.length;t++)Cc(e[t])}}function gi(e,t){var n=e.stateNode;if(n===null)return null;var r=n[zt]||null;if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(l(231,t,typeof n));return n}var sa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yl=!1;if(sa)try{var pi={};Object.defineProperty(pi,"passive",{get:function(){Yl=!0}}),window.addEventListener("test",pi,pi),window.removeEventListener("test",pi,pi)}catch{Yl=!1}var Oa=null,Kl=null,ps=null;function kc(){if(ps)return ps;var e,t=Kl,n=t.length,r,o="value"in Oa?Oa.value:Oa.textContent,u=o.length;for(e=0;e<n&&t[e]===o[e];e++);var d=n-e;for(r=1;r<=d&&t[n-r]===o[u-r];r++);return ps=o.slice(e,1<r?1-r:void 0)}function vs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function bs(){return!0}function Rc(){return!1}function cn(e){function t(n,r,o,u,d){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=u,this.target=d,this.currentTarget=null;for(var g in e)e.hasOwnProperty(g)&&(n=e[g],this[g]=n?n(u):u[g]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?bs:Rc,this.isPropagationStopped=Rc,this}return O(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bs)},persist:function(){},isPersistent:bs}),t}var er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_s=cn(er),vi=O({},er,{view:0,detail:0}),oy=cn(vi),Il,Xl,bi,ws=O({},vi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bi&&(bi&&e.type==="mousemove"?(Il=e.screenX-bi.screenX,Xl=e.screenY-bi.screenY):Xl=Il=0,bi=e),Il)},movementY:function(e){return"movementY"in e?e.movementY:Xl}}),Dc=cn(ws),uy=O({},ws,{dataTransfer:0}),cy=cn(uy),fy=O({},vi,{relatedTarget:0}),Ql=cn(fy),dy=O({},er,{animationName:0,elapsedTime:0,pseudoElement:0}),hy=cn(dy),my=O({},er,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yy=cn(my),gy=O({},er,{data:0}),Nc=cn(gy),py={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},by={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _y(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=by[e])?!!t[e]:!1}function Jl(){return _y}var wy=O({},vi,{key:function(e){if(e.key){var t=py[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=vs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?vy[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jl,charCode:function(e){return e.type==="keypress"?vs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?vs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Sy=cn(wy),xy=O({},ws,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uc=cn(xy),Ey=O({},vi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jl}),Ty=cn(Ey),Ay=O({},er,{propertyName:0,elapsedTime:0,pseudoElement:0}),Oy=cn(Ay),Cy=O({},ws,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jy=cn(Cy),ky=O({},er,{newState:0,oldState:0}),Ry=cn(ky),Dy=[9,13,27,32],Wl=sa&&"CompositionEvent"in window,_i=null;sa&&"documentMode"in document&&(_i=document.documentMode);var Ny=sa&&"TextEvent"in window&&!_i,zc=sa&&(!Wl||_i&&8<_i&&11>=_i),Mc=" ",Bc=!1;function Lc(e,t){switch(e){case"keyup":return Dy.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Cr=!1;function Uy(e,t){switch(e){case"compositionend":return qc(t);case"keypress":return t.which!==32?null:(Bc=!0,Mc);case"textInput":return e=t.data,e===Mc&&Bc?null:e;default:return null}}function zy(e,t){if(Cr)return e==="compositionend"||!Wl&&Lc(e,t)?(e=kc(),ps=Kl=Oa=null,Cr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zc&&t.locale!=="ko"?null:t.data;default:return null}}var My={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!My[e.type]:t==="textarea"}function $c(e,t,n,r){Ar?Or?Or.push(r):Or=[r]:Ar=r,t=cl(t,"onChange"),0<t.length&&(n=new _s("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var wi=null,Si=null;function By(e){Eh(e,0)}function Ss(e){var t=Pe(e);if(ys(t))return e}function Gc(e,t){if(e==="change")return t}var Vc=!1;if(sa){var Zl;if(sa){var Fl="oninput"in document;if(!Fl){var Yc=document.createElement("div");Yc.setAttribute("oninput","return;"),Fl=typeof Yc.oninput=="function"}Zl=Fl}else Zl=!1;Vc=Zl&&(!document.documentMode||9<document.documentMode)}function Kc(){wi&&(wi.detachEvent("onpropertychange",Ic),Si=wi=null)}function Ic(e){if(e.propertyName==="value"&&Ss(Si)){var t=[];$c(t,Si,e,Gl(e)),jc(By,t)}}function Ly(e,t,n){e==="focusin"?(Kc(),wi=t,Si=n,wi.attachEvent("onpropertychange",Ic)):e==="focusout"&&Kc()}function qy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ss(Si)}function Hy(e,t){if(e==="click")return Ss(t)}function $y(e,t){if(e==="input"||e==="change")return Ss(t)}function Gy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bn=typeof Object.is=="function"?Object.is:Gy;function xi(e,t){if(bn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!Jn.call(t,o)||!bn(e[o],t[o]))return!1}return!0}function Xc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qc(e,t){var n=Xc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xc(n)}}function Jc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Jc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Wc(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=xr(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=xr(e.document)}return t}function Pl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Vy=sa&&"documentMode"in document&&11>=document.documentMode,jr=null,eo=null,Ei=null,to=!1;function Zc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;to||jr==null||jr!==xr(r)||(r=jr,"selectionStart"in r&&Pl(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ei&&xi(Ei,r)||(Ei=r,r=cl(eo,"onSelect"),0<r.length&&(t=new _s("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=jr)))}function tr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:tr("Animation","AnimationEnd"),animationiteration:tr("Animation","AnimationIteration"),animationstart:tr("Animation","AnimationStart"),transitionrun:tr("Transition","TransitionRun"),transitionstart:tr("Transition","TransitionStart"),transitioncancel:tr("Transition","TransitionCancel"),transitionend:tr("Transition","TransitionEnd")},no={},Fc={};sa&&(Fc=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);function nr(e){if(no[e])return no[e];if(!kr[e])return e;var t=kr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Fc)return no[e]=t[n];return e}var Pc=nr("animationend"),ef=nr("animationiteration"),tf=nr("animationstart"),Yy=nr("transitionrun"),Ky=nr("transitionstart"),Iy=nr("transitioncancel"),nf=nr("transitionend"),af=new Map,ao="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ao.push("scrollEnd");function Vn(e,t){af.set(e,t),it(t,[e])}var xs=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Un=[],Rr=0,ro=0;function Es(){for(var e=Rr,t=ro=Rr=0;t<e;){var n=Un[t];Un[t++]=null;var r=Un[t];Un[t++]=null;var o=Un[t];Un[t++]=null;var u=Un[t];if(Un[t++]=null,r!==null&&o!==null){var d=r.pending;d===null?o.next=o:(o.next=d.next,d.next=o),r.pending=o}u!==0&&rf(n,o,u)}}function Ts(e,t,n,r){Un[Rr++]=e,Un[Rr++]=t,Un[Rr++]=n,Un[Rr++]=r,ro|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function io(e,t,n,r){return Ts(e,t,n,r),As(e)}function ar(e,t){return Ts(e,null,null,t),As(e)}function rf(e,t,n){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n);for(var o=!1,u=e.return;u!==null;)u.childLanes|=n,r=u.alternate,r!==null&&(r.childLanes|=n),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(o=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,o&&t!==null&&(o=31-se(n),e=u.hiddenUpdates,r=e[o],r===null?e[o]=[t]:r.push(t),t.lane=n|536870912),u):null}function As(e){if(50<Ii)throw Ii=0,yu=null,Error(l(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Dr={};function Xy(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(e,t,n,r){return new Xy(e,t,n,r)}function so(e){return e=e.prototype,!(!e||!e.isReactComponent)}function la(e,t){var n=e.alternate;return n===null?(n=_n(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function sf(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Os(e,t,n,r,o,u){var d=0;if(r=e,typeof e=="function")so(e)&&(d=1);else if(typeof e=="string")d=Fg(e,n,W.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Ge:return e=_n(31,n,t,o),e.elementType=Ge,e.lanes=u,e;case I:return rr(n.children,o,u,t);case F:d=8,o|=24;break;case Z:return e=_n(12,n,t,o|2),e.elementType=Z,e.lanes=u,e;case ke:return e=_n(13,n,t,o),e.elementType=ke,e.lanes=u,e;case ye:return e=_n(19,n,t,o),e.elementType=ye,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case X:d=10;break e;case te:d=9;break e;case le:d=11;break e;case ce:d=14;break e;case Le:d=16,r=null;break e}d=29,n=Error(l(130,e===null?"null":typeof e,"")),r=null}return t=_n(d,n,t,o),t.elementType=e,t.type=r,t.lanes=u,t}function rr(e,t,n,r){return e=_n(7,e,r,t),e.lanes=n,e}function lo(e,t,n){return e=_n(6,e,null,t),e.lanes=n,e}function lf(e){var t=_n(18,null,null,0);return t.stateNode=e,t}function oo(e,t,n){return t=_n(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var of=new WeakMap;function zn(e,t){if(typeof e=="object"&&e!==null){var n=of.get(e);return n!==void 0?n:(t={value:e,source:t,stack:nn(t)},of.set(e,t),t)}return{value:e,source:t,stack:nn(t)}}var Nr=[],Ur=0,Cs=null,Ti=0,Mn=[],Bn=0,Ca=null,Fn=1,Pn="";function oa(e,t){Nr[Ur++]=Ti,Nr[Ur++]=Cs,Cs=e,Ti=t}function uf(e,t,n){Mn[Bn++]=Fn,Mn[Bn++]=Pn,Mn[Bn++]=Ca,Ca=e;var r=Fn;e=Pn;var o=32-se(r)-1;r&=~(1<<o),n+=1;var u=32-se(t)+o;if(30<u){var d=o-o%5;u=(r&(1<<d)-1).toString(32),r>>=d,o-=d,Fn=1<<32-se(t)+o|n<<o|r,Pn=u+e}else Fn=1<<u|n<<o|r,Pn=e}function uo(e){e.return!==null&&(oa(e,1),uf(e,1,0))}function co(e){for(;e===Cs;)Cs=Nr[--Ur],Nr[Ur]=null,Ti=Nr[--Ur],Nr[Ur]=null;for(;e===Ca;)Ca=Mn[--Bn],Mn[Bn]=null,Pn=Mn[--Bn],Mn[Bn]=null,Fn=Mn[--Bn],Mn[Bn]=null}function cf(e,t){Mn[Bn++]=Fn,Mn[Bn++]=Pn,Mn[Bn++]=Ca,Fn=t.id,Pn=t.overflow,Ca=e}var Wt=null,pt=null,Je=!1,ja=null,Ln=!1,fo=Error(l(519));function ka(e){var t=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ai(zn(t,e)),fo}function ff(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[At]=e,t[zt]=r,n){case"dialog":Ke("cancel",t),Ke("close",t);break;case"iframe":case"object":case"embed":Ke("load",t);break;case"video":case"audio":for(n=0;n<Qi.length;n++)Ke(Qi[n],t);break;case"source":Ke("error",t);break;case"img":case"image":case"link":Ke("error",t),Ke("load",t);break;case"details":Ke("toggle",t);break;case"input":Ke("invalid",t),xc(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Ke("invalid",t);break;case"textarea":Ke("invalid",t),Tc(t,r.value,r.defaultValue,r.children)}n=r.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||r.suppressHydrationWarning===!0||Ch(t.textContent,n)?(r.popover!=null&&(Ke("beforetoggle",t),Ke("toggle",t)),r.onScroll!=null&&Ke("scroll",t),r.onScrollEnd!=null&&Ke("scrollend",t),r.onClick!=null&&(t.onclick=ia),t=!0):t=!1,t||ka(e,!0)}function df(e){for(Wt=e.return;Wt;)switch(Wt.tag){case 5:case 31:case 13:Ln=!1;return;case 27:case 3:Ln=!0;return;default:Wt=Wt.return}}function zr(e){if(e!==Wt)return!1;if(!Je)return df(e),Je=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||ku(e.type,e.memoizedProps)),n=!n),n&&pt&&ka(e),df(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));pt=Bh(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));pt=Bh(e)}else t===27?(t=pt,Ya(e.type)?(e=zu,zu=null,pt=e):pt=t):pt=Wt?Hn(e.stateNode.nextSibling):null;return!0}function ir(){pt=Wt=null,Je=!1}function ho(){var e=ja;return e!==null&&(mn===null?mn=e:mn.push.apply(mn,e),ja=null),e}function Ai(e){ja===null?ja=[e]:ja.push(e)}var mo=_(null),sr=null,ua=null;function Ra(e,t,n){ee(mo,t._currentValue),t._currentValue=n}function ca(e){e._currentValue=mo.current,H(mo)}function yo(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function go(e,t,n,r){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){var d=o.child;u=u.firstContext;e:for(;u!==null;){var g=u;u=o;for(var b=0;b<t.length;b++)if(g.context===t[b]){u.lanes|=n,g=u.alternate,g!==null&&(g.lanes|=n),yo(u.return,n,e),r||(d=null);break e}u=g.next}}else if(o.tag===18){if(d=o.return,d===null)throw Error(l(341));d.lanes|=n,u=d.alternate,u!==null&&(u.lanes|=n),yo(d,n,e),d=null}else d=o.child;if(d!==null)d.return=o;else for(d=o;d!==null;){if(d===e){d=null;break}if(o=d.sibling,o!==null){o.return=d.return,d=o;break}d=d.return}o=d}}function Mr(e,t,n,r){e=null;for(var o=t,u=!1;o!==null;){if(!u){if((o.flags&524288)!==0)u=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var d=o.alternate;if(d===null)throw Error(l(387));if(d=d.memoizedProps,d!==null){var g=o.type;bn(o.pendingProps.value,d.value)||(e!==null?e.push(g):e=[g])}}else if(o===je.current){if(d=o.alternate,d===null)throw Error(l(387));d.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(Pi):e=[Pi])}o=o.return}e!==null&&go(t,e,n,r),t.flags|=262144}function js(e){for(e=e.firstContext;e!==null;){if(!bn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function lr(e){sr=e,ua=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Zt(e){return hf(sr,e)}function ks(e,t){return sr===null&&lr(e),hf(e,t)}function hf(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},ua===null){if(e===null)throw Error(l(308));ua=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ua=ua.next=t;return n}var Qy=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Jy=s.unstable_scheduleCallback,Wy=s.unstable_NormalPriority,Mt={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function po(){return{controller:new Qy,data:new Map,refCount:0}}function Oi(e){e.refCount--,e.refCount===0&&Jy(Wy,function(){e.controller.abort()})}var Ci=null,vo=0,Br=0,Lr=null;function Zy(e,t){if(Ci===null){var n=Ci=[];vo=0,Br=wu(),Lr={status:"pending",value:void 0,then:function(r){n.push(r)}}}return vo++,t.then(mf,mf),t}function mf(){if(--vo===0&&Ci!==null){Lr!==null&&(Lr.status="fulfilled");var e=Ci;Ci=null,Br=0,Lr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Fy(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var o=0;o<n.length;o++)(0,n[o])(t)},function(o){for(r.status="rejected",r.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),r}var yf=A.S;A.S=function(e,t){Fd=_t(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Zy(e,t),yf!==null&&yf(e,t)};var or=_(null);function bo(){var e=or.current;return e!==null?e:mt.pooledCache}function Rs(e,t){t===null?ee(or,or.current):ee(or,t.pool)}function gf(){var e=bo();return e===null?null:{parent:Mt._currentValue,pool:e}}var qr=Error(l(460)),_o=Error(l(474)),Ds=Error(l(542)),Ns={then:function(){}};function pf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function vf(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(ia,ia),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,_f(e),e;default:if(typeof t.status=="string")t.then(ia,ia);else{if(e=mt,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=t,e.status="pending",e.then(function(r){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=r}},function(r){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=r}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,_f(e),e}throw cr=t,qr}}function ur(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(cr=n,qr):n}}var cr=null;function bf(){if(cr===null)throw Error(l(459));var e=cr;return cr=null,e}function _f(e){if(e===qr||e===Ds)throw Error(l(483))}var Hr=null,ji=0;function Us(e){var t=ji;return ji+=1,Hr===null&&(Hr=[]),vf(Hr,e,t)}function ki(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function zs(e,t){throw t.$$typeof===D?Error(l(525)):(e=Object.prototype.toString.call(t),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function wf(e){function t(T,S){if(e){var j=T.deletions;j===null?(T.deletions=[S],T.flags|=16):j.push(S)}}function n(T,S){if(!e)return null;for(;S!==null;)t(T,S),S=S.sibling;return null}function r(T){for(var S=new Map;T!==null;)T.key!==null?S.set(T.key,T):S.set(T.index,T),T=T.sibling;return S}function o(T,S){return T=la(T,S),T.index=0,T.sibling=null,T}function u(T,S,j){return T.index=j,e?(j=T.alternate,j!==null?(j=j.index,j<S?(T.flags|=67108866,S):j):(T.flags|=67108866,S)):(T.flags|=1048576,S)}function d(T){return e&&T.alternate===null&&(T.flags|=67108866),T}function g(T,S,j,V){return S===null||S.tag!==6?(S=lo(j,T.mode,V),S.return=T,S):(S=o(S,j),S.return=T,S)}function b(T,S,j,V){var xe=j.type;return xe===I?$(T,S,j.props.children,V,j.key):S!==null&&(S.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===Le&&ur(xe)===S.type)?(S=o(S,j.props),ki(S,j),S.return=T,S):(S=Os(j.type,j.key,j.props,null,T.mode,V),ki(S,j),S.return=T,S)}function R(T,S,j,V){return S===null||S.tag!==4||S.stateNode.containerInfo!==j.containerInfo||S.stateNode.implementation!==j.implementation?(S=oo(j,T.mode,V),S.return=T,S):(S=o(S,j.children||[]),S.return=T,S)}function $(T,S,j,V,xe){return S===null||S.tag!==7?(S=rr(j,T.mode,V,xe),S.return=T,S):(S=o(S,j),S.return=T,S)}function K(T,S,j){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return S=lo(""+S,T.mode,j),S.return=T,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case k:return j=Os(S.type,S.key,S.props,null,T.mode,j),ki(j,S),j.return=T,j;case M:return S=oo(S,T.mode,j),S.return=T,S;case Le:return S=ur(S),K(T,S,j)}if(De(S)||re(S))return S=rr(S,T.mode,j,null),S.return=T,S;if(typeof S.then=="function")return K(T,Us(S),j);if(S.$$typeof===X)return K(T,ks(T,S),j);zs(T,S)}return null}function U(T,S,j,V){var xe=S!==null?S.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return xe!==null?null:g(T,S,""+j,V);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case k:return j.key===xe?b(T,S,j,V):null;case M:return j.key===xe?R(T,S,j,V):null;case Le:return j=ur(j),U(T,S,j,V)}if(De(j)||re(j))return xe!==null?null:$(T,S,j,V,null);if(typeof j.then=="function")return U(T,S,Us(j),V);if(j.$$typeof===X)return U(T,S,ks(T,j),V);zs(T,j)}return null}function B(T,S,j,V,xe){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return T=T.get(j)||null,g(S,T,""+V,xe);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case k:return T=T.get(V.key===null?j:V.key)||null,b(S,T,V,xe);case M:return T=T.get(V.key===null?j:V.key)||null,R(S,T,V,xe);case Le:return V=ur(V),B(T,S,j,V,xe)}if(De(V)||re(V))return T=T.get(j)||null,$(S,T,V,xe,null);if(typeof V.then=="function")return B(T,S,j,Us(V),xe);if(V.$$typeof===X)return B(T,S,j,ks(S,V),xe);zs(S,V)}return null}function me(T,S,j,V){for(var xe=null,et=null,ve=S,Be=S=0,Xe=null;ve!==null&&Be<j.length;Be++){ve.index>Be?(Xe=ve,ve=null):Xe=ve.sibling;var tt=U(T,ve,j[Be],V);if(tt===null){ve===null&&(ve=Xe);break}e&&ve&&tt.alternate===null&&t(T,ve),S=u(tt,S,Be),et===null?xe=tt:et.sibling=tt,et=tt,ve=Xe}if(Be===j.length)return n(T,ve),Je&&oa(T,Be),xe;if(ve===null){for(;Be<j.length;Be++)ve=K(T,j[Be],V),ve!==null&&(S=u(ve,S,Be),et===null?xe=ve:et.sibling=ve,et=ve);return Je&&oa(T,Be),xe}for(ve=r(ve);Be<j.length;Be++)Xe=B(ve,T,Be,j[Be],V),Xe!==null&&(e&&Xe.alternate!==null&&ve.delete(Xe.key===null?Be:Xe.key),S=u(Xe,S,Be),et===null?xe=Xe:et.sibling=Xe,et=Xe);return e&&ve.forEach(function(Ja){return t(T,Ja)}),Je&&oa(T,Be),xe}function Ae(T,S,j,V){if(j==null)throw Error(l(151));for(var xe=null,et=null,ve=S,Be=S=0,Xe=null,tt=j.next();ve!==null&&!tt.done;Be++,tt=j.next()){ve.index>Be?(Xe=ve,ve=null):Xe=ve.sibling;var Ja=U(T,ve,tt.value,V);if(Ja===null){ve===null&&(ve=Xe);break}e&&ve&&Ja.alternate===null&&t(T,ve),S=u(Ja,S,Be),et===null?xe=Ja:et.sibling=Ja,et=Ja,ve=Xe}if(tt.done)return n(T,ve),Je&&oa(T,Be),xe;if(ve===null){for(;!tt.done;Be++,tt=j.next())tt=K(T,tt.value,V),tt!==null&&(S=u(tt,S,Be),et===null?xe=tt:et.sibling=tt,et=tt);return Je&&oa(T,Be),xe}for(ve=r(ve);!tt.done;Be++,tt=j.next())tt=B(ve,T,Be,tt.value,V),tt!==null&&(e&&tt.alternate!==null&&ve.delete(tt.key===null?Be:tt.key),S=u(tt,S,Be),et===null?xe=tt:et.sibling=tt,et=tt);return e&&ve.forEach(function(up){return t(T,up)}),Je&&oa(T,Be),xe}function ht(T,S,j,V){if(typeof j=="object"&&j!==null&&j.type===I&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case k:e:{for(var xe=j.key;S!==null;){if(S.key===xe){if(xe=j.type,xe===I){if(S.tag===7){n(T,S.sibling),V=o(S,j.props.children),V.return=T,T=V;break e}}else if(S.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===Le&&ur(xe)===S.type){n(T,S.sibling),V=o(S,j.props),ki(V,j),V.return=T,T=V;break e}n(T,S);break}else t(T,S);S=S.sibling}j.type===I?(V=rr(j.props.children,T.mode,V,j.key),V.return=T,T=V):(V=Os(j.type,j.key,j.props,null,T.mode,V),ki(V,j),V.return=T,T=V)}return d(T);case M:e:{for(xe=j.key;S!==null;){if(S.key===xe)if(S.tag===4&&S.stateNode.containerInfo===j.containerInfo&&S.stateNode.implementation===j.implementation){n(T,S.sibling),V=o(S,j.children||[]),V.return=T,T=V;break e}else{n(T,S);break}else t(T,S);S=S.sibling}V=oo(j,T.mode,V),V.return=T,T=V}return d(T);case Le:return j=ur(j),ht(T,S,j,V)}if(De(j))return me(T,S,j,V);if(re(j)){if(xe=re(j),typeof xe!="function")throw Error(l(150));return j=xe.call(j),Ae(T,S,j,V)}if(typeof j.then=="function")return ht(T,S,Us(j),V);if(j.$$typeof===X)return ht(T,S,ks(T,j),V);zs(T,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,S!==null&&S.tag===6?(n(T,S.sibling),V=o(S,j),V.return=T,T=V):(n(T,S),V=lo(j,T.mode,V),V.return=T,T=V),d(T)):n(T,S)}return function(T,S,j,V){try{ji=0;var xe=ht(T,S,j,V);return Hr=null,xe}catch(ve){if(ve===qr||ve===Ds)throw ve;var et=_n(29,ve,null,T.mode);return et.lanes=V,et.return=T,et}}}var fr=wf(!0),Sf=wf(!1),Da=!1;function wo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function So(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Na(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ua(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(at&2)!==0){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,t=As(e),rf(e,null,n),t}return Ts(e,r,t,n),As(e)}function Ri(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,kn(e,n)}}function xo(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,u=null;if(n=n.firstBaseUpdate,n!==null){do{var d={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};u===null?o=u=d:u=u.next=d,n=n.next}while(n!==null);u===null?o=u=t:u=u.next=t}else o=u=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:u,shared:r.shared,callbacks:r.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Eo=!1;function Di(){if(Eo){var e=Lr;if(e!==null)throw e}}function Ni(e,t,n,r){Eo=!1;var o=e.updateQueue;Da=!1;var u=o.firstBaseUpdate,d=o.lastBaseUpdate,g=o.shared.pending;if(g!==null){o.shared.pending=null;var b=g,R=b.next;b.next=null,d===null?u=R:d.next=R,d=b;var $=e.alternate;$!==null&&($=$.updateQueue,g=$.lastBaseUpdate,g!==d&&(g===null?$.firstBaseUpdate=R:g.next=R,$.lastBaseUpdate=b))}if(u!==null){var K=o.baseState;d=0,$=R=b=null,g=u;do{var U=g.lane&-536870913,B=U!==g.lane;if(B?(Ie&U)===U:(r&U)===U){U!==0&&U===Br&&(Eo=!0),$!==null&&($=$.next={lane:0,tag:g.tag,payload:g.payload,callback:null,next:null});e:{var me=e,Ae=g;U=t;var ht=n;switch(Ae.tag){case 1:if(me=Ae.payload,typeof me=="function"){K=me.call(ht,K,U);break e}K=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=Ae.payload,U=typeof me=="function"?me.call(ht,K,U):me,U==null)break e;K=O({},K,U);break e;case 2:Da=!0}}U=g.callback,U!==null&&(e.flags|=64,B&&(e.flags|=8192),B=o.callbacks,B===null?o.callbacks=[U]:B.push(U))}else B={lane:U,tag:g.tag,payload:g.payload,callback:g.callback,next:null},$===null?(R=$=B,b=K):$=$.next=B,d|=U;if(g=g.next,g===null){if(g=o.shared.pending,g===null)break;B=g,g=B.next,B.next=null,o.lastBaseUpdate=B,o.shared.pending=null}}while(!0);$===null&&(b=K),o.baseState=b,o.firstBaseUpdate=R,o.lastBaseUpdate=$,u===null&&(o.shared.lanes=0),qa|=d,e.lanes=d,e.memoizedState=K}}function xf(e,t){if(typeof e!="function")throw Error(l(191,e));e.call(t)}function Ef(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)xf(n[e],t)}var $r=_(null),Ms=_(0);function Tf(e,t){e=ba,ee(Ms,e),ee($r,t),ba=e|t.baseLanes}function To(){ee(Ms,ba),ee($r,$r.current)}function Ao(){ba=Ms.current,H($r),H(Ms)}var wn=_(null),qn=null;function za(e){var t=e.alternate;ee(Dt,Dt.current&1),ee(wn,e),qn===null&&(t===null||$r.current!==null||t.memoizedState!==null)&&(qn=e)}function Oo(e){ee(Dt,Dt.current),ee(wn,e),qn===null&&(qn=e)}function Af(e){e.tag===22?(ee(Dt,Dt.current),ee(wn,e),qn===null&&(qn=e)):Ma()}function Ma(){ee(Dt,Dt.current),ee(wn,wn.current)}function Sn(e){H(wn),qn===e&&(qn=null),H(Dt)}var Dt=_(0);function Bs(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Nu(n)||Uu(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var fa=0,ze=null,ft=null,Bt=null,Ls=!1,Gr=!1,dr=!1,qs=0,Ui=0,Vr=null,Py=0;function Ct(){throw Error(l(321))}function Co(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!bn(e[n],t[n]))return!1;return!0}function jo(e,t,n,r,o,u){return fa=u,ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,A.H=e===null||e.memoizedState===null?ud:Yo,dr=!1,u=n(r,o),dr=!1,Gr&&(u=Cf(t,n,r,o)),Of(e),u}function Of(e){A.H=Bi;var t=ft!==null&&ft.next!==null;if(fa=0,Bt=ft=ze=null,Ls=!1,Ui=0,Vr=null,t)throw Error(l(300));e===null||Lt||(e=e.dependencies,e!==null&&js(e)&&(Lt=!0))}function Cf(e,t,n,r){ze=e;var o=0;do{if(Gr&&(Vr=null),Ui=0,Gr=!1,25<=o)throw Error(l(301));if(o+=1,Bt=ft=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}A.H=cd,u=t(n,r)}while(Gr);return u}function eg(){var e=A.H,t=e.useState()[0];return t=typeof t.then=="function"?zi(t):t,e=e.useState()[0],(ft!==null?ft.memoizedState:null)!==e&&(ze.flags|=1024),t}function ko(){var e=qs!==0;return qs=0,e}function Ro(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Do(e){if(Ls){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Ls=!1}fa=0,Bt=ft=ze=null,Gr=!1,Ui=qs=0,Vr=null}function ln(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?ze.memoizedState=Bt=e:Bt=Bt.next=e,Bt}function Nt(){if(ft===null){var e=ze.alternate;e=e!==null?e.memoizedState:null}else e=ft.next;var t=Bt===null?ze.memoizedState:Bt.next;if(t!==null)Bt=t,ft=e;else{if(e===null)throw ze.alternate===null?Error(l(467)):Error(l(310));ft=e,e={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},Bt===null?ze.memoizedState=Bt=e:Bt=Bt.next=e}return Bt}function Hs(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zi(e){var t=Ui;return Ui+=1,Vr===null&&(Vr=[]),e=vf(Vr,e,t),t=ze,(Bt===null?t.memoizedState:Bt.next)===null&&(t=t.alternate,A.H=t===null||t.memoizedState===null?ud:Yo),e}function $s(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return zi(e);if(e.$$typeof===X)return Zt(e)}throw Error(l(438,String(e)))}function No(e){var t=null,n=ze.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var r=ze.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Hs(),ze.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=rt;return t.index++,n}function da(e,t){return typeof t=="function"?t(e):t}function Gs(e){var t=Nt();return Uo(t,ft,e)}function Uo(e,t,n){var r=e.queue;if(r===null)throw Error(l(311));r.lastRenderedReducer=n;var o=e.baseQueue,u=r.pending;if(u!==null){if(o!==null){var d=o.next;o.next=u.next,u.next=d}t.baseQueue=o=u,r.pending=null}if(u=e.baseState,o===null)e.memoizedState=u;else{t=o.next;var g=d=null,b=null,R=t,$=!1;do{var K=R.lane&-536870913;if(K!==R.lane?(Ie&K)===K:(fa&K)===K){var U=R.revertLane;if(U===0)b!==null&&(b=b.next={lane:0,revertLane:0,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),K===Br&&($=!0);else if((fa&U)===U){R=R.next,U===Br&&($=!0);continue}else K={lane:0,revertLane:R.revertLane,gesture:null,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},b===null?(g=b=K,d=u):b=b.next=K,ze.lanes|=U,qa|=U;K=R.action,dr&&n(u,K),u=R.hasEagerState?R.eagerState:n(u,K)}else U={lane:K,revertLane:R.revertLane,gesture:R.gesture,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null},b===null?(g=b=U,d=u):b=b.next=U,ze.lanes|=K,qa|=K;R=R.next}while(R!==null&&R!==t);if(b===null?d=u:b.next=g,!bn(u,e.memoizedState)&&(Lt=!0,$&&(n=Lr,n!==null)))throw n;e.memoizedState=u,e.baseState=d,e.baseQueue=b,r.lastRenderedState=u}return o===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function zo(e){var t=Nt(),n=t.queue;if(n===null)throw Error(l(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,u=t.memoizedState;if(o!==null){n.pending=null;var d=o=o.next;do u=e(u,d.action),d=d.next;while(d!==o);bn(u,t.memoizedState)||(Lt=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),n.lastRenderedState=u}return[u,r]}function jf(e,t,n){var r=ze,o=Nt(),u=Je;if(u){if(n===void 0)throw Error(l(407));n=n()}else n=t();var d=!bn((ft||o).memoizedState,n);if(d&&(o.memoizedState=n,Lt=!0),o=o.queue,Lo(Df.bind(null,r,o,e),[e]),o.getSnapshot!==t||d||Bt!==null&&Bt.memoizedState.tag&1){if(r.flags|=2048,Yr(9,{destroy:void 0},Rf.bind(null,r,o,n,t),null),mt===null)throw Error(l(349));u||(fa&127)!==0||kf(r,t,n)}return n}function kf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ze.updateQueue,t===null?(t=Hs(),ze.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Rf(e,t,n,r){t.value=n,t.getSnapshot=r,Nf(t)&&Uf(e)}function Df(e,t,n){return n(function(){Nf(t)&&Uf(e)})}function Nf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!bn(e,n)}catch{return!0}}function Uf(e){var t=ar(e,2);t!==null&&yn(t,e,2)}function Mo(e){var t=ln();if(typeof e=="function"){var n=e;if(e=n(),dr){ge(!0);try{n()}finally{ge(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:e},t}function zf(e,t,n,r){return e.baseState=n,Uo(e,ft,typeof r=="function"?r:da)}function tg(e,t,n,r,o){if(Ks(e))throw Error(l(485));if(e=t.action,e!==null){var u={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(d){u.listeners.push(d)}};A.T!==null?n(!0):u.isTransition=!1,r(u),n=t.pending,n===null?(u.next=t.pending=u,Mf(t,u)):(u.next=n.next,t.pending=n.next=u)}}function Mf(e,t){var n=t.action,r=t.payload,o=e.state;if(t.isTransition){var u=A.T,d={};A.T=d;try{var g=n(o,r),b=A.S;b!==null&&b(d,g),Bf(e,t,g)}catch(R){Bo(e,t,R)}finally{u!==null&&d.types!==null&&(u.types=d.types),A.T=u}}else try{u=n(o,r),Bf(e,t,u)}catch(R){Bo(e,t,R)}}function Bf(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(r){Lf(e,t,r)},function(r){return Bo(e,t,r)}):Lf(e,t,n)}function Lf(e,t,n){t.status="fulfilled",t.value=n,qf(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Mf(e,n)))}function Bo(e,t,n){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status="rejected",t.reason=n,qf(t),t=t.next;while(t!==r)}e.action=null}function qf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Hf(e,t){return t}function $f(e,t){if(Je){var n=mt.formState;if(n!==null){e:{var r=ze;if(Je){if(pt){t:{for(var o=pt,u=Ln;o.nodeType!==8;){if(!u){o=null;break t}if(o=Hn(o.nextSibling),o===null){o=null;break t}}u=o.data,o=u==="F!"||u==="F"?o:null}if(o){pt=Hn(o.nextSibling),r=o.data==="F!";break e}}ka(r)}r=!1}r&&(t=n[0])}}return n=ln(),n.memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hf,lastRenderedState:t},n.queue=r,n=sd.bind(null,ze,r),r.dispatch=n,r=Mo(!1),u=Vo.bind(null,ze,!1,r.queue),r=ln(),o={state:t,dispatch:null,action:e,pending:null},r.queue=o,n=tg.bind(null,ze,o,u,n),o.dispatch=n,r.memoizedState=e,[t,n,!1]}function Gf(e){var t=Nt();return Vf(t,ft,e)}function Vf(e,t,n){if(t=Uo(e,t,Hf)[0],e=Gs(da)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var r=zi(t)}catch(d){throw d===qr?Ds:d}else r=t;t=Nt();var o=t.queue,u=o.dispatch;return n!==t.memoizedState&&(ze.flags|=2048,Yr(9,{destroy:void 0},ng.bind(null,o,n),null)),[r,u,e]}function ng(e,t){e.action=t}function Yf(e){var t=Nt(),n=ft;if(n!==null)return Vf(t,n,e);Nt(),t=t.memoizedState,n=Nt();var r=n.queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Yr(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},t=ze.updateQueue,t===null&&(t=Hs(),ze.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Kf(){return Nt().memoizedState}function Vs(e,t,n,r){var o=ln();ze.flags|=e,o.memoizedState=Yr(1|t,{destroy:void 0},n,r===void 0?null:r)}function Ys(e,t,n,r){var o=Nt();r=r===void 0?null:r;var u=o.memoizedState.inst;ft!==null&&r!==null&&Co(r,ft.memoizedState.deps)?o.memoizedState=Yr(t,u,n,r):(ze.flags|=e,o.memoizedState=Yr(1|t,u,n,r))}function If(e,t){Vs(8390656,8,e,t)}function Lo(e,t){Ys(2048,8,e,t)}function ag(e){ze.flags|=4;var t=ze.updateQueue;if(t===null)t=Hs(),ze.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function Xf(e){var t=Nt().memoizedState;return ag({ref:t,nextImpl:e}),function(){if((at&2)!==0)throw Error(l(440));return t.impl.apply(void 0,arguments)}}function Qf(e,t){return Ys(4,2,e,t)}function Jf(e,t){return Ys(4,4,e,t)}function Wf(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Zf(e,t,n){n=n!=null?n.concat([e]):null,Ys(4,4,Wf.bind(null,t,e),n)}function qo(){}function Ff(e,t){var n=Nt();t=t===void 0?null:t;var r=n.memoizedState;return t!==null&&Co(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Pf(e,t){var n=Nt();t=t===void 0?null:t;var r=n.memoizedState;if(t!==null&&Co(t,r[1]))return r[0];if(r=e(),dr){ge(!0);try{e()}finally{ge(!1)}}return n.memoizedState=[r,t],r}function Ho(e,t,n){return n===void 0||(fa&1073741824)!==0&&(Ie&261930)===0?e.memoizedState=t:(e.memoizedState=n,e=eh(),ze.lanes|=e,qa|=e,n)}function ed(e,t,n,r){return bn(n,t)?n:$r.current!==null?(e=Ho(e,n,r),bn(e,t)||(Lt=!0),e):(fa&42)===0||(fa&1073741824)!==0&&(Ie&261930)===0?(Lt=!0,e.memoizedState=n):(e=eh(),ze.lanes|=e,qa|=e,t)}function td(e,t,n,r,o){var u=Y.p;Y.p=u!==0&&8>u?u:8;var d=A.T,g={};A.T=g,Vo(e,!1,t,n);try{var b=o(),R=A.S;if(R!==null&&R(g,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var $=Fy(b,r);Mi(e,t,$,Tn(e))}else Mi(e,t,r,Tn(e))}catch(K){Mi(e,t,{then:function(){},status:"rejected",reason:K},Tn())}finally{Y.p=u,d!==null&&g.types!==null&&(d.types=g.types),A.T=d}}function rg(){}function $o(e,t,n,r){if(e.tag!==5)throw Error(l(476));var o=nd(e).queue;td(e,o,t,he,n===null?rg:function(){return ad(e),n(r)})}function nd(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:he},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function ad(e){var t=nd(e);t.next===null&&(t=e.alternate.memoizedState),Mi(e,t.next.queue,{},Tn())}function Go(){return Zt(Pi)}function rd(){return Nt().memoizedState}function id(){return Nt().memoizedState}function ig(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Tn();e=Na(n);var r=Ua(t,e,n);r!==null&&(yn(r,t,n),Ri(r,t,n)),t={cache:po()},e.payload=t;return}t=t.return}}function sg(e,t,n){var r=Tn();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ks(e)?ld(t,n):(n=io(e,t,n,r),n!==null&&(yn(n,e,r),od(n,t,r)))}function sd(e,t,n){var r=Tn();Mi(e,t,n,r)}function Mi(e,t,n,r){var o={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ks(e))ld(t,o);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var d=t.lastRenderedState,g=u(d,n);if(o.hasEagerState=!0,o.eagerState=g,bn(g,d))return Ts(e,t,o,0),mt===null&&Es(),!1}catch{}if(n=io(e,t,o,r),n!==null)return yn(n,e,r),od(n,t,r),!0}return!1}function Vo(e,t,n,r){if(r={lane:2,revertLane:wu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Ks(e)){if(t)throw Error(l(479))}else t=io(e,n,r,2),t!==null&&yn(t,e,2)}function Ks(e){var t=e.alternate;return e===ze||t!==null&&t===ze}function ld(e,t){Gr=Ls=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function od(e,t,n){if((n&4194048)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,kn(e,n)}}var Bi={readContext:Zt,use:$s,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useLayoutEffect:Ct,useInsertionEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useSyncExternalStore:Ct,useId:Ct,useHostTransitionStatus:Ct,useFormState:Ct,useActionState:Ct,useOptimistic:Ct,useMemoCache:Ct,useCacheRefresh:Ct};Bi.useEffectEvent=Ct;var ud={readContext:Zt,use:$s,useCallback:function(e,t){return ln().memoizedState=[e,t===void 0?null:t],e},useContext:Zt,useEffect:If,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Vs(4194308,4,Wf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vs(4194308,4,e,t)},useInsertionEffect:function(e,t){Vs(4,2,e,t)},useMemo:function(e,t){var n=ln();t=t===void 0?null:t;var r=e();if(dr){ge(!0);try{e()}finally{ge(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=ln();if(n!==void 0){var o=n(t);if(dr){ge(!0);try{n(t)}finally{ge(!1)}}}else o=t;return r.memoizedState=r.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},r.queue=e,e=e.dispatch=sg.bind(null,ze,e),[r.memoizedState,e]},useRef:function(e){var t=ln();return e={current:e},t.memoizedState=e},useState:function(e){e=Mo(e);var t=e.queue,n=sd.bind(null,ze,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:qo,useDeferredValue:function(e,t){var n=ln();return Ho(n,e,t)},useTransition:function(){var e=Mo(!1);return e=td.bind(null,ze,e.queue,!0,!1),ln().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=ze,o=ln();if(Je){if(n===void 0)throw Error(l(407));n=n()}else{if(n=t(),mt===null)throw Error(l(349));(Ie&127)!==0||kf(r,t,n)}o.memoizedState=n;var u={value:n,getSnapshot:t};return o.queue=u,If(Df.bind(null,r,u,e),[e]),r.flags|=2048,Yr(9,{destroy:void 0},Rf.bind(null,r,u,n,t),null),n},useId:function(){var e=ln(),t=mt.identifierPrefix;if(Je){var n=Pn,r=Fn;n=(r&~(1<<32-se(r)-1)).toString(32)+n,t="_"+t+"R_"+n,n=qs++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=Py++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Go,useFormState:$f,useActionState:$f,useOptimistic:function(e){var t=ln();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Vo.bind(null,ze,!0,n),n.dispatch=t,[e,t]},useMemoCache:No,useCacheRefresh:function(){return ln().memoizedState=ig.bind(null,ze)},useEffectEvent:function(e){var t=ln(),n={impl:e};return t.memoizedState=n,function(){if((at&2)!==0)throw Error(l(440));return n.impl.apply(void 0,arguments)}}},Yo={readContext:Zt,use:$s,useCallback:Ff,useContext:Zt,useEffect:Lo,useImperativeHandle:Zf,useInsertionEffect:Qf,useLayoutEffect:Jf,useMemo:Pf,useReducer:Gs,useRef:Kf,useState:function(){return Gs(da)},useDebugValue:qo,useDeferredValue:function(e,t){var n=Nt();return ed(n,ft.memoizedState,e,t)},useTransition:function(){var e=Gs(da)[0],t=Nt().memoizedState;return[typeof e=="boolean"?e:zi(e),t]},useSyncExternalStore:jf,useId:rd,useHostTransitionStatus:Go,useFormState:Gf,useActionState:Gf,useOptimistic:function(e,t){var n=Nt();return zf(n,ft,e,t)},useMemoCache:No,useCacheRefresh:id};Yo.useEffectEvent=Xf;var cd={readContext:Zt,use:$s,useCallback:Ff,useContext:Zt,useEffect:Lo,useImperativeHandle:Zf,useInsertionEffect:Qf,useLayoutEffect:Jf,useMemo:Pf,useReducer:zo,useRef:Kf,useState:function(){return zo(da)},useDebugValue:qo,useDeferredValue:function(e,t){var n=Nt();return ft===null?Ho(n,e,t):ed(n,ft.memoizedState,e,t)},useTransition:function(){var e=zo(da)[0],t=Nt().memoizedState;return[typeof e=="boolean"?e:zi(e),t]},useSyncExternalStore:jf,useId:rd,useHostTransitionStatus:Go,useFormState:Yf,useActionState:Yf,useOptimistic:function(e,t){var n=Nt();return ft!==null?zf(n,ft,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:No,useCacheRefresh:id};cd.useEffectEvent=Xf;function Ko(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:O({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Io={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Tn(),o=Na(r);o.payload=t,n!=null&&(o.callback=n),t=Ua(e,o,r),t!==null&&(yn(t,e,r),Ri(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Tn(),o=Na(r);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Ua(e,o,r),t!==null&&(yn(t,e,r),Ri(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Tn(),r=Na(n);r.tag=2,t!=null&&(r.callback=t),t=Ua(e,r,n),t!==null&&(yn(t,e,n),Ri(t,e,n))}};function fd(e,t,n,r,o,u,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,u,d):t.prototype&&t.prototype.isPureReactComponent?!xi(n,r)||!xi(o,u):!0}function dd(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Io.enqueueReplaceState(t,t.state,null)}function hr(e,t){var n=t;if("ref"in t){n={};for(var r in t)r!=="ref"&&(n[r]=t[r])}if(e=e.defaultProps){n===t&&(n=O({},n));for(var o in e)n[o]===void 0&&(n[o]=e[o])}return n}function hd(e){xs(e)}function md(e){console.error(e)}function yd(e){xs(e)}function Is(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function gd(e,t,n){try{var r=e.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Xo(e,t,n){return n=Na(n),n.tag=3,n.payload={element:null},n.callback=function(){Is(e,t)},n}function pd(e){return e=Na(e),e.tag=3,e}function vd(e,t,n,r){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var u=r.value;e.payload=function(){return o(u)},e.callback=function(){gd(t,n,r)}}var d=n.stateNode;d!==null&&typeof d.componentDidCatch=="function"&&(e.callback=function(){gd(t,n,r),typeof o!="function"&&(Ha===null?Ha=new Set([this]):Ha.add(this));var g=r.stack;this.componentDidCatch(r.value,{componentStack:g!==null?g:""})})}function lg(e,t,n,r,o){if(n.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(t=n.alternate,t!==null&&Mr(t,n,o,!0),n=wn.current,n!==null){switch(n.tag){case 31:case 13:return qn===null?rl():n.alternate===null&&jt===0&&(jt=3),n.flags&=-257,n.flags|=65536,n.lanes=o,r===Ns?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([r]):t.add(r),vu(e,r,o)),!1;case 22:return n.flags|=65536,r===Ns?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([r]):n.add(r)),vu(e,r,o)),!1}throw Error(l(435,n.tag))}return vu(e,r,o),rl(),!1}if(Je)return t=wn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,r!==fo&&(e=Error(l(422),{cause:r}),Ai(zn(e,n)))):(r!==fo&&(t=Error(l(423),{cause:r}),Ai(zn(t,n))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,r=zn(r,n),o=Xo(e.stateNode,r,o),xo(e,o),jt!==4&&(jt=2)),!1;var u=Error(l(520),{cause:r});if(u=zn(u,n),Ki===null?Ki=[u]:Ki.push(u),jt!==4&&(jt=2),t===null)return!0;r=zn(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,e=Xo(n.stateNode,r,e),xo(n,e),!1;case 1:if(t=n.type,u=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(Ha===null||!Ha.has(u))))return n.flags|=65536,o&=-o,n.lanes|=o,o=pd(o),vd(o,e,n,r),xo(n,o),!1}n=n.return}while(n!==null);return!1}var Qo=Error(l(461)),Lt=!1;function Ft(e,t,n,r){t.child=e===null?Sf(t,null,n,r):fr(t,e.child,n,r)}function bd(e,t,n,r,o){n=n.render;var u=t.ref;if("ref"in r){var d={};for(var g in r)g!=="ref"&&(d[g]=r[g])}else d=r;return lr(t),r=jo(e,t,n,d,u,o),g=ko(),e!==null&&!Lt?(Ro(e,t,o),ha(e,t,o)):(Je&&g&&uo(t),t.flags|=1,Ft(e,t,r,o),t.child)}function _d(e,t,n,r,o){if(e===null){var u=n.type;return typeof u=="function"&&!so(u)&&u.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=u,wd(e,t,u,r,o)):(e=Os(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!nu(e,o)){var d=u.memoizedProps;if(n=n.compare,n=n!==null?n:xi,n(d,r)&&e.ref===t.ref)return ha(e,t,o)}return t.flags|=1,e=la(u,r),e.ref=t.ref,e.return=t,t.child=e}function wd(e,t,n,r,o){if(e!==null){var u=e.memoizedProps;if(xi(u,r)&&e.ref===t.ref)if(Lt=!1,t.pendingProps=r=u,nu(e,o))(e.flags&131072)!==0&&(Lt=!0);else return t.lanes=e.lanes,ha(e,t,o)}return Jo(e,t,n,r,o)}function Sd(e,t,n,r){var o=r.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|n:n,e!==null){for(r=t.child=e.child,o=0;r!==null;)o=o|r.lanes|r.childLanes,r=r.sibling;r=o&~u}else r=0,t.child=null;return xd(e,t,u,n,r)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Rs(t,u!==null?u.cachePool:null),u!==null?Tf(t,u):To(),Af(t);else return r=t.lanes=536870912,xd(e,t,u!==null?u.baseLanes|n:n,n,r)}else u!==null?(Rs(t,u.cachePool),Tf(t,u),Ma(),t.memoizedState=null):(e!==null&&Rs(t,null),To(),Ma());return Ft(e,t,o,n),t.child}function Li(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function xd(e,t,n,r,o){var u=bo();return u=u===null?null:{parent:Mt._currentValue,pool:u},t.memoizedState={baseLanes:n,cachePool:u},e!==null&&Rs(t,null),To(),Af(t),e!==null&&Mr(e,t,r,!0),t.childLanes=o,null}function Xs(e,t){return t=Js({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Ed(e,t,n){return fr(t,e.child,null,n),e=Xs(t,t.pendingProps),e.flags|=2,Sn(t),t.memoizedState=null,e}function og(e,t,n){var r=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Je){if(r.mode==="hidden")return e=Xs(t,r),t.lanes=536870912,Li(null,e);if(Oo(t),(e=pt)?(e=Mh(e,Ln),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ca!==null?{id:Fn,overflow:Pn}:null,retryLane:536870912,hydrationErrors:null},n=lf(e),n.return=t,t.child=n,Wt=t,pt=null)):e=null,e===null)throw ka(t);return t.lanes=536870912,null}return Xs(t,r)}var u=e.memoizedState;if(u!==null){var d=u.dehydrated;if(Oo(t),o)if(t.flags&256)t.flags&=-257,t=Ed(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(l(558));else if(Lt||Mr(e,t,n,!1),o=(n&e.childLanes)!==0,Lt||o){if(r=mt,r!==null&&(d=Zn(r,n),d!==0&&d!==u.retryLane))throw u.retryLane=d,ar(e,d),yn(r,e,d),Qo;rl(),t=Ed(e,t,n)}else e=u.treeContext,pt=Hn(d.nextSibling),Wt=t,Je=!0,ja=null,Ln=!1,e!==null&&cf(t,e),t=Xs(t,r),t.flags|=4096;return t}return e=la(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Qs(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(l(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Jo(e,t,n,r,o){return lr(t),n=jo(e,t,n,r,void 0,o),r=ko(),e!==null&&!Lt?(Ro(e,t,o),ha(e,t,o)):(Je&&r&&uo(t),t.flags|=1,Ft(e,t,n,o),t.child)}function Td(e,t,n,r,o,u){return lr(t),t.updateQueue=null,n=Cf(t,r,n,o),Of(e),r=ko(),e!==null&&!Lt?(Ro(e,t,u),ha(e,t,u)):(Je&&r&&uo(t),t.flags|=1,Ft(e,t,n,u),t.child)}function Ad(e,t,n,r,o){if(lr(t),t.stateNode===null){var u=Dr,d=n.contextType;typeof d=="object"&&d!==null&&(u=Zt(d)),u=new n(r,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Io,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=r,u.state=t.memoizedState,u.refs={},wo(t),d=n.contextType,u.context=typeof d=="object"&&d!==null?Zt(d):Dr,u.state=t.memoizedState,d=n.getDerivedStateFromProps,typeof d=="function"&&(Ko(t,n,d,r),u.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(d=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),d!==u.state&&Io.enqueueReplaceState(u,u.state,null),Ni(t,r,u,o),Di(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),r=!0}else if(e===null){u=t.stateNode;var g=t.memoizedProps,b=hr(n,g);u.props=b;var R=u.context,$=n.contextType;d=Dr,typeof $=="object"&&$!==null&&(d=Zt($));var K=n.getDerivedStateFromProps;$=typeof K=="function"||typeof u.getSnapshotBeforeUpdate=="function",g=t.pendingProps!==g,$||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(g||R!==d)&&dd(t,u,r,d),Da=!1;var U=t.memoizedState;u.state=U,Ni(t,r,u,o),Di(),R=t.memoizedState,g||U!==R||Da?(typeof K=="function"&&(Ko(t,n,K,r),R=t.memoizedState),(b=Da||fd(t,n,b,r,U,R,d))?($||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=R),u.props=r,u.state=R,u.context=d,r=b):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{u=t.stateNode,So(e,t),d=t.memoizedProps,$=hr(n,d),u.props=$,K=t.pendingProps,U=u.context,R=n.contextType,b=Dr,typeof R=="object"&&R!==null&&(b=Zt(R)),g=n.getDerivedStateFromProps,(R=typeof g=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(d!==K||U!==b)&&dd(t,u,r,b),Da=!1,U=t.memoizedState,u.state=U,Ni(t,r,u,o),Di();var B=t.memoizedState;d!==K||U!==B||Da||e!==null&&e.dependencies!==null&&js(e.dependencies)?(typeof g=="function"&&(Ko(t,n,g,r),B=t.memoizedState),($=Da||fd(t,n,$,r,U,B,b)||e!==null&&e.dependencies!==null&&js(e.dependencies))?(R||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,B,b),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,B,b)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||d===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=B),u.props=r,u.state=B,u.context=b,r=$):(typeof u.componentDidUpdate!="function"||d===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),r=!1)}return u=r,Qs(e,t),r=(t.flags&128)!==0,u||r?(u=t.stateNode,n=r&&typeof n.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&r?(t.child=fr(t,e.child,null,o),t.child=fr(t,null,n,o)):Ft(e,t,n,o),t.memoizedState=u.state,e=t.child):e=ha(e,t,o),e}function Od(e,t,n,r){return ir(),t.flags|=256,Ft(e,t,n,r),t.child}var Wo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zo(e){return{baseLanes:e,cachePool:gf()}}function Fo(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=En),e}function Cd(e,t,n){var r=t.pendingProps,o=!1,u=(t.flags&128)!==0,d;if((d=u)||(d=e!==null&&e.memoizedState===null?!1:(Dt.current&2)!==0),d&&(o=!0,t.flags&=-129),d=(t.flags&32)!==0,t.flags&=-33,e===null){if(Je){if(o?za(t):Ma(),(e=pt)?(e=Mh(e,Ln),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ca!==null?{id:Fn,overflow:Pn}:null,retryLane:536870912,hydrationErrors:null},n=lf(e),n.return=t,t.child=n,Wt=t,pt=null)):e=null,e===null)throw ka(t);return Uu(e)?t.lanes=32:t.lanes=536870912,null}var g=r.children;return r=r.fallback,o?(Ma(),o=t.mode,g=Js({mode:"hidden",children:g},o),r=rr(r,o,n,null),g.return=t,r.return=t,g.sibling=r,t.child=g,r=t.child,r.memoizedState=Zo(n),r.childLanes=Fo(e,d,n),t.memoizedState=Wo,Li(null,r)):(za(t),Po(t,g))}var b=e.memoizedState;if(b!==null&&(g=b.dehydrated,g!==null)){if(u)t.flags&256?(za(t),t.flags&=-257,t=eu(e,t,n)):t.memoizedState!==null?(Ma(),t.child=e.child,t.flags|=128,t=null):(Ma(),g=r.fallback,o=t.mode,r=Js({mode:"visible",children:r.children},o),g=rr(g,o,n,null),g.flags|=2,r.return=t,g.return=t,r.sibling=g,t.child=r,fr(t,e.child,null,n),r=t.child,r.memoizedState=Zo(n),r.childLanes=Fo(e,d,n),t.memoizedState=Wo,t=Li(null,r));else if(za(t),Uu(g)){if(d=g.nextSibling&&g.nextSibling.dataset,d)var R=d.dgst;d=R,r=Error(l(419)),r.stack="",r.digest=d,Ai({value:r,source:null,stack:null}),t=eu(e,t,n)}else if(Lt||Mr(e,t,n,!1),d=(n&e.childLanes)!==0,Lt||d){if(d=mt,d!==null&&(r=Zn(d,n),r!==0&&r!==b.retryLane))throw b.retryLane=r,ar(e,r),yn(d,e,r),Qo;Nu(g)||rl(),t=eu(e,t,n)}else Nu(g)?(t.flags|=192,t.child=e.child,t=null):(e=b.treeContext,pt=Hn(g.nextSibling),Wt=t,Je=!0,ja=null,Ln=!1,e!==null&&cf(t,e),t=Po(t,r.children),t.flags|=4096);return t}return o?(Ma(),g=r.fallback,o=t.mode,b=e.child,R=b.sibling,r=la(b,{mode:"hidden",children:r.children}),r.subtreeFlags=b.subtreeFlags&65011712,R!==null?g=la(R,g):(g=rr(g,o,n,null),g.flags|=2),g.return=t,r.return=t,r.sibling=g,t.child=r,Li(null,r),r=t.child,g=e.child.memoizedState,g===null?g=Zo(n):(o=g.cachePool,o!==null?(b=Mt._currentValue,o=o.parent!==b?{parent:b,pool:b}:o):o=gf(),g={baseLanes:g.baseLanes|n,cachePool:o}),r.memoizedState=g,r.childLanes=Fo(e,d,n),t.memoizedState=Wo,Li(e.child,r)):(za(t),n=e.child,e=n.sibling,n=la(n,{mode:"visible",children:r.children}),n.return=t,n.sibling=null,e!==null&&(d=t.deletions,d===null?(t.deletions=[e],t.flags|=16):d.push(e)),t.child=n,t.memoizedState=null,n)}function Po(e,t){return t=Js({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Js(e,t){return e=_n(22,e,null,t),e.lanes=0,e}function eu(e,t,n){return fr(t,e.child,null,n),e=Po(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),yo(e.return,t,n)}function tu(e,t,n,r,o,u){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o,treeForkCount:u}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=r,d.tail=n,d.tailMode=o,d.treeForkCount=u)}function kd(e,t,n){var r=t.pendingProps,o=r.revealOrder,u=r.tail;r=r.children;var d=Dt.current,g=(d&2)!==0;if(g?(d=d&1|2,t.flags|=128):d&=1,ee(Dt,d),Ft(e,t,r,n),r=Je?Ti:0,!g&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&jd(e,n,t);else if(e.tag===19)jd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Bs(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),tu(t,!1,o,n,u,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Bs(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}tu(t,!0,n,null,u,r);break;case"together":tu(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function ha(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),qa|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Mr(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(l(153));if(t.child!==null){for(e=t.child,n=la(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=la(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function nu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&js(e)))}function ug(e,t,n){switch(t.tag){case 3:nt(t,t.stateNode.containerInfo),Ra(t,Mt,e.memoizedState.cache),ir();break;case 27:case 5:Gt(t);break;case 4:nt(t,t.stateNode.containerInfo);break;case 10:Ra(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Oo(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(za(t),t.flags|=128,null):(n&t.child.childLanes)!==0?Cd(e,t,n):(za(t),e=ha(e,t,n),e!==null?e.sibling:null);za(t);break;case 19:var o=(e.flags&128)!==0;if(r=(n&t.childLanes)!==0,r||(Mr(e,t,n,!1),r=(n&t.childLanes)!==0),o){if(r)return kd(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ee(Dt,Dt.current),r)break;return null;case 22:return t.lanes=0,Sd(e,t,n,t.pendingProps);case 24:Ra(t,Mt,e.memoizedState.cache)}return ha(e,t,n)}function Rd(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Lt=!0;else{if(!nu(e,n)&&(t.flags&128)===0)return Lt=!1,ug(e,t,n);Lt=(e.flags&131072)!==0}else Lt=!1,Je&&(t.flags&1048576)!==0&&uf(t,Ti,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=ur(t.elementType),t.type=e,typeof e=="function")so(e)?(r=hr(e,r),t.tag=1,t=Ad(null,t,e,r,n)):(t.tag=0,t=Jo(null,t,e,r,n));else{if(e!=null){var o=e.$$typeof;if(o===le){t.tag=11,t=bd(null,t,e,r,n);break e}else if(o===ce){t.tag=14,t=_d(null,t,e,r,n);break e}}throw t=Ee(e)||e,Error(l(306,t,""))}}return t;case 0:return Jo(e,t,t.type,t.pendingProps,n);case 1:return r=t.type,o=hr(r,t.pendingProps),Ad(e,t,r,o,n);case 3:e:{if(nt(t,t.stateNode.containerInfo),e===null)throw Error(l(387));r=t.pendingProps;var u=t.memoizedState;o=u.element,So(e,t),Ni(t,r,null,n);var d=t.memoizedState;if(r=d.cache,Ra(t,Mt,r),r!==u.cache&&go(t,[Mt],n,!0),Di(),r=d.element,u.isDehydrated)if(u={element:r,isDehydrated:!1,cache:d.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=Od(e,t,r,n);break e}else if(r!==o){o=zn(Error(l(424)),t),Ai(o),t=Od(e,t,r,n);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,pt=Hn(e.firstChild),Wt=t,Je=!0,ja=null,Ln=!0,n=Sf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ir(),r===o){t=ha(e,t,n);break e}Ft(e,t,r,n)}t=t.child}return t;case 26:return Qs(e,t),e===null?(n=Gh(t.type,null,t.pendingProps,null))?t.memoizedState=n:Je||(n=t.type,e=t.pendingProps,r=fl(we.current).createElement(n),r[At]=t,r[zt]=e,Pt(r,n,e),Ue(r),t.stateNode=r):t.memoizedState=Gh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Gt(t),e===null&&Je&&(r=t.stateNode=qh(t.type,t.pendingProps,we.current),Wt=t,Ln=!0,o=pt,Ya(t.type)?(zu=o,pt=Hn(r.firstChild)):pt=o),Ft(e,t,t.pendingProps.children,n),Qs(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Je&&((o=r=pt)&&(r=qg(r,t.type,t.pendingProps,Ln),r!==null?(t.stateNode=r,Wt=t,pt=Hn(r.firstChild),Ln=!1,o=!0):o=!1),o||ka(t)),Gt(t),o=t.type,u=t.pendingProps,d=e!==null?e.memoizedProps:null,r=u.children,ku(o,u)?r=null:d!==null&&ku(o,d)&&(t.flags|=32),t.memoizedState!==null&&(o=jo(e,t,eg,null,null,n),Pi._currentValue=o),Qs(e,t),Ft(e,t,r,n),t.child;case 6:return e===null&&Je&&((e=n=pt)&&(n=Hg(n,t.pendingProps,Ln),n!==null?(t.stateNode=n,Wt=t,pt=null,e=!0):e=!1),e||ka(t)),null;case 13:return Cd(e,t,n);case 4:return nt(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=fr(t,null,r,n):Ft(e,t,r,n),t.child;case 11:return bd(e,t,t.type,t.pendingProps,n);case 7:return Ft(e,t,t.pendingProps,n),t.child;case 8:return Ft(e,t,t.pendingProps.children,n),t.child;case 12:return Ft(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Ra(t,t.type,r.value),Ft(e,t,r.children,n),t.child;case 9:return o=t.type._context,r=t.pendingProps.children,lr(t),o=Zt(o),r=r(o),t.flags|=1,Ft(e,t,r,n),t.child;case 14:return _d(e,t,t.type,t.pendingProps,n);case 15:return wd(e,t,t.type,t.pendingProps,n);case 19:return kd(e,t,n);case 31:return og(e,t,n);case 22:return Sd(e,t,n,t.pendingProps);case 24:return lr(t),r=Zt(Mt),e===null?(o=bo(),o===null&&(o=mt,u=po(),o.pooledCache=u,u.refCount++,u!==null&&(o.pooledCacheLanes|=n),o=u),t.memoizedState={parent:r,cache:o},wo(t),Ra(t,Mt,o)):((e.lanes&n)!==0&&(So(e,t),Ni(t,null,null,n),Di()),o=e.memoizedState,u=t.memoizedState,o.parent!==r?(o={parent:r,cache:r},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),Ra(t,Mt,r)):(r=u.cache,Ra(t,Mt,r),r!==o.cache&&go(t,[Mt],n,!0))),Ft(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(l(156,t.tag))}function ma(e){e.flags|=4}function au(e,t,n,r,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(rh())e.flags|=8192;else throw cr=Ns,_o}else e.flags&=-16777217}function Dd(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Xh(t))if(rh())e.flags|=8192;else throw cr=Ns,_o}function Ws(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?ct():536870912,e.lanes|=t,Qr|=t)}function qi(e,t){if(!Je)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function vt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&65011712,r|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function cg(e,t,n){var r=t.pendingProps;switch(co(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(t),null;case 1:return vt(t),null;case 3:return n=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),ca(Mt),Te(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(zr(t)?ma(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,ho())),vt(t),null;case 26:var o=t.type,u=t.memoizedState;return e===null?(ma(t),u!==null?(vt(t),Dd(t,u)):(vt(t),au(t,o,null,r,n))):u?u!==e.memoizedState?(ma(t),vt(t),Dd(t,u)):(vt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==r&&ma(t),vt(t),au(t,o,e,r,n)),null;case 27:if(ie(t),n=we.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&ma(t);else{if(!r){if(t.stateNode===null)throw Error(l(166));return vt(t),null}e=W.current,zr(t)?ff(t):(e=qh(o,r,n),t.stateNode=e,ma(t))}return vt(t),null;case 5:if(ie(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&ma(t);else{if(!r){if(t.stateNode===null)throw Error(l(166));return vt(t),null}if(u=W.current,zr(t))ff(t);else{var d=fl(we.current);switch(u){case 1:u=d.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:u=d.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":u=d.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":u=d.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":u=d.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof r.is=="string"?d.createElement("select",{is:r.is}):d.createElement("select"),r.multiple?u.multiple=!0:r.size&&(u.size=r.size);break;default:u=typeof r.is=="string"?d.createElement(o,{is:r.is}):d.createElement(o)}}u[At]=t,u[zt]=r;e:for(d=t.child;d!==null;){if(d.tag===5||d.tag===6)u.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}t.stateNode=u;e:switch(Pt(u,o,r),o){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ma(t)}}return vt(t),au(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&ma(t);else{if(typeof r!="string"&&t.stateNode===null)throw Error(l(166));if(e=we.current,zr(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,o=Wt,o!==null)switch(o.tag){case 27:case 5:r=o.memoizedProps}e[At]=t,e=!!(e.nodeValue===n||r!==null&&r.suppressHydrationWarning===!0||Ch(e.nodeValue,n)),e||ka(t,!0)}else e=fl(e).createTextNode(r),e[At]=t,t.stateNode=e}return vt(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(r=zr(t),n!==null){if(e===null){if(!r)throw Error(l(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(557));e[At]=t}else ir(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;vt(t),e=!1}else n=ho(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(Sn(t),t):(Sn(t),null);if((t.flags&128)!==0)throw Error(l(558))}return vt(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=zr(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(l(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(l(317));o[At]=t}else ir(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;vt(t),o=!1}else o=ho(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(Sn(t),t):(Sn(t),null)}return Sn(t),(t.flags&128)!==0?(t.lanes=n,t):(n=r!==null,e=e!==null&&e.memoizedState!==null,n&&(r=t.child,o=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(o=r.alternate.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==o&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),Ws(t,t.updateQueue),vt(t),null);case 4:return Te(),e===null&&Tu(t.stateNode.containerInfo),vt(t),null;case 10:return ca(t.type),vt(t),null;case 19:if(H(Dt),r=t.memoizedState,r===null)return vt(t),null;if(o=(t.flags&128)!==0,u=r.rendering,u===null)if(o)qi(r,!1);else{if(jt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=Bs(e),u!==null){for(t.flags|=128,qi(r,!1),e=u.updateQueue,t.updateQueue=e,Ws(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)sf(n,e),n=n.sibling;return ee(Dt,Dt.current&1|2),Je&&oa(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&_t()>tl&&(t.flags|=128,o=!0,qi(r,!1),t.lanes=4194304)}else{if(!o)if(e=Bs(u),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,Ws(t,e),qi(r,!0),r.tail===null&&r.tailMode==="hidden"&&!u.alternate&&!Je)return vt(t),null}else 2*_t()-r.renderingStartTime>tl&&n!==536870912&&(t.flags|=128,o=!0,qi(r,!1),t.lanes=4194304);r.isBackwards?(u.sibling=t.child,t.child=u):(e=r.last,e!==null?e.sibling=u:t.child=u,r.last=u)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=_t(),e.sibling=null,n=Dt.current,ee(Dt,o?n&1|2:n&1),Je&&oa(t,r.treeForkCount),e):(vt(t),null);case 22:case 23:return Sn(t),Ao(),r=t.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?(n&536870912)!==0&&(t.flags&128)===0&&(vt(t),t.subtreeFlags&6&&(t.flags|=8192)):vt(t),n=t.updateQueue,n!==null&&Ws(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),e!==null&&H(or),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ca(Mt),vt(t),null;case 25:return null;case 30:return null}throw Error(l(156,t.tag))}function fg(e,t){switch(co(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ca(Mt),Te(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ie(t),null;case 31:if(t.memoizedState!==null){if(Sn(t),t.alternate===null)throw Error(l(340));ir()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Sn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(l(340));ir()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return H(Dt),null;case 4:return Te(),null;case 10:return ca(t.type),null;case 22:case 23:return Sn(t),Ao(),e!==null&&H(or),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ca(Mt),null;case 25:return null;default:return null}}function Nd(e,t){switch(co(t),t.tag){case 3:ca(Mt),Te();break;case 26:case 27:case 5:ie(t);break;case 4:Te();break;case 31:t.memoizedState!==null&&Sn(t);break;case 13:Sn(t);break;case 19:H(Dt);break;case 10:ca(t.type);break;case 22:case 23:Sn(t),Ao(),e!==null&&H(or);break;case 24:ca(Mt)}}function Hi(e,t){try{var n=t.updateQueue,r=n!==null?n.lastEffect:null;if(r!==null){var o=r.next;n=o;do{if((n.tag&e)===e){r=void 0;var u=n.create,d=n.inst;r=u(),d.destroy=r}n=n.next}while(n!==o)}}catch(g){lt(t,t.return,g)}}function Ba(e,t,n){try{var r=t.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var u=o.next;r=u;do{if((r.tag&e)===e){var d=r.inst,g=d.destroy;if(g!==void 0){d.destroy=void 0,o=t;var b=n,R=g;try{R()}catch($){lt(o,b,$)}}}r=r.next}while(r!==u)}}catch($){lt(t,t.return,$)}}function Ud(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Ef(t,n)}catch(r){lt(e,e.return,r)}}}function zd(e,t,n){n.props=hr(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){lt(e,t,r)}}function $i(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof n=="function"?e.refCleanup=n(r):n.current=r}}catch(o){lt(e,t,o)}}function ea(e,t){var n=e.ref,r=e.refCleanup;if(n!==null)if(typeof r=="function")try{r()}catch(o){lt(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){lt(e,t,o)}else n.current=null}function Md(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(o){lt(e,e.return,o)}}function ru(e,t,n){try{var r=e.stateNode;Ng(r,e.type,n,t),r[zt]=t}catch(o){lt(e,e.return,o)}}function Bd(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ya(e.type)||e.tag===4}function iu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Bd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ya(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function su(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ia));else if(r!==4&&(r===27&&Ya(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(su(e,t,n),e=e.sibling;e!==null;)su(e,t,n),e=e.sibling}function Zs(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(r===27&&Ya(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Zs(e,t,n),e=e.sibling;e!==null;)Zs(e,t,n),e=e.sibling}function Ld(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);Pt(t,r,n),t[At]=e,t[zt]=n}catch(u){lt(e,e.return,u)}}var ya=!1,qt=!1,lu=!1,qd=typeof WeakSet=="function"?WeakSet:Set,Jt=null;function dg(e,t){if(e=e.containerInfo,Cu=vl,e=Wc(e),Pl(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,u=r.focusNode;r=r.focusOffset;try{n.nodeType,u.nodeType}catch{n=null;break e}var d=0,g=-1,b=-1,R=0,$=0,K=e,U=null;t:for(;;){for(var B;K!==n||o!==0&&K.nodeType!==3||(g=d+o),K!==u||r!==0&&K.nodeType!==3||(b=d+r),K.nodeType===3&&(d+=K.nodeValue.length),(B=K.firstChild)!==null;)U=K,K=B;for(;;){if(K===e)break t;if(U===n&&++R===o&&(g=d),U===u&&++$===r&&(b=d),(B=K.nextSibling)!==null)break;K=U,U=K.parentNode}K=B}n=g===-1||b===-1?null:{start:g,end:b}}else n=null}n=n||{start:0,end:0}}else n=null;for(ju={focusedElem:e,selectionRange:n},vl=!1,Jt=t;Jt!==null;)if(t=Jt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Jt=e;else for(;Jt!==null;){switch(t=Jt,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)o=e[n],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,n=t,o=u.memoizedProps,u=u.memoizedState,r=n.stateNode;try{var me=hr(n.type,o);e=r.getSnapshotBeforeUpdate(me,u),r.__reactInternalSnapshotBeforeUpdate=e}catch(Ae){lt(n,n.return,Ae)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Du(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Du(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=t.sibling,e!==null){e.return=t.return,Jt=e;break}Jt=t.return}}function Hd(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:pa(e,n),r&4&&Hi(5,n);break;case 1:if(pa(e,n),r&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(d){lt(n,n.return,d)}else{var o=hr(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(d){lt(n,n.return,d)}}r&64&&Ud(n),r&512&&$i(n,n.return);break;case 3:if(pa(e,n),r&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Ef(e,t)}catch(d){lt(n,n.return,d)}}break;case 27:t===null&&r&4&&Ld(n);case 26:case 5:pa(e,n),t===null&&r&4&&Md(n),r&512&&$i(n,n.return);break;case 12:pa(e,n);break;case 31:pa(e,n),r&4&&Vd(e,n);break;case 13:pa(e,n),r&4&&Yd(e,n),r&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=wg.bind(null,n),$g(e,n))));break;case 22:if(r=n.memoizedState!==null||ya,!r){t=t!==null&&t.memoizedState!==null||qt,o=ya;var u=qt;ya=r,(qt=t)&&!u?va(e,n,(n.subtreeFlags&8772)!==0):pa(e,n),ya=o,qt=u}break;case 30:break;default:pa(e,n)}}function $d(e){var t=e.alternate;t!==null&&(e.alternate=null,$d(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Q(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Et=null,fn=!1;function ga(e,t,n){for(n=n.child;n!==null;)Gd(e,t,n),n=n.sibling}function Gd(e,t,n){if(ne&&typeof ne.onCommitFiberUnmount=="function")try{ne.onCommitFiberUnmount(G,n)}catch{}switch(n.tag){case 26:qt||ea(n,t),ga(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:qt||ea(n,t);var r=Et,o=fn;Ya(n.type)&&(Et=n.stateNode,fn=!1),ga(e,t,n),Wi(n.stateNode),Et=r,fn=o;break;case 5:qt||ea(n,t);case 6:if(r=Et,o=fn,Et=null,ga(e,t,n),Et=r,fn=o,Et!==null)if(fn)try{(Et.nodeType===9?Et.body:Et.nodeName==="HTML"?Et.ownerDocument.body:Et).removeChild(n.stateNode)}catch(u){lt(n,t,u)}else try{Et.removeChild(n.stateNode)}catch(u){lt(n,t,u)}break;case 18:Et!==null&&(fn?(e=Et,Uh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),ni(e)):Uh(Et,n.stateNode));break;case 4:r=Et,o=fn,Et=n.stateNode.containerInfo,fn=!0,ga(e,t,n),Et=r,fn=o;break;case 0:case 11:case 14:case 15:Ba(2,n,t),qt||Ba(4,n,t),ga(e,t,n);break;case 1:qt||(ea(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"&&zd(n,t,r)),ga(e,t,n);break;case 21:ga(e,t,n);break;case 22:qt=(r=qt)||n.memoizedState!==null,ga(e,t,n),qt=r;break;default:ga(e,t,n)}}function Vd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ni(e)}catch(n){lt(t,t.return,n)}}}function Yd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ni(e)}catch(n){lt(t,t.return,n)}}function hg(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new qd),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new qd),t;default:throw Error(l(435,e.tag))}}function Fs(e,t){var n=hg(e);t.forEach(function(r){if(!n.has(r)){n.add(r);var o=Sg.bind(null,e,r);r.then(o,o)}})}function dn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r],u=e,d=t,g=d;e:for(;g!==null;){switch(g.tag){case 27:if(Ya(g.type)){Et=g.stateNode,fn=!1;break e}break;case 5:Et=g.stateNode,fn=!1;break e;case 3:case 4:Et=g.stateNode.containerInfo,fn=!0;break e}g=g.return}if(Et===null)throw Error(l(160));Gd(u,d,o),Et=null,fn=!1,u=o.alternate,u!==null&&(u.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Kd(t,e),t=t.sibling}var Yn=null;function Kd(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:dn(t,e),hn(e),r&4&&(Ba(3,e,e.return),Hi(3,e),Ba(5,e,e.return));break;case 1:dn(t,e),hn(e),r&512&&(qt||n===null||ea(n,n.return)),r&64&&ya&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var o=Yn;if(dn(t,e),hn(e),r&512&&(qt||n===null||ea(n,n.return)),r&4){var u=n!==null?n.memoizedState:null;if(r=e.memoizedState,n===null)if(r===null)if(e.stateNode===null){e:{r=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(r){case"title":u=o.getElementsByTagName("title")[0],(!u||u[q]||u[At]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=o.createElement(r),o.head.insertBefore(u,o.querySelector("head > title"))),Pt(u,r,n),u[At]=e,Ue(u),r=u;break e;case"link":var d=Kh("link","href",o).get(r+(n.href||""));if(d){for(var g=0;g<d.length;g++)if(u=d[g],u.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&u.getAttribute("rel")===(n.rel==null?null:n.rel)&&u.getAttribute("title")===(n.title==null?null:n.title)&&u.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){d.splice(g,1);break t}}u=o.createElement(r),Pt(u,r,n),o.head.appendChild(u);break;case"meta":if(d=Kh("meta","content",o).get(r+(n.content||""))){for(g=0;g<d.length;g++)if(u=d[g],u.getAttribute("content")===(n.content==null?null:""+n.content)&&u.getAttribute("name")===(n.name==null?null:n.name)&&u.getAttribute("property")===(n.property==null?null:n.property)&&u.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&u.getAttribute("charset")===(n.charSet==null?null:n.charSet)){d.splice(g,1);break t}}u=o.createElement(r),Pt(u,r,n),o.head.appendChild(u);break;default:throw Error(l(468,r))}u[At]=e,Ue(u),r=u}e.stateNode=r}else Ih(o,e.type,e.stateNode);else e.stateNode=Yh(o,r,e.memoizedProps);else u!==r?(u===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):u.count--,r===null?Ih(o,e.type,e.stateNode):Yh(o,r,e.memoizedProps)):r===null&&e.stateNode!==null&&ru(e,e.memoizedProps,n.memoizedProps)}break;case 27:dn(t,e),hn(e),r&512&&(qt||n===null||ea(n,n.return)),n!==null&&r&4&&ru(e,e.memoizedProps,n.memoizedProps);break;case 5:if(dn(t,e),hn(e),r&512&&(qt||n===null||ea(n,n.return)),e.flags&32){o=e.stateNode;try{Tr(o,"")}catch(me){lt(e,e.return,me)}}r&4&&e.stateNode!=null&&(o=e.memoizedProps,ru(e,o,n!==null?n.memoizedProps:o)),r&1024&&(lu=!0);break;case 6:if(dn(t,e),hn(e),r&4){if(e.stateNode===null)throw Error(l(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(me){lt(e,e.return,me)}}break;case 3:if(ml=null,o=Yn,Yn=dl(t.containerInfo),dn(t,e),Yn=o,hn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ni(t.containerInfo)}catch(me){lt(e,e.return,me)}lu&&(lu=!1,Id(e));break;case 4:r=Yn,Yn=dl(e.stateNode.containerInfo),dn(t,e),hn(e),Yn=r;break;case 12:dn(t,e),hn(e);break;case 31:dn(t,e),hn(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Fs(e,r)));break;case 13:dn(t,e),hn(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(el=_t()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Fs(e,r)));break;case 22:o=e.memoizedState!==null;var b=n!==null&&n.memoizedState!==null,R=ya,$=qt;if(ya=R||o,qt=$||b,dn(t,e),qt=$,ya=R,hn(e),r&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(n===null||b||ya||qt||mr(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){b=n=t;try{if(u=b.stateNode,o)d=u.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none";else{g=b.stateNode;var K=b.memoizedProps.style,U=K!=null&&K.hasOwnProperty("display")?K.display:null;g.style.display=U==null||typeof U=="boolean"?"":(""+U).trim()}}catch(me){lt(b,b.return,me)}}}else if(t.tag===6){if(n===null){b=t;try{b.stateNode.nodeValue=o?"":b.memoizedProps}catch(me){lt(b,b.return,me)}}}else if(t.tag===18){if(n===null){b=t;try{var B=b.stateNode;o?zh(B,!0):zh(b.stateNode,!1)}catch(me){lt(b,b.return,me)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,Fs(e,n))));break;case 19:dn(t,e),hn(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,Fs(e,r)));break;case 30:break;case 21:break;default:dn(t,e),hn(e)}}function hn(e){var t=e.flags;if(t&2){try{for(var n,r=e.return;r!==null;){if(Bd(r)){n=r;break}r=r.return}if(n==null)throw Error(l(160));switch(n.tag){case 27:var o=n.stateNode,u=iu(e);Zs(e,u,o);break;case 5:var d=n.stateNode;n.flags&32&&(Tr(d,""),n.flags&=-33);var g=iu(e);Zs(e,g,d);break;case 3:case 4:var b=n.stateNode.containerInfo,R=iu(e);su(e,R,b);break;default:throw Error(l(161))}}catch($){lt(e,e.return,$)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Id(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Id(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function pa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Hd(e,t.alternate,t),t=t.sibling}function mr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ba(4,t,t.return),mr(t);break;case 1:ea(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&zd(t,t.return,n),mr(t);break;case 27:Wi(t.stateNode);case 26:case 5:ea(t,t.return),mr(t);break;case 22:t.memoizedState===null&&mr(t);break;case 30:mr(t);break;default:mr(t)}e=e.sibling}}function va(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var r=t.alternate,o=e,u=t,d=u.flags;switch(u.tag){case 0:case 11:case 15:va(o,u,n),Hi(4,u);break;case 1:if(va(o,u,n),r=u,o=r.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(R){lt(r,r.return,R)}if(r=u,o=r.updateQueue,o!==null){var g=r.stateNode;try{var b=o.shared.hiddenCallbacks;if(b!==null)for(o.shared.hiddenCallbacks=null,o=0;o<b.length;o++)xf(b[o],g)}catch(R){lt(r,r.return,R)}}n&&d&64&&Ud(u),$i(u,u.return);break;case 27:Ld(u);case 26:case 5:va(o,u,n),n&&r===null&&d&4&&Md(u),$i(u,u.return);break;case 12:va(o,u,n);break;case 31:va(o,u,n),n&&d&4&&Vd(o,u);break;case 13:va(o,u,n),n&&d&4&&Yd(o,u);break;case 22:u.memoizedState===null&&va(o,u,n),$i(u,u.return);break;case 30:break;default:va(o,u,n)}t=t.sibling}}function ou(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Oi(n))}function uu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Oi(e))}function Kn(e,t,n,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Xd(e,t,n,r),t=t.sibling}function Xd(e,t,n,r){var o=t.flags;switch(t.tag){case 0:case 11:case 15:Kn(e,t,n,r),o&2048&&Hi(9,t);break;case 1:Kn(e,t,n,r);break;case 3:Kn(e,t,n,r),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Oi(e)));break;case 12:if(o&2048){Kn(e,t,n,r),e=t.stateNode;try{var u=t.memoizedProps,d=u.id,g=u.onPostCommit;typeof g=="function"&&g(d,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(b){lt(t,t.return,b)}}else Kn(e,t,n,r);break;case 31:Kn(e,t,n,r);break;case 13:Kn(e,t,n,r);break;case 23:break;case 22:u=t.stateNode,d=t.alternate,t.memoizedState!==null?u._visibility&2?Kn(e,t,n,r):Gi(e,t):u._visibility&2?Kn(e,t,n,r):(u._visibility|=2,Kr(e,t,n,r,(t.subtreeFlags&10256)!==0||!1)),o&2048&&ou(d,t);break;case 24:Kn(e,t,n,r),o&2048&&uu(t.alternate,t);break;default:Kn(e,t,n,r)}}function Kr(e,t,n,r,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,d=t,g=n,b=r,R=d.flags;switch(d.tag){case 0:case 11:case 15:Kr(u,d,g,b,o),Hi(8,d);break;case 23:break;case 22:var $=d.stateNode;d.memoizedState!==null?$._visibility&2?Kr(u,d,g,b,o):Gi(u,d):($._visibility|=2,Kr(u,d,g,b,o)),o&&R&2048&&ou(d.alternate,d);break;case 24:Kr(u,d,g,b,o),o&&R&2048&&uu(d.alternate,d);break;default:Kr(u,d,g,b,o)}t=t.sibling}}function Gi(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,r=t,o=r.flags;switch(r.tag){case 22:Gi(n,r),o&2048&&ou(r.alternate,r);break;case 24:Gi(n,r),o&2048&&uu(r.alternate,r);break;default:Gi(n,r)}t=t.sibling}}var Vi=8192;function Ir(e,t,n){if(e.subtreeFlags&Vi)for(e=e.child;e!==null;)Qd(e,t,n),e=e.sibling}function Qd(e,t,n){switch(e.tag){case 26:Ir(e,t,n),e.flags&Vi&&e.memoizedState!==null&&Pg(n,Yn,e.memoizedState,e.memoizedProps);break;case 5:Ir(e,t,n);break;case 3:case 4:var r=Yn;Yn=dl(e.stateNode.containerInfo),Ir(e,t,n),Yn=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=Vi,Vi=16777216,Ir(e,t,n),Vi=r):Ir(e,t,n));break;default:Ir(e,t,n)}}function Jd(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Yi(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];Jt=r,Zd(r,e)}Jd(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Wd(e),e=e.sibling}function Wd(e){switch(e.tag){case 0:case 11:case 15:Yi(e),e.flags&2048&&Ba(9,e,e.return);break;case 3:Yi(e);break;case 12:Yi(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ps(e)):Yi(e);break;default:Yi(e)}}function Ps(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];Jt=r,Zd(r,e)}Jd(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ba(8,t,t.return),Ps(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Ps(t));break;default:Ps(t)}e=e.sibling}}function Zd(e,t){for(;Jt!==null;){var n=Jt;switch(n.tag){case 0:case 11:case 15:Ba(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:Oi(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,Jt=r;else e:for(n=e;Jt!==null;){r=Jt;var o=r.sibling,u=r.return;if($d(r),r===n){Jt=null;break e}if(o!==null){o.return=u,Jt=o;break e}Jt=u}}}var mg={getCacheForType:function(e){var t=Zt(Mt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Zt(Mt).controller.signal}},yg=typeof WeakMap=="function"?WeakMap:Map,at=0,mt=null,Ye=null,Ie=0,st=0,xn=null,La=!1,Xr=!1,cu=!1,ba=0,jt=0,qa=0,yr=0,fu=0,En=0,Qr=0,Ki=null,mn=null,du=!1,el=0,Fd=0,tl=1/0,nl=null,Ha=null,Xt=0,$a=null,Jr=null,_a=0,hu=0,mu=null,Pd=null,Ii=0,yu=null;function Tn(){return(at&2)!==0&&Ie!==0?Ie&-Ie:A.T!==null?wu():Dn()}function eh(){if(En===0)if((Ie&536870912)===0||Je){var e=Me;Me<<=1,(Me&3932160)===0&&(Me=262144),En=e}else En=536870912;return e=wn.current,e!==null&&(e.flags|=32),En}function yn(e,t,n){(e===mt&&(st===2||st===9)||e.cancelPendingCommit!==null)&&(Wr(e,0),Ga(e,Ie,En,!1)),Ve(e,n),((at&2)===0||e!==mt)&&(e===mt&&((at&2)===0&&(yr|=n),jt===4&&Ga(e,Ie,En,!1)),ta(e))}function th(e,t,n){if((at&6)!==0)throw Error(l(327));var r=!n&&(t&127)===0&&(t&e.expiredLanes)===0||Tt(e,t),o=r?vg(e,t):pu(e,t,!0),u=r;do{if(o===0){Xr&&!r&&Ga(e,t,0,!1);break}else{if(n=e.current.alternate,u&&!gg(n)){o=pu(e,t,!1),u=!1;continue}if(o===2){if(u=t,e.errorRecoveryDisabledLanes&u)var d=0;else d=e.pendingLanes&-536870913,d=d!==0?d:d&536870912?536870912:0;if(d!==0){t=d;e:{var g=e;o=Ki;var b=g.current.memoizedState.isDehydrated;if(b&&(Wr(g,d).flags|=256),d=pu(g,d,!1),d!==2){if(cu&&!b){g.errorRecoveryDisabledLanes|=u,yr|=u,o=4;break e}u=mn,mn=o,u!==null&&(mn===null?mn=u:mn.push.apply(mn,u))}o=d}if(u=!1,o!==2)continue}}if(o===1){Wr(e,0),Ga(e,t,0,!0);break}e:{switch(r=e,u=o,u){case 0:case 1:throw Error(l(345));case 4:if((t&4194048)!==t)break;case 6:Ga(r,t,En,!La);break e;case 2:mn=null;break;case 3:case 5:break;default:throw Error(l(329))}if((t&62914560)===t&&(o=el+300-_t(),10<o)){if(Ga(r,t,En,!La),Kt(r,0,!0)!==0)break e;_a=t,r.timeoutHandle=Dh(nh.bind(null,r,n,mn,nl,du,t,En,yr,Qr,La,u,"Throttled",-0,0),o);break e}nh(r,n,mn,nl,du,t,En,yr,Qr,La,u,null,-0,0)}}break}while(!0);ta(e)}function nh(e,t,n,r,o,u,d,g,b,R,$,K,U,B){if(e.timeoutHandle=-1,K=t.subtreeFlags,K&8192||(K&16785408)===16785408){K={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ia},Qd(t,u,K);var me=(u&62914560)===u?el-_t():(u&4194048)===u?Fd-_t():0;if(me=ep(K,me),me!==null){_a=u,e.cancelPendingCommit=me(ch.bind(null,e,t,u,n,r,o,d,g,b,$,K,null,U,B)),Ga(e,u,d,!R);return}}ch(e,t,u,n,r,o,d,g,b)}function gg(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var o=n[r],u=o.getSnapshot;o=o.value;try{if(!bn(u(),o))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ga(e,t,n,r){t&=~fu,t&=~yr,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var o=t;0<o;){var u=31-se(o),d=1<<u;r[u]=-1,o&=~d}n!==0&&sn(e,n,t)}function al(){return(at&6)===0?(Xi(0),!1):!0}function gu(){if(Ye!==null){if(st===0)var e=Ye.return;else e=Ye,ua=sr=null,Do(e),Hr=null,ji=0,e=Ye;for(;e!==null;)Nd(e.alternate,e),e=e.return;Ye=null}}function Wr(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Mg(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),_a=0,gu(),mt=e,Ye=n=la(e.current,null),Ie=t,st=0,xn=null,La=!1,Xr=Tt(e,t),cu=!1,Qr=En=fu=yr=qa=jt=0,mn=Ki=null,du=!1,(t&8)!==0&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var o=31-se(r),u=1<<o;t|=e[o],r&=~u}return ba=t,Es(),n}function ah(e,t){ze=null,A.H=Bi,t===qr||t===Ds?(t=bf(),st=3):t===_o?(t=bf(),st=4):st=t===Qo?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,xn=t,Ye===null&&(jt=1,Is(e,zn(t,e.current)))}function rh(){var e=wn.current;return e===null?!0:(Ie&4194048)===Ie?qn===null:(Ie&62914560)===Ie||(Ie&536870912)!==0?e===qn:!1}function ih(){var e=A.H;return A.H=Bi,e===null?Bi:e}function sh(){var e=A.A;return A.A=mg,e}function rl(){jt=4,La||(Ie&4194048)!==Ie&&wn.current!==null||(Xr=!0),(qa&134217727)===0&&(yr&134217727)===0||mt===null||Ga(mt,Ie,En,!1)}function pu(e,t,n){var r=at;at|=2;var o=ih(),u=sh();(mt!==e||Ie!==t)&&(nl=null,Wr(e,t)),t=!1;var d=jt;e:do try{if(st!==0&&Ye!==null){var g=Ye,b=xn;switch(st){case 8:gu(),d=6;break e;case 3:case 2:case 9:case 6:wn.current===null&&(t=!0);var R=st;if(st=0,xn=null,Zr(e,g,b,R),n&&Xr){d=0;break e}break;default:R=st,st=0,xn=null,Zr(e,g,b,R)}}pg(),d=jt;break}catch($){ah(e,$)}while(!0);return t&&e.shellSuspendCounter++,ua=sr=null,at=r,A.H=o,A.A=u,Ye===null&&(mt=null,Ie=0,Es()),d}function pg(){for(;Ye!==null;)lh(Ye)}function vg(e,t){var n=at;at|=2;var r=ih(),o=sh();mt!==e||Ie!==t?(nl=null,tl=_t()+500,Wr(e,t)):Xr=Tt(e,t);e:do try{if(st!==0&&Ye!==null){t=Ye;var u=xn;t:switch(st){case 1:st=0,xn=null,Zr(e,t,u,1);break;case 2:case 9:if(pf(u)){st=0,xn=null,oh(t);break}t=function(){st!==2&&st!==9||mt!==e||(st=7),ta(e)},u.then(t,t);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:pf(u)?(st=0,xn=null,oh(t)):(st=0,xn=null,Zr(e,t,u,7));break;case 5:var d=null;switch(Ye.tag){case 26:d=Ye.memoizedState;case 5:case 27:var g=Ye;if(d?Xh(d):g.stateNode.complete){st=0,xn=null;var b=g.sibling;if(b!==null)Ye=b;else{var R=g.return;R!==null?(Ye=R,il(R)):Ye=null}break t}}st=0,xn=null,Zr(e,t,u,5);break;case 6:st=0,xn=null,Zr(e,t,u,6);break;case 8:gu(),jt=6;break e;default:throw Error(l(462))}}bg();break}catch($){ah(e,$)}while(!0);return ua=sr=null,A.H=r,A.A=o,at=n,Ye!==null?0:(mt=null,Ie=0,Es(),jt)}function bg(){for(;Ye!==null&&!Rt();)lh(Ye)}function lh(e){var t=Rd(e.alternate,e,ba);e.memoizedProps=e.pendingProps,t===null?il(e):Ye=t}function oh(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Td(n,t,t.pendingProps,t.type,void 0,Ie);break;case 11:t=Td(n,t,t.pendingProps,t.type.render,t.ref,Ie);break;case 5:Do(t);default:Nd(n,t),t=Ye=sf(t,ba),t=Rd(n,t,ba)}e.memoizedProps=e.pendingProps,t===null?il(e):Ye=t}function Zr(e,t,n,r){ua=sr=null,Do(t),Hr=null,ji=0;var o=t.return;try{if(lg(e,o,t,n,Ie)){jt=1,Is(e,zn(n,e.current)),Ye=null;return}}catch(u){if(o!==null)throw Ye=o,u;jt=1,Is(e,zn(n,e.current)),Ye=null;return}t.flags&32768?(Je||r===1?e=!0:Xr||(Ie&536870912)!==0?e=!1:(La=e=!0,(r===2||r===9||r===3||r===6)&&(r=wn.current,r!==null&&r.tag===13&&(r.flags|=16384))),uh(t,e)):il(t)}function il(e){var t=e;do{if((t.flags&32768)!==0){uh(t,La);return}e=t.return;var n=cg(t.alternate,t,ba);if(n!==null){Ye=n;return}if(t=t.sibling,t!==null){Ye=t;return}Ye=t=e}while(t!==null);jt===0&&(jt=5)}function uh(e,t){do{var n=fg(e.alternate,e);if(n!==null){n.flags&=32767,Ye=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Ye=e;return}Ye=e=n}while(e!==null);jt=6,Ye=null}function ch(e,t,n,r,o,u,d,g,b){e.cancelPendingCommit=null;do sl();while(Xt!==0);if((at&6)!==0)throw Error(l(327));if(t!==null){if(t===e.current)throw Error(l(177));if(u=t.lanes|t.childLanes,u|=ro,xt(e,n,u,d,g,b),e===mt&&(Ye=mt=null,Ie=0),Jr=t,$a=e,_a=n,hu=u,mu=o,Pd=r,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,xg(P,function(){return yh(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||r){r=A.T,A.T=null,o=Y.p,Y.p=2,d=at,at|=4;try{dg(e,t,n)}finally{at=d,Y.p=o,A.T=r}}Xt=1,fh(),dh(),hh()}}function fh(){if(Xt===1){Xt=0;var e=$a,t=Jr,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=A.T,A.T=null;var r=Y.p;Y.p=2;var o=at;at|=4;try{Kd(t,e);var u=ju,d=Wc(e.containerInfo),g=u.focusedElem,b=u.selectionRange;if(d!==g&&g&&g.ownerDocument&&Jc(g.ownerDocument.documentElement,g)){if(b!==null&&Pl(g)){var R=b.start,$=b.end;if($===void 0&&($=R),"selectionStart"in g)g.selectionStart=R,g.selectionEnd=Math.min($,g.value.length);else{var K=g.ownerDocument||document,U=K&&K.defaultView||window;if(U.getSelection){var B=U.getSelection(),me=g.textContent.length,Ae=Math.min(b.start,me),ht=b.end===void 0?Ae:Math.min(b.end,me);!B.extend&&Ae>ht&&(d=ht,ht=Ae,Ae=d);var T=Qc(g,Ae),S=Qc(g,ht);if(T&&S&&(B.rangeCount!==1||B.anchorNode!==T.node||B.anchorOffset!==T.offset||B.focusNode!==S.node||B.focusOffset!==S.offset)){var j=K.createRange();j.setStart(T.node,T.offset),B.removeAllRanges(),Ae>ht?(B.addRange(j),B.extend(S.node,S.offset)):(j.setEnd(S.node,S.offset),B.addRange(j))}}}}for(K=[],B=g;B=B.parentNode;)B.nodeType===1&&K.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<K.length;g++){var V=K[g];V.element.scrollLeft=V.left,V.element.scrollTop=V.top}}vl=!!Cu,ju=Cu=null}finally{at=o,Y.p=r,A.T=n}}e.current=t,Xt=2}}function dh(){if(Xt===2){Xt=0;var e=$a,t=Jr,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=A.T,A.T=null;var r=Y.p;Y.p=2;var o=at;at|=4;try{Hd(e,t.alternate,t)}finally{at=o,Y.p=r,A.T=n}}Xt=3}}function hh(){if(Xt===4||Xt===3){Xt=0,Yt();var e=$a,t=Jr,n=_a,r=Pd;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Xt=5:(Xt=0,Jr=$a=null,mh(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(Ha=null),pn(n),t=t.stateNode,ne&&typeof ne.onCommitFiberRoot=="function")try{ne.onCommitFiberRoot(G,t,void 0,(t.current.flags&128)===128)}catch{}if(r!==null){t=A.T,o=Y.p,Y.p=2,A.T=null;try{for(var u=e.onRecoverableError,d=0;d<r.length;d++){var g=r[d];u(g.value,{componentStack:g.stack})}}finally{A.T=t,Y.p=o}}(_a&3)!==0&&sl(),ta(e),o=e.pendingLanes,(n&261930)!==0&&(o&42)!==0?e===yu?Ii++:(Ii=0,yu=e):Ii=0,Xi(0)}}function mh(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Oi(t)))}function sl(){return fh(),dh(),hh(),yh()}function yh(){if(Xt!==5)return!1;var e=$a,t=hu;hu=0;var n=pn(_a),r=A.T,o=Y.p;try{Y.p=32>n?32:n,A.T=null,n=mu,mu=null;var u=$a,d=_a;if(Xt=0,Jr=$a=null,_a=0,(at&6)!==0)throw Error(l(331));var g=at;if(at|=4,Wd(u.current),Xd(u,u.current,d,n),at=g,Xi(0,!1),ne&&typeof ne.onPostCommitFiberRoot=="function")try{ne.onPostCommitFiberRoot(G,u)}catch{}return!0}finally{Y.p=o,A.T=r,mh(e,t)}}function gh(e,t,n){t=zn(n,t),t=Xo(e.stateNode,t,2),e=Ua(e,t,2),e!==null&&(Ve(e,2),ta(e))}function lt(e,t,n){if(e.tag===3)gh(e,e,n);else for(;t!==null;){if(t.tag===3){gh(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ha===null||!Ha.has(r))){e=zn(n,e),n=pd(2),r=Ua(t,n,2),r!==null&&(vd(n,r,t,e),Ve(r,2),ta(r));break}}t=t.return}}function vu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new yg;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(cu=!0,o.add(n),e=_g.bind(null,e,t,n),t.then(e,e))}function _g(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,mt===e&&(Ie&n)===n&&(jt===4||jt===3&&(Ie&62914560)===Ie&&300>_t()-el?(at&2)===0&&Wr(e,0):fu|=n,Qr===Ie&&(Qr=0)),ta(e)}function ph(e,t){t===0&&(t=ct()),e=ar(e,t),e!==null&&(Ve(e,t),ta(e))}function wg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ph(e,n)}function Sg(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(l(314))}r!==null&&r.delete(t),ph(e,n)}function xg(e,t){return jn(e,t)}var ll=null,Fr=null,bu=!1,ol=!1,_u=!1,Va=0;function ta(e){e!==Fr&&e.next===null&&(Fr===null?ll=Fr=e:Fr=Fr.next=e),ol=!0,bu||(bu=!0,Tg())}function Xi(e,t){if(!_u&&ol){_u=!0;do for(var n=!1,r=ll;r!==null;){if(e!==0){var o=r.pendingLanes;if(o===0)var u=0;else{var d=r.suspendedLanes,g=r.pingedLanes;u=(1<<31-se(42|e)+1)-1,u&=o&~(d&~g),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(n=!0,wh(r,u))}else u=Ie,u=Kt(r,r===mt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(u&3)===0||Tt(r,u)||(n=!0,wh(r,u));r=r.next}while(n);_u=!1}}function Eg(){vh()}function vh(){ol=bu=!1;var e=0;Va!==0&&zg()&&(e=Va);for(var t=_t(),n=null,r=ll;r!==null;){var o=r.next,u=bh(r,t);u===0?(r.next=null,n===null?ll=o:n.next=o,o===null&&(Fr=n)):(n=r,(e!==0||(u&3)!==0)&&(ol=!0)),r=o}Xt!==0&&Xt!==5||Xi(e),Va!==0&&(Va=0)}function bh(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var d=31-se(u),g=1<<d,b=o[d];b===-1?((g&n)===0||(g&r)!==0)&&(o[d]=ut(g,t)):b<=t&&(e.expiredLanes|=g),u&=~g}if(t=mt,n=Ie,n=Kt(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,n===0||e===t&&(st===2||st===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&Ut(r),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||Tt(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(r!==null&&Ut(r),pn(n)){case 2:case 8:n=z;break;case 32:n=P;break;case 268435456:n=w;break;default:n=P}return r=_h.bind(null,e),n=jn(n,r),e.callbackPriority=t,e.callbackNode=n,t}return r!==null&&r!==null&&Ut(r),e.callbackPriority=2,e.callbackNode=null,2}function _h(e,t){if(Xt!==0&&Xt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(sl()&&e.callbackNode!==n)return null;var r=Ie;return r=Kt(e,e===mt?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(th(e,r,t),bh(e,_t()),e.callbackNode!=null&&e.callbackNode===n?_h.bind(null,e):null)}function wh(e,t){if(sl())return null;th(e,t,!0)}function Tg(){Bg(function(){(at&6)!==0?jn(Wn,Eg):vh()})}function wu(){if(Va===0){var e=Br;e===0&&(e=We,We<<=1,(We&261888)===0&&(We=256)),Va=e}return Va}function Sh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:gs(""+e)}function xh(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Ag(e,t,n,r,o){if(t==="submit"&&n&&n.stateNode===o){var u=Sh((o[zt]||null).action),d=r.submitter;d&&(t=(t=d[zt]||null)?Sh(t.formAction):d.getAttribute("formAction"),t!==null&&(u=t,d=null));var g=new _s("action","action",null,r,o);e.push({event:g,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Va!==0){var b=d?xh(o,d):new FormData(o);$o(n,{pending:!0,data:b,method:o.method,action:u},null,b)}}else typeof u=="function"&&(g.preventDefault(),b=d?xh(o,d):new FormData(o),$o(n,{pending:!0,data:b,method:o.method,action:u},u,b))},currentTarget:o}]})}}for(var Su=0;Su<ao.length;Su++){var xu=ao[Su],Og=xu.toLowerCase(),Cg=xu[0].toUpperCase()+xu.slice(1);Vn(Og,"on"+Cg)}Vn(Pc,"onAnimationEnd"),Vn(ef,"onAnimationIteration"),Vn(tf,"onAnimationStart"),Vn("dblclick","onDoubleClick"),Vn("focusin","onFocus"),Vn("focusout","onBlur"),Vn(Yy,"onTransitionRun"),Vn(Ky,"onTransitionStart"),Vn(Iy,"onTransitionCancel"),Vn(nf,"onTransitionEnd"),Qe("onMouseEnter",["mouseout","mouseover"]),Qe("onMouseLeave",["mouseout","mouseover"]),Qe("onPointerEnter",["pointerout","pointerover"]),Qe("onPointerLeave",["pointerout","pointerover"]),it("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),it("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),it("onBeforeInput",["compositionend","keypress","textInput","paste"]),it("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),it("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),it("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qi));function Eh(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var u=void 0;if(t)for(var d=r.length-1;0<=d;d--){var g=r[d],b=g.instance,R=g.currentTarget;if(g=g.listener,b!==u&&o.isPropagationStopped())break e;u=g,o.currentTarget=R;try{u(o)}catch($){xs($)}o.currentTarget=null,u=b}else for(d=0;d<r.length;d++){if(g=r[d],b=g.instance,R=g.currentTarget,g=g.listener,b!==u&&o.isPropagationStopped())break e;u=g,o.currentTarget=R;try{u(o)}catch($){xs($)}o.currentTarget=null,u=b}}}}function Ke(e,t){var n=t[mi];n===void 0&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Th(t,e,2,!1),n.add(r))}function Eu(e,t,n){var r=0;t&&(r|=4),Th(n,e,r,t)}var ul="_reactListening"+Math.random().toString(36).slice(2);function Tu(e){if(!e[ul]){e[ul]=!0,vn.forEach(function(n){n!=="selectionchange"&&(jg.has(n)||Eu(n,!1,e),Eu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ul]||(t[ul]=!0,Eu("selectionchange",!1,t))}}function Th(e,t,n,r){switch(em(t)){case 2:var o=ap;break;case 8:o=rp;break;default:o=Hu}n=o.bind(null,t,n,e),o=void 0,!Yl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Au(e,t,n,r,o){var u=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var d=r.tag;if(d===3||d===4){var g=r.stateNode.containerInfo;if(g===o)break;if(d===4)for(d=r.return;d!==null;){var b=d.tag;if((b===3||b===4)&&d.stateNode.containerInfo===o)return;d=d.return}for(;g!==null;){if(d=ue(g),d===null)return;if(b=d.tag,b===5||b===6||b===26||b===27){r=u=d;continue e}g=g.parentNode}}r=r.return}jc(function(){var R=u,$=Gl(n),K=[];e:{var U=af.get(e);if(U!==void 0){var B=_s,me=e;switch(e){case"keypress":if(vs(n)===0)break e;case"keydown":case"keyup":B=Sy;break;case"focusin":me="focus",B=Ql;break;case"focusout":me="blur",B=Ql;break;case"beforeblur":case"afterblur":B=Ql;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=Dc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=cy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=Ty;break;case Pc:case ef:case tf:B=hy;break;case nf:B=Oy;break;case"scroll":case"scrollend":B=oy;break;case"wheel":B=jy;break;case"copy":case"cut":case"paste":B=yy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=Uc;break;case"toggle":case"beforetoggle":B=Ry}var Ae=(t&4)!==0,ht=!Ae&&(e==="scroll"||e==="scrollend"),T=Ae?U!==null?U+"Capture":null:U;Ae=[];for(var S=R,j;S!==null;){var V=S;if(j=V.stateNode,V=V.tag,V!==5&&V!==26&&V!==27||j===null||T===null||(V=gi(S,T),V!=null&&Ae.push(Ji(S,V,j))),ht)break;S=S.return}0<Ae.length&&(U=new B(U,me,null,n,$),K.push({event:U,listeners:Ae}))}}if((t&7)===0){e:{if(U=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",U&&n!==$l&&(me=n.relatedTarget||n.fromElement)&&(ue(me)||me[Ta]))break e;if((B||U)&&(U=$.window===$?$:(U=$.ownerDocument)?U.defaultView||U.parentWindow:window,B?(me=n.relatedTarget||n.toElement,B=R,me=me?ue(me):null,me!==null&&(ht=f(me),Ae=me.tag,me!==ht||Ae!==5&&Ae!==27&&Ae!==6)&&(me=null)):(B=null,me=R),B!==me)){if(Ae=Dc,V="onMouseLeave",T="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(Ae=Uc,V="onPointerLeave",T="onPointerEnter",S="pointer"),ht=B==null?U:Pe(B),j=me==null?U:Pe(me),U=new Ae(V,S+"leave",B,n,$),U.target=ht,U.relatedTarget=j,V=null,ue($)===R&&(Ae=new Ae(T,S+"enter",me,n,$),Ae.target=j,Ae.relatedTarget=ht,V=Ae),ht=V,B&&me)t:{for(Ae=kg,T=B,S=me,j=0,V=T;V;V=Ae(V))j++;V=0;for(var xe=S;xe;xe=Ae(xe))V++;for(;0<j-V;)T=Ae(T),j--;for(;0<V-j;)S=Ae(S),V--;for(;j--;){if(T===S||S!==null&&T===S.alternate){Ae=T;break t}T=Ae(T),S=Ae(S)}Ae=null}else Ae=null;B!==null&&Ah(K,U,B,Ae,!1),me!==null&&ht!==null&&Ah(K,ht,me,Ae,!0)}}e:{if(U=R?Pe(R):window,B=U.nodeName&&U.nodeName.toLowerCase(),B==="select"||B==="input"&&U.type==="file")var et=Gc;else if(Hc(U))if(Vc)et=$y;else{et=qy;var ve=Ly}else B=U.nodeName,!B||B.toLowerCase()!=="input"||U.type!=="checkbox"&&U.type!=="radio"?R&&Hl(R.elementType)&&(et=Gc):et=Hy;if(et&&(et=et(e,R))){$c(K,et,n,$);break e}ve&&ve(e,U,R),e==="focusout"&&R&&U.type==="number"&&R.memoizedProps.value!=null&&ql(U,"number",U.value)}switch(ve=R?Pe(R):window,e){case"focusin":(Hc(ve)||ve.contentEditable==="true")&&(jr=ve,eo=R,Ei=null);break;case"focusout":Ei=eo=jr=null;break;case"mousedown":to=!0;break;case"contextmenu":case"mouseup":case"dragend":to=!1,Zc(K,n,$);break;case"selectionchange":if(Vy)break;case"keydown":case"keyup":Zc(K,n,$)}var Be;if(Wl)e:{switch(e){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else Cr?Lc(e,n)&&(Xe="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Xe="onCompositionStart");Xe&&(zc&&n.locale!=="ko"&&(Cr||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&Cr&&(Be=kc()):(Oa=$,Kl="value"in Oa?Oa.value:Oa.textContent,Cr=!0)),ve=cl(R,Xe),0<ve.length&&(Xe=new Nc(Xe,e,null,n,$),K.push({event:Xe,listeners:ve}),Be?Xe.data=Be:(Be=qc(n),Be!==null&&(Xe.data=Be)))),(Be=Ny?Uy(e,n):zy(e,n))&&(Xe=cl(R,"onBeforeInput"),0<Xe.length&&(ve=new Nc("onBeforeInput","beforeinput",null,n,$),K.push({event:ve,listeners:Xe}),ve.data=Be)),Ag(K,e,R,n,$)}Eh(K,t)})}function Ji(e,t,n){return{instance:e,listener:t,currentTarget:n}}function cl(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,u=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||u===null||(o=gi(e,n),o!=null&&r.unshift(Ji(e,o,u)),o=gi(e,t),o!=null&&r.push(Ji(e,o,u))),e.tag===3)return r;e=e.return}return[]}function kg(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ah(e,t,n,r,o){for(var u=t._reactName,d=[];n!==null&&n!==r;){var g=n,b=g.alternate,R=g.stateNode;if(g=g.tag,b!==null&&b===r)break;g!==5&&g!==26&&g!==27||R===null||(b=R,o?(R=gi(n,u),R!=null&&d.unshift(Ji(n,R,b))):o||(R=gi(n,u),R!=null&&d.push(Ji(n,R,b)))),n=n.return}d.length!==0&&e.push({event:t,listeners:d})}var Rg=/\r\n?/g,Dg=/\u0000|\uFFFD/g;function Oh(e){return(typeof e=="string"?e:""+e).replace(Rg,`
`).replace(Dg,"")}function Ch(e,t){return t=Oh(t),Oh(e)===t}function dt(e,t,n,r,o,u){switch(n){case"children":typeof r=="string"?t==="body"||t==="textarea"&&r===""||Tr(e,r):(typeof r=="number"||typeof r=="bigint")&&t!=="body"&&Tr(e,""+r);break;case"className":ra(e,"class",r);break;case"tabIndex":ra(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ra(e,n,r);break;case"style":Oc(e,r,u);break;case"data":if(t!=="object"){ra(e,"data",r);break}case"src":case"href":if(r===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(n);break}r=gs(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(n==="formAction"?(t!=="input"&&dt(e,t,"name",o.name,o,null),dt(e,t,"formEncType",o.formEncType,o,null),dt(e,t,"formMethod",o.formMethod,o,null),dt(e,t,"formTarget",o.formTarget,o,null)):(dt(e,t,"encType",o.encType,o,null),dt(e,t,"method",o.method,o,null),dt(e,t,"target",o.target,o,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(n);break}r=gs(""+r),e.setAttribute(n,r);break;case"onClick":r!=null&&(e.onclick=ia);break;case"onScroll":r!=null&&Ke("scroll",e);break;case"onScrollEnd":r!=null&&Ke("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(l(61));if(n=r.__html,n!=null){if(o.children!=null)throw Error(l(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}n=gs(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":r===!0?e.setAttribute(n,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Ke("beforetoggle",e),Ke("toggle",e),Aa(e,"popover",r);break;case"xlinkActuate":It(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":It(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":It(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":It(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":It(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":It(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":It(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":It(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":It(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":Aa(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=sy.get(n)||n,Aa(e,n,r))}}function Ou(e,t,n,r,o,u){switch(n){case"style":Oc(e,r,u);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(l(61));if(n=r.__html,n!=null){if(o.children!=null)throw Error(l(60));e.innerHTML=n}}break;case"children":typeof r=="string"?Tr(e,r):(typeof r=="number"||typeof r=="bigint")&&Tr(e,""+r);break;case"onScroll":r!=null&&Ke("scroll",e);break;case"onScrollEnd":r!=null&&Ke("scrollend",e);break;case"onClick":r!=null&&(e.onclick=ia);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!He.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),u=e[zt]||null,u=u!=null?u[n]:null,typeof u=="function"&&e.removeEventListener(t,u,o),typeof r=="function")){typeof u!="function"&&u!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,o);break e}n in e?e[n]=r:r===!0?e.setAttribute(n,""):Aa(e,n,r)}}}function Pt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",e),Ke("load",e);var r=!1,o=!1,u;for(u in n)if(n.hasOwnProperty(u)){var d=n[u];if(d!=null)switch(u){case"src":r=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:dt(e,t,u,d,n,null)}}o&&dt(e,t,"srcSet",n.srcSet,n,null),r&&dt(e,t,"src",n.src,n,null);return;case"input":Ke("invalid",e);var g=u=d=o=null,b=null,R=null;for(r in n)if(n.hasOwnProperty(r)){var $=n[r];if($!=null)switch(r){case"name":o=$;break;case"type":d=$;break;case"checked":b=$;break;case"defaultChecked":R=$;break;case"value":u=$;break;case"defaultValue":g=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(l(137,t));break;default:dt(e,t,r,$,n,null)}}xc(e,u,g,b,R,d,o,!1);return;case"select":Ke("invalid",e),r=d=u=null;for(o in n)if(n.hasOwnProperty(o)&&(g=n[o],g!=null))switch(o){case"value":u=g;break;case"defaultValue":d=g;break;case"multiple":r=g;default:dt(e,t,o,g,n,null)}t=u,n=d,e.multiple=!!r,t!=null?Er(e,!!r,t,!1):n!=null&&Er(e,!!r,n,!0);return;case"textarea":Ke("invalid",e),u=o=r=null;for(d in n)if(n.hasOwnProperty(d)&&(g=n[d],g!=null))switch(d){case"value":r=g;break;case"defaultValue":o=g;break;case"children":u=g;break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(l(91));break;default:dt(e,t,d,g,n,null)}Tc(e,r,o,u);return;case"option":for(b in n)n.hasOwnProperty(b)&&(r=n[b],r!=null)&&(b==="selected"?e.selected=r&&typeof r!="function"&&typeof r!="symbol":dt(e,t,b,r,n,null));return;case"dialog":Ke("beforetoggle",e),Ke("toggle",e),Ke("cancel",e),Ke("close",e);break;case"iframe":case"object":Ke("load",e);break;case"video":case"audio":for(r=0;r<Qi.length;r++)Ke(Qi[r],e);break;case"image":Ke("error",e),Ke("load",e);break;case"details":Ke("toggle",e);break;case"embed":case"source":case"link":Ke("error",e),Ke("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(R in n)if(n.hasOwnProperty(R)&&(r=n[R],r!=null))switch(R){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,t));default:dt(e,t,R,r,n,null)}return;default:if(Hl(t)){for($ in n)n.hasOwnProperty($)&&(r=n[$],r!==void 0&&Ou(e,t,$,r,n,void 0));return}}for(g in n)n.hasOwnProperty(g)&&(r=n[g],r!=null&&dt(e,t,g,r,n,null))}function Ng(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,u=null,d=null,g=null,b=null,R=null,$=null;for(B in n){var K=n[B];if(n.hasOwnProperty(B)&&K!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":b=K;default:r.hasOwnProperty(B)||dt(e,t,B,null,r,K)}}for(var U in r){var B=r[U];if(K=n[U],r.hasOwnProperty(U)&&(B!=null||K!=null))switch(U){case"type":u=B;break;case"name":o=B;break;case"checked":R=B;break;case"defaultChecked":$=B;break;case"value":d=B;break;case"defaultValue":g=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(l(137,t));break;default:B!==K&&dt(e,t,U,B,r,K)}}Ll(e,d,g,b,R,$,u,o);return;case"select":B=d=g=U=null;for(u in n)if(b=n[u],n.hasOwnProperty(u)&&b!=null)switch(u){case"value":break;case"multiple":B=b;default:r.hasOwnProperty(u)||dt(e,t,u,null,r,b)}for(o in r)if(u=r[o],b=n[o],r.hasOwnProperty(o)&&(u!=null||b!=null))switch(o){case"value":U=u;break;case"defaultValue":g=u;break;case"multiple":d=u;default:u!==b&&dt(e,t,o,u,r,b)}t=g,n=d,r=B,U!=null?Er(e,!!n,U,!1):!!r!=!!n&&(t!=null?Er(e,!!n,t,!0):Er(e,!!n,n?[]:"",!1));return;case"textarea":B=U=null;for(g in n)if(o=n[g],n.hasOwnProperty(g)&&o!=null&&!r.hasOwnProperty(g))switch(g){case"value":break;case"children":break;default:dt(e,t,g,null,r,o)}for(d in r)if(o=r[d],u=n[d],r.hasOwnProperty(d)&&(o!=null||u!=null))switch(d){case"value":U=o;break;case"defaultValue":B=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(l(91));break;default:o!==u&&dt(e,t,d,o,r,u)}Ec(e,U,B);return;case"option":for(var me in n)U=n[me],n.hasOwnProperty(me)&&U!=null&&!r.hasOwnProperty(me)&&(me==="selected"?e.selected=!1:dt(e,t,me,null,r,U));for(b in r)U=r[b],B=n[b],r.hasOwnProperty(b)&&U!==B&&(U!=null||B!=null)&&(b==="selected"?e.selected=U&&typeof U!="function"&&typeof U!="symbol":dt(e,t,b,U,r,B));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in n)U=n[Ae],n.hasOwnProperty(Ae)&&U!=null&&!r.hasOwnProperty(Ae)&&dt(e,t,Ae,null,r,U);for(R in r)if(U=r[R],B=n[R],r.hasOwnProperty(R)&&U!==B&&(U!=null||B!=null))switch(R){case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(l(137,t));break;default:dt(e,t,R,U,r,B)}return;default:if(Hl(t)){for(var ht in n)U=n[ht],n.hasOwnProperty(ht)&&U!==void 0&&!r.hasOwnProperty(ht)&&Ou(e,t,ht,void 0,r,U);for($ in r)U=r[$],B=n[$],!r.hasOwnProperty($)||U===B||U===void 0&&B===void 0||Ou(e,t,$,U,r,B);return}}for(var T in n)U=n[T],n.hasOwnProperty(T)&&U!=null&&!r.hasOwnProperty(T)&&dt(e,t,T,null,r,U);for(K in r)U=r[K],B=n[K],!r.hasOwnProperty(K)||U===B||U==null&&B==null||dt(e,t,K,U,r,B)}function jh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ug(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var o=n[r],u=o.transferSize,d=o.initiatorType,g=o.duration;if(u&&g&&jh(d)){for(d=0,g=o.responseEnd,r+=1;r<n.length;r++){var b=n[r],R=b.startTime;if(R>g)break;var $=b.transferSize,K=b.initiatorType;$&&jh(K)&&(b=b.responseEnd,d+=$*(b<g?1:(g-R)/(b-R)))}if(--r,t+=8*(u+d)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Cu=null,ju=null;function fl(e){return e.nodeType===9?e:e.ownerDocument}function kh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Rh(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function ku(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ru=null;function zg(){var e=window.event;return e&&e.type==="popstate"?e===Ru?!1:(Ru=e,!0):(Ru=null,!1)}var Dh=typeof setTimeout=="function"?setTimeout:void 0,Mg=typeof clearTimeout=="function"?clearTimeout:void 0,Nh=typeof Promise=="function"?Promise:void 0,Bg=typeof queueMicrotask=="function"?queueMicrotask:typeof Nh<"u"?function(e){return Nh.resolve(null).then(e).catch(Lg)}:Dh;function Lg(e){setTimeout(function(){throw e})}function Ya(e){return e==="head"}function Uh(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"||n==="/&"){if(r===0){e.removeChild(o),ni(t);return}r--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")r++;else if(n==="html")Wi(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,Wi(n);for(var u=n.firstChild;u;){var d=u.nextSibling,g=u.nodeName;u[q]||g==="SCRIPT"||g==="STYLE"||g==="LINK"&&u.rel.toLowerCase()==="stylesheet"||n.removeChild(u),u=d}}else n==="body"&&Wi(e.ownerDocument.body);n=o}while(n);ni(t)}function zh(e,t){var n=e;e=0;do{var r=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=r}while(n)}function Du(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Du(n),Q(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function qg(e,t,n,r){for(;e.nodeType===1;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[q])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=Hn(e.nextSibling),e===null)break}return null}function Hg(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Hn(e.nextSibling),e===null))return null;return e}function Mh(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Hn(e.nextSibling),e===null))return null;return e}function Nu(e){return e.data==="$?"||e.data==="$~"}function Uu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function $g(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function Hn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var zu=null;function Bh(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return Hn(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function Lh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function qh(e,t,n){switch(t=fl(n),e){case"html":if(e=t.documentElement,!e)throw Error(l(452));return e;case"head":if(e=t.head,!e)throw Error(l(453));return e;case"body":if(e=t.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function Wi(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Q(e)}var $n=new Map,Hh=new Set;function dl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var wa=Y.d;Y.d={f:Gg,r:Vg,D:Yg,C:Kg,L:Ig,m:Xg,X:Jg,S:Qg,M:Wg};function Gg(){var e=wa.f(),t=al();return e||t}function Vg(e){var t=qe(e);t!==null&&t.tag===5&&t.type==="form"?ad(t):wa.r(e)}var Pr=typeof document>"u"?null:document;function $h(e,t,n){var r=Pr;if(r&&typeof t=="string"&&t){var o=Nn(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),Hh.has(o)||(Hh.add(o),e={rel:e,crossOrigin:n,href:t},r.querySelector(o)===null&&(t=r.createElement("link"),Pt(t,"link",e),Ue(t),r.head.appendChild(t)))}}function Yg(e){wa.D(e),$h("dns-prefetch",e,null)}function Kg(e,t){wa.C(e,t),$h("preconnect",e,t)}function Ig(e,t,n){wa.L(e,t,n);var r=Pr;if(r&&e&&t){var o='link[rel="preload"][as="'+Nn(t)+'"]';t==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+Nn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+Nn(n.imageSizes)+'"]')):o+='[href="'+Nn(e)+'"]';var u=o;switch(t){case"style":u=ei(e);break;case"script":u=ti(e)}$n.has(u)||(e=O({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),$n.set(u,e),r.querySelector(o)!==null||t==="style"&&r.querySelector(Zi(u))||t==="script"&&r.querySelector(Fi(u))||(t=r.createElement("link"),Pt(t,"link",e),Ue(t),r.head.appendChild(t)))}}function Xg(e,t){wa.m(e,t);var n=Pr;if(n&&e){var r=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+Nn(r)+'"][href="'+Nn(e)+'"]',u=o;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=ti(e)}if(!$n.has(u)&&(e=O({rel:"modulepreload",href:e},t),$n.set(u,e),n.querySelector(o)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Fi(u)))return}r=n.createElement("link"),Pt(r,"link",e),Ue(r),n.head.appendChild(r)}}}function Qg(e,t,n){wa.S(e,t,n);var r=Pr;if(r&&e){var o=Fe(r).hoistableStyles,u=ei(e);t=t||"default";var d=o.get(u);if(!d){var g={loading:0,preload:null};if(d=r.querySelector(Zi(u)))g.loading=5;else{e=O({rel:"stylesheet",href:e,"data-precedence":t},n),(n=$n.get(u))&&Mu(e,n);var b=d=r.createElement("link");Ue(b),Pt(b,"link",e),b._p=new Promise(function(R,$){b.onload=R,b.onerror=$}),b.addEventListener("load",function(){g.loading|=1}),b.addEventListener("error",function(){g.loading|=2}),g.loading|=4,hl(d,t,r)}d={type:"stylesheet",instance:d,count:1,state:g},o.set(u,d)}}}function Jg(e,t){wa.X(e,t);var n=Pr;if(n&&e){var r=Fe(n).hoistableScripts,o=ti(e),u=r.get(o);u||(u=n.querySelector(Fi(o)),u||(e=O({src:e,async:!0},t),(t=$n.get(o))&&Bu(e,t),u=n.createElement("script"),Ue(u),Pt(u,"link",e),n.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},r.set(o,u))}}function Wg(e,t){wa.M(e,t);var n=Pr;if(n&&e){var r=Fe(n).hoistableScripts,o=ti(e),u=r.get(o);u||(u=n.querySelector(Fi(o)),u||(e=O({src:e,async:!0,type:"module"},t),(t=$n.get(o))&&Bu(e,t),u=n.createElement("script"),Ue(u),Pt(u,"link",e),n.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},r.set(o,u))}}function Gh(e,t,n,r){var o=(o=we.current)?dl(o):null;if(!o)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=ei(n.href),n=Fe(o).hoistableStyles,r=n.get(t),r||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=ei(n.href);var u=Fe(o).hoistableStyles,d=u.get(e);if(d||(o=o.ownerDocument||o,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=o.querySelector(Zi(e)))&&!u._p&&(d.instance=u,d.state.loading=5),$n.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},$n.set(e,n),u||Zg(o,e,n,d.state))),t&&r===null)throw Error(l(528,""));return d}if(t&&r!==null)throw Error(l(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ti(n),n=Fe(o).hoistableScripts,r=n.get(t),r||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function ei(e){return'href="'+Nn(e)+'"'}function Zi(e){return'link[rel="stylesheet"]['+e+"]"}function Vh(e){return O({},e,{"data-precedence":e.precedence,precedence:null})}function Zg(e,t,n,r){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?r.loading=1:(t=e.createElement("link"),r.preload=t,t.addEventListener("load",function(){return r.loading|=1}),t.addEventListener("error",function(){return r.loading|=2}),Pt(t,"link",n),Ue(t),e.head.appendChild(t))}function ti(e){return'[src="'+Nn(e)+'"]'}function Fi(e){return"script[async]"+e}function Yh(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+Nn(n.href)+'"]');if(r)return t.instance=r,Ue(r),r;var o=O({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),Ue(r),Pt(r,"style",o),hl(r,n.precedence,e),t.instance=r;case"stylesheet":o=ei(n.href);var u=e.querySelector(Zi(o));if(u)return t.state.loading|=4,t.instance=u,Ue(u),u;r=Vh(n),(o=$n.get(o))&&Mu(r,o),u=(e.ownerDocument||e).createElement("link"),Ue(u);var d=u;return d._p=new Promise(function(g,b){d.onload=g,d.onerror=b}),Pt(u,"link",r),t.state.loading|=4,hl(u,n.precedence,e),t.instance=u;case"script":return u=ti(n.src),(o=e.querySelector(Fi(u)))?(t.instance=o,Ue(o),o):(r=n,(o=$n.get(u))&&(r=O({},n),Bu(r,o)),e=e.ownerDocument||e,o=e.createElement("script"),Ue(o),Pt(o,"link",r),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(l(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(r=t.instance,t.state.loading|=4,hl(r,n.precedence,e));return t.instance}function hl(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=r.length?r[r.length-1]:null,u=o,d=0;d<r.length;d++){var g=r[d];if(g.dataset.precedence===t)u=g;else if(u!==o)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Mu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Bu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var ml=null;function Kh(e,t,n){if(ml===null){var r=new Map,o=ml=new Map;o.set(n,r)}else o=ml,r=o.get(n),r||(r=new Map,o.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var u=n[o];if(!(u[q]||u[At]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var d=u.getAttribute(t)||"";d=e+d;var g=r.get(d);g?g.push(u):r.set(d,[u])}}return r}function Ih(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Fg(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Xh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Pg(e,t,n,r){if(n.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var o=ei(r.href),u=t.querySelector(Zi(o));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=yl.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=u,Ue(u);return}u=t.ownerDocument||t,r=Vh(r),(o=$n.get(o))&&Mu(r,o),u=u.createElement("link"),Ue(u);var d=u;d._p=new Promise(function(g,b){d.onload=g,d.onerror=b}),Pt(u,"link",r),n.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(e.count++,n=yl.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Lu=0;function ep(e,t){return e.stylesheets&&e.count===0&&pl(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&pl(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&Lu===0&&(Lu=62500*Ug());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&pl(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>Lu?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(o)}}:null}function yl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)pl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var gl=null;function pl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,gl=new Map,t.forEach(tp,e),gl=null,yl.call(e))}function tp(e,t){if(!(t.state.loading&4)){var n=gl.get(e);if(n)var r=n.get(null);else{n=new Map,gl.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<o.length;u++){var d=o[u];(d.nodeName==="LINK"||d.getAttribute("media")!=="not all")&&(n.set(d.dataset.precedence,d),r=d)}r&&n.set(null,r)}o=t.instance,d=o.getAttribute("data-precedence"),u=n.get(d)||r,u===r&&n.set(null,o),n.set(d,o),this.count++,r=yl.bind(this),o.addEventListener("load",r),o.addEventListener("error",r),u?u.parentNode.insertBefore(o,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var Pi={$$typeof:X,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function np(e,t,n,r,o,u,d,g,b){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=rn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rn(0),this.hiddenUpdates=rn(null),this.identifierPrefix=r,this.onUncaughtError=o,this.onCaughtError=u,this.onRecoverableError=d,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function Qh(e,t,n,r,o,u,d,g,b,R,$,K){return e=new np(e,t,n,d,b,R,$,K,g),t=1,u===!0&&(t|=24),u=_n(3,null,null,t),e.current=u,u.stateNode=e,t=po(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:r,isDehydrated:n,cache:t},wo(u),e}function Jh(e){return e?(e=Dr,e):Dr}function Wh(e,t,n,r,o,u){o=Jh(o),r.context===null?r.context=o:r.pendingContext=o,r=Na(t),r.payload={element:n},u=u===void 0?null:u,u!==null&&(r.callback=u),n=Ua(e,r,t),n!==null&&(yn(n,e,t),Ri(n,e,t))}function Zh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function qu(e,t){Zh(e,t),(e=e.alternate)&&Zh(e,t)}function Fh(e){if(e.tag===13||e.tag===31){var t=ar(e,67108864);t!==null&&yn(t,e,67108864),qu(e,67108864)}}function Ph(e){if(e.tag===13||e.tag===31){var t=Tn();t=Rn(t);var n=ar(e,t);n!==null&&yn(n,e,t),qu(e,t)}}var vl=!0;function ap(e,t,n,r){var o=A.T;A.T=null;var u=Y.p;try{Y.p=2,Hu(e,t,n,r)}finally{Y.p=u,A.T=o}}function rp(e,t,n,r){var o=A.T;A.T=null;var u=Y.p;try{Y.p=8,Hu(e,t,n,r)}finally{Y.p=u,A.T=o}}function Hu(e,t,n,r){if(vl){var o=$u(r);if(o===null)Au(e,t,r,bl,n),tm(e,r);else if(sp(o,e,t,n,r))r.stopPropagation();else if(tm(e,r),t&4&&-1<ip.indexOf(e)){for(;o!==null;){var u=qe(o);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var d=St(u.pendingLanes);if(d!==0){var g=u;for(g.pendingLanes|=2,g.entangledLanes|=2;d;){var b=1<<31-se(d);g.entanglements[1]|=b,d&=~b}ta(u),(at&6)===0&&(tl=_t()+500,Xi(0))}}break;case 31:case 13:g=ar(u,2),g!==null&&yn(g,u,2),al(),qu(u,2)}if(u=$u(r),u===null&&Au(e,t,r,bl,n),u===o)break;o=u}o!==null&&r.stopPropagation()}else Au(e,t,r,null,n)}}function $u(e){return e=Gl(e),Gu(e)}var bl=null;function Gu(e){if(bl=null,e=ue(e),e!==null){var t=f(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=h(t),e!==null)return e;e=null}else if(n===31){if(e=p(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return bl=e,null}function em(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(na()){case Wn:return 2;case z:return 8;case P:case de:return 32;case w:return 268435456;default:return 32}default:return 32}}var Vu=!1,Ka=null,Ia=null,Xa=null,es=new Map,ts=new Map,Qa=[],ip="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function tm(e,t){switch(e){case"focusin":case"focusout":Ka=null;break;case"dragenter":case"dragleave":Ia=null;break;case"mouseover":case"mouseout":Xa=null;break;case"pointerover":case"pointerout":es.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ts.delete(t.pointerId)}}function ns(e,t,n,r,o,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:u,targetContainers:[o]},t!==null&&(t=qe(t),t!==null&&Fh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function sp(e,t,n,r,o){switch(t){case"focusin":return Ka=ns(Ka,e,t,n,r,o),!0;case"dragenter":return Ia=ns(Ia,e,t,n,r,o),!0;case"mouseover":return Xa=ns(Xa,e,t,n,r,o),!0;case"pointerover":var u=o.pointerId;return es.set(u,ns(es.get(u)||null,e,t,n,r,o)),!0;case"gotpointercapture":return u=o.pointerId,ts.set(u,ns(ts.get(u)||null,e,t,n,r,o)),!0}return!1}function nm(e){var t=ue(e.target);if(t!==null){var n=f(t);if(n!==null){if(t=n.tag,t===13){if(t=h(n),t!==null){e.blockedOn=t,Ea(e.priority,function(){Ph(n)});return}}else if(t===31){if(t=p(n),t!==null){e.blockedOn=t,Ea(e.priority,function(){Ph(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _l(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=$u(e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);$l=r,n.target.dispatchEvent(r),$l=null}else return t=qe(n),t!==null&&Fh(t),e.blockedOn=n,!1;t.shift()}return!0}function am(e,t,n){_l(e)&&n.delete(t)}function lp(){Vu=!1,Ka!==null&&_l(Ka)&&(Ka=null),Ia!==null&&_l(Ia)&&(Ia=null),Xa!==null&&_l(Xa)&&(Xa=null),es.forEach(am),ts.forEach(am)}function wl(e,t){e.blockedOn===t&&(e.blockedOn=null,Vu||(Vu=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,lp)))}var Sl=null;function rm(e){Sl!==e&&(Sl=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Sl===e&&(Sl=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],o=e[t+2];if(typeof r!="function"){if(Gu(r||n)===null)continue;break}var u=qe(n);u!==null&&(e.splice(t,3),t-=3,$o(u,{pending:!0,data:o,method:n.method,action:r},r,o))}}))}function ni(e){function t(b){return wl(b,e)}Ka!==null&&wl(Ka,e),Ia!==null&&wl(Ia,e),Xa!==null&&wl(Xa,e),es.forEach(t),ts.forEach(t);for(var n=0;n<Qa.length;n++){var r=Qa[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Qa.length&&(n=Qa[0],n.blockedOn===null);)nm(n),n.blockedOn===null&&Qa.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var o=n[r],u=n[r+1],d=o[zt]||null;if(typeof u=="function")d||rm(n);else if(d){var g=null;if(u&&u.hasAttribute("formAction")){if(o=u,d=u[zt]||null)g=d.formAction;else if(Gu(o)!==null)continue}else g=d.action;typeof g=="function"?n[r+1]=g:(n.splice(r,3),r-=3),rm(n)}}}function im(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(d){return o=d})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function Yu(e){this._internalRoot=e}xl.prototype.render=Yu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(l(409));var n=t.current,r=Tn();Wh(n,r,e,t,null,null)},xl.prototype.unmount=Yu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wh(e.current,2,null,e,null,null),al(),t[Ta]=null}};function xl(e){this._internalRoot=e}xl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Dn();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Qa.length&&t!==0&&t<Qa[n].priority;n++);Qa.splice(n,0,e),n===0&&nm(e)}};var sm=a.version;if(sm!=="19.2.0")throw Error(l(527,sm,"19.2.0"));Y.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=v(t),e=e!==null?x(e):null,e=e===null?null:e.stateNode,e};var op={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:A,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var El=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!El.isDisabled&&El.supportsFiber)try{G=El.inject(op),ne=El}catch{}}return rs.createRoot=function(e,t){if(!c(e))throw Error(l(299));var n=!1,r="",o=hd,u=md,d=yd;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=Qh(e,1,!1,null,null,n,r,null,o,u,d,im),e[Ta]=t.current,Tu(e),new Yu(t)},rs.hydrateRoot=function(e,t,n){if(!c(e))throw Error(l(299));var r=!1,o="",u=hd,d=md,g=yd,b=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(g=n.onRecoverableError),n.formState!==void 0&&(b=n.formState)),t=Qh(e,1,!0,t,n??null,r,o,b,u,d,g,im),t.context=Jh(null),n=t.current,r=Tn(),r=Rn(r),o=Na(r),o.callback=null,Ua(n,o,r),n=r,t.current.lanes=n,Ve(t,n),ta(t),e[Ta]=t.current,Tu(e),new xl(t)},rs.version="19.2.0",rs}var gm;function bp(){if(gm)return Xu.exports;gm=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(a){console.error(a)}}return s(),Xu.exports=vp(),Xu.exports}var _p=bp();const wp=$m(_p);function Sp({workouts:s,currentWorkoutId:a,setCurrentWorkoutId:i,currentWorkoutName:l,exercises:c,setExercises:f,finishWorkout:h,preferredUnit:p="lb"}){const y=p==="kg"?"kg":"lb",[v,x]=ae.useState(!1),[O,D]=ae.useState(!1),k="ironloop_activeWorkoutId",M="ironloop_activeWorkoutStarted",I=w=>{try{return localStorage.getItem(w)}catch{return null}},F=(w,L)=>{try{localStorage.setItem(w,L)}catch{}},Z=w=>{try{localStorage.removeItem(w)}catch{}},te=()=>{a&&(F(k,String(a)),F(M,"1"))},X=()=>{Z(k),Z(M)},le=()=>{const w=I(k),L=I(M);return!!(w&&String(w)===String(a)&&L==="1")},ke=()=>{const w=Array.isArray(c)?c:[];for(const L of w)if((Array.isArray(L?.setsCompleted)?L.setsCompleted:[]).some(Boolean))return!0;return!1},ye=w=>{try{if(!("vibrate"in navigator))return;const L=w==="set"?6:w==="start"?10:w==="finish"?16:8;navigator.vibrate(L)}catch{}},ce=w=>w/2.2046226218,Le=w=>w*2.2046226218,Ge=(w,L=1)=>typeof w!="number"||Number.isNaN(w)?"":w.toFixed(L).replace(/\.0+$|(\.\d*[1-9])0+$/g,"$1"),rt=w=>{if(w===""||w===null||w===void 0)return"";const L=typeof w=="number"?w:Number(w);return Number.isNaN(L)?"":Ge(y==="lb"?L:ce(L),2)},J=w=>{if(w==="")return"";const L=String(w).replace(",",".").trim();if(L==="."||L==="-"||L==="-.")return"";const C=Number(L);if(Number.isNaN(C))return"";const G=y==="kg"?Le(C):C;return Math.round(G*100)/100},[re,fe]=ae.useState({}),[Ee,De]=ae.useState(null),[A,Y]=ae.useState(""),[he,_e]=ae.useState(!1),[oe,_]=ae.useState(null),[H,ee]=ae.useState({}),[W,pe]=ae.useState(null),[we,je]=ae.useState("");ae.useEffect(()=>{x(!1),D(!1),pe(null),X()},[a]),ae.useEffect(()=>{if(!a)return;const w=le(),L=ke();if(w){x(!0);return}L&&x(!1)},[a,c]),ae.useEffect(()=>{fe(w=>{const L={...w},C=Array.isArray(c)?c:[];for(let G=0;G<C.length;G++)G!==Ee&&(L[G]=rt(C[G]?.weight));return Object.keys(L).forEach(G=>{const ne=Number(G);(!Number.isFinite(ne)||ne<0||ne>=C.length)&&delete L[G]}),L})},[y,a,c,Ee]),ae.useEffect(()=>{he||(typeof oe=="number"&&Number.isFinite(oe)?Y(rt(oe)):Y(""))},[y]),ae.useEffect(()=>{ee({}),pe(null)},[a]),ae.useEffect(()=>{const w=Array.isArray(c)?c:[];if(ee(L=>{const C={...L};return Object.keys(C).forEach(G=>{const ne=Number(G);(!Number.isFinite(ne)||ne<0||ne>=w.length)&&delete C[G]}),C}),W!==null){const L=Number(W);(!Number.isFinite(L)||L<0||L>=w.length)&&pe(null)}},[c,W]),ae.useEffect(()=>{je("")},[W]);const nt=w=>{const L=Number(w?.sets??0)||0,C=Array.isArray(w?.setsCompleted)?w.setsCompleted.length:0;return Math.max(L,C,0)},Te=w=>{const L=c?.[w];if(!L)return;const C=nt(L);ee(G=>{const ne=Array.isArray(G?.[w])?G[w]:null;if(ne&&ne.length===C)return G;const ge=Array.from({length:C},(se,Se)=>{const Re=ne?.[Se];return typeof Re=="number"&&Number.isFinite(Re)?Re:null});return{...G,[w]:ge}})},Gt=w=>{Te(w),pe(w)},ie=(w,L,C)=>{const G=String(C).replace(",",".").trim();if(G===""){ee(se=>{const Se=Array.isArray(se?.[w])?[...se[w]]:[];return L<0||L>=Se.length?se:(Se[L]=null,{...se,[w]:Se})});return}const ne=Number(G);if(!Number.isFinite(ne))return;const ge=Math.max(0,Math.round(ne));ee(se=>{const Se=Array.isArray(se?.[w])?[...se[w]]:[];return L<0||L>=Se.length?se:(Se[L]=ge,{...se,[w]:Se})})},bt=(w,L)=>{const C=c?.[w];if(!C)return;Te(w);const G=String(L).replace(",",".").trim();if(!G)return;const ne=Number(G);if(!Number.isFinite(ne))return;const ge=Math.max(0,Math.round(ne));ee(se=>{const Se=Array.isArray(se?.[w])?[...se[w]]:[];if(Se.length===0)return se;const Re=Array.isArray(C?.setsCompleted)?C.setsCompleted:[];let $e=-1;for(let Me=Re.length-1;Me>=0;Me--)if(Re[Me]){$e=Me;break}const We=$e!==-1?$e:Se.length-1;return Se[We]=ge,{...se,[w]:Se}})},yt=w=>{const L=c?.[w];if(!L)return;const C=Array.isArray(L.setsCompleted)?[...L.setsCompleted]:[];if(C.length===0)return;let G=-1;for(let ge=C.length-1;ge>=0;ge--)if(C[ge]){G=ge;break}if(G===-1)return;C[G]=!1;const ne=[...c];ne[w]={...L,setsCompleted:C},f(ne),ee(ge=>{const se=Array.isArray(ge?.[w])?[...ge[w]]:null;return!se||G<0||G>=se.length?ge:(se[G]=null,{...ge,[w]:se})}),te(),ye("set")},Vt=w=>{const L=re[w]??"",C=J(L),G=[...c];G[w]&&(G[w].weight=C,f(G),fe(ne=>({...ne,[w]:rt(C)})))},Gn=()=>{const L=J(A??"");if(L===""||L===null||L===void 0){_(null),Y("");return}const C=typeof L=="number"?L:Number(L);if(!Number.isFinite(C)){_(null),Y("");return}_(C),Y(rt(C))},ot=w=>{const L=[...c],C=L[w].setsCompleted||[],G=C.indexOf(!1);if(G!==-1)C[G]=!0,te(),ye("set");else for(let ne=0;ne<C.length;ne++)C[ne]=!1;L[w].setsCompleted=C,f(L)},gn=w=>{const L=[...c],C=L[w];if(!C)return;const G=Array.isArray(C.setsCompleted)?[...C.setsCompleted]:[];G.push(!1),C.setsCompleted=G,L[w]=C,f(L),ee(ne=>{const ge=Array.isArray(ne?.[w])?[...ne[w]]:null;if(!ge||ge.length>=G.length)return ne;for(;ge.length<G.length;)ge.push(null);return{...ne,[w]:ge}})},nn=(w,L,C)=>{const G=[...c];{G[w][L]=C===""?"":Number(C),f(G);return}},Jn=typeof l=="string"&&l.trim()?l:"Workout",jn=Array.isArray(s)?s:[],Ut={color:"#aaa",fontSize:"0.9rem"},Rt=W!=null?c?.[W]:null,Yt=()=>pe(null),_t=()=>(Array.isArray(c)?c:[]).map((L,C)=>{const G=nt(L),ne=H?.[C];if(!Array.isArray(ne)||ne.length===0)return{...L};const ge=Array.from({length:G},(Se,Re)=>{const $e=ne[Re];return typeof $e=="number"&&Number.isFinite($e)?$e:null});return ge.some(Se=>Se!==null)?{...L,repsBySet:ge}:{...L}}),na=()=>{const w=_t();ye("finish"),h(w,oe),ee({}),pe(null),Y(""),_(null),_e(!1),D(!1),x(!1),X()},Wn=({size:w=18})=>m.jsxs("svg",{width:w,height:w,viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",style:{display:"block"},children:[m.jsx("circle",{cx:"12",cy:"5",r:"2",fill:"currentColor"}),m.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor"}),m.jsx("circle",{cx:"12",cy:"19",r:"2",fill:"currentColor"})]}),P=!v&&ke()?"Resume Workout":"Start Workout",de=(()=>{if(W==null)return!1;const w=c?.[W];return(Array.isArray(w?.setsCompleted)?w.setsCompleted:[]).some(Boolean)})();return m.jsxs("div",{style:{width:"100%",backgroundColor:"#121212",color:"#fff",boxSizing:"border-box",overflowX:"hidden"},children:[m.jsxs("div",{style:{width:"100%",padding:"0 1rem",boxSizing:"border-box"},children:[m.jsxs("div",{style:{marginTop:"1rem",width:"100%",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"12px",padding:"0.75rem",boxSizing:"border-box",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[m.jsx("div",{style:Ut,children:"Current workout selected:"}),m.jsxs("div",{style:{position:"relative",width:"100%"},children:[m.jsx("select",{value:a,onChange:w=>{i(w.target.value),x(!1),D(!1)},style:{width:"100%",backgroundColor:"#121212",color:"#fff",border:"1px solid #333",borderRadius:"10px",padding:"0.75rem",paddingRight:"2.5rem",fontSize:"1rem",boxSizing:"border-box",outline:"none",appearance:"none",WebkitAppearance:"none",MozAppearance:"none",cursor:"pointer"},children:jn.map((w,L)=>{const C=typeof w?.name=="string"&&w.name.trim()?w.name:`Workout ${L+1}`;return m.jsx("option",{value:w.id,children:C},w.id)})}),m.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18","aria-hidden":"true",focusable:"false",style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",pointerEvents:"none",opacity:.65},children:m.jsx("path",{d:"M7 10l5 5 5-5",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{color:"#aaa"}})})]})]}),v?m.jsxs(m.Fragment,{children:[m.jsx("h2",{style:{marginTop:"1rem",marginBottom:"0",textAlign:"center"},children:Jn}),m.jsx("div",{style:{...Ut,textAlign:"center",marginTop:"0.25rem"},children:"Tap anywhere in field to complete a set"}),m.jsxs("div",{style:{...Ut,textAlign:"center",marginTop:"0.25rem",display:"flex",justifyContent:"center",alignItems:"center",gap:"0.35rem",flexWrap:"wrap"},children:[m.jsx("span",{children:"Tap the"}),m.jsx("span",{"aria-hidden":"true",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"22px",height:"22px",border:"1px solid #444",borderRadius:"6px",color:"#ddd",lineHeight:1},children:m.jsx(Wn,{size:14})}),m.jsx("span",{children:"to edit reps per individual set"})]}),m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",width:"100%",marginTop:"1rem"},children:c.map((w,L)=>m.jsxs("div",{onClick:()=>ot(L),style:{width:"100%",padding:"0.75rem",borderRadius:"8px",cursor:"pointer",display:"flex",flexDirection:"column",gap:"0.5rem",backgroundColor:"#1a1a1a",boxSizing:"border-box"},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"0.5rem"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",minWidth:0,flex:"1 1 auto"},children:[m.jsx("div",{style:{fontWeight:"bold",fontSize:"1.1rem",color:"#fff",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:w.name}),m.jsx("button",{type:"button",onClick:C=>{C.stopPropagation(),Gt(L)},"aria-label":"Exercise details",title:"Exercise details",style:{display:"inline-flex",alignItems:"center",justifyContent:"center",backgroundColor:"transparent",border:"1px solid #444",color:"#ddd",borderRadius:"6px",width:"28px",height:"28px",cursor:"pointer",padding:0,flex:"0 0 auto",lineHeight:1},children:m.jsx(Wn,{size:16})})]}),m.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},onClick:C=>C.stopPropagation(),children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[m.jsx("input",{type:"text",inputMode:"decimal",value:re[L]??rt(w.weight),onFocus:()=>De(L),onChange:C=>fe(G=>({...G,[L]:C.target.value})),onBlur:()=>{De(null),Vt(L)},onKeyDown:C=>{C.key==="Enter"&&C.currentTarget.blur()},style:{width:"62px",borderRadius:"4px",border:"1px solid #555",backgroundColor:"#1a1a1a",color:"#fff",textAlign:"center",padding:"0.2rem"}}),m.jsx("span",{style:{fontSize:"0.9rem",color:"#aaa"},children:y})]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[m.jsx("input",{type:"text",inputMode:"numeric",value:w.reps,onChange:C=>nn(L,"reps",C.target.value),style:{width:"40px",borderRadius:"4px",border:"1px solid #555",backgroundColor:"#1a1a1a",color:"#fff",textAlign:"center",padding:"0.2rem"}}),m.jsx("span",{style:{fontSize:"0.9rem",color:"#aaa"},children:"reps"})]})]})]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.75rem",flexWrap:"wrap"},children:[m.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:Array.from({length:nt(w)},(C,G)=>m.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"50%",backgroundColor:w.setsCompleted?.[G]?"#8b5cf6":"#333",border:"1px solid #555"}},G))}),m.jsx("button",{type:"button",onClick:C=>{C.stopPropagation(),gn(L),te()},style:{backgroundColor:"#121212",border:"1px solid #333",color:"#fff",borderRadius:"8px",padding:"0.35rem 0.6rem",cursor:"pointer",fontSize:"0.9rem",whiteSpace:"nowrap"},children:"+ 1 set"})]})]},`${w.name}-${L}`))}),m.jsx("div",{style:{marginTop:"1.25rem",width:"100%",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"12px",padding:"0.6rem 0.75rem",boxSizing:"border-box"},children:m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[m.jsx("div",{style:{fontWeight:"bold"},children:"Body weight"}),m.jsx("div",{style:{...Ut,fontSize:"0.85rem"},children:"Optional"}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.4rem",marginLeft:"auto"},children:[m.jsx("input",{type:"text",inputMode:"decimal",placeholder:y==="kg"?"kg":"lb",value:A,onFocus:()=>{_e(!0),te()},onChange:w=>Y(w.target.value),onBlur:()=>{_e(!1),Gn()},onKeyDown:w=>{w.key==="Enter"&&w.currentTarget.blur()},style:{width:"100px",borderRadius:"8px",border:"1px solid #555",backgroundColor:"#121212",color:"#fff",textAlign:"center",padding:"0.35rem 0.5rem",fontSize:"0.95rem",outline:"none"}}),m.jsx("span",{style:{fontSize:"0.95rem",color:"#aaa"},children:y}),A?m.jsx("button",{type:"button",onClick:()=>{Y(""),_(null),te()},style:{backgroundColor:"#121212",border:"1px solid #333",color:"#fff",borderRadius:"8px",padding:"0.35rem 0.7rem",cursor:"pointer"},children:"Clear"}):null]})]})}),m.jsx("button",{onClick:()=>D(!0),style:{marginTop:"1.5rem",padding:"0.75rem 1.5rem",backgroundColor:"#8b5cf6",color:"#fff",fontWeight:"bold",borderRadius:"8px",border:"none",cursor:"pointer",width:"100%"},children:"Finish Workout"})]}):m.jsx("button",{onClick:()=>{ye("start"),te(),x(!0)},style:{marginTop:"1.5rem",padding:"0.75rem 1.5rem",backgroundColor:"#8b5cf6",color:"#fff",fontWeight:"bold",borderRadius:"8px",border:"none",cursor:"pointer",width:"100%"},children:P})]}),v&&O?m.jsx("div",{role:"dialog","aria-modal":"true",onClick:()=>D(!1),style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.6)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},children:m.jsxs("div",{onClick:w=>w.stopPropagation(),style:{width:"100%",maxWidth:"520px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"16px",padding:"1rem",boxSizing:"border-box"},children:[m.jsx("div",{style:{fontWeight:"bold",fontSize:"1.05rem"},children:"Finish workout?"}),m.jsx("div",{style:{marginTop:"0.6rem",color:"#aaa",lineHeight:1.5},children:"This will save your workout to history and reset the sets."}),m.jsxs("div",{style:{marginTop:"1rem",display:"flex",gap:"0.75rem"},children:[m.jsx("button",{type:"button",onClick:()=>D(!1),style:{flex:1,backgroundColor:"#121212",border:"1px solid #333",color:"#fff",borderRadius:"10px",padding:"0.75rem",cursor:"pointer",fontWeight:"bold"},children:"Cancel"}),m.jsx("button",{type:"button",onClick:na,style:{flex:1,backgroundColor:"#8b5cf6",border:"none",color:"#fff",borderRadius:"10px",padding:"0.75rem",cursor:"pointer",fontWeight:"bold"},children:"Yes, finish"})]})]})}):null,v&&Rt?m.jsx("div",{role:"dialog","aria-modal":"true",onClick:Yt,style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.6)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem"},children:m.jsxs("div",{onClick:w=>w.stopPropagation(),style:{width:"100%",maxWidth:"700px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"16px",padding:"1rem",boxSizing:"border-box",maxHeight:"90dvh",overflowY:"auto"},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"0.75rem"},children:[m.jsx("div",{style:{fontWeight:"bold",fontSize:"1.05rem"},children:Rt?.name||"Exercise"}),m.jsx("button",{type:"button",onClick:Yt,style:{backgroundColor:"#121212",border:"1px solid #333",color:"#fff",borderRadius:"8px",padding:"0.4rem 0.75rem",cursor:"pointer"},children:"Done"})]}),m.jsx("div",{style:{marginTop:"0.75rem",color:"#aaa",lineHeight:1.5},children:"Optional: record reps for individual sets (useful for failure or AMRAP)."}),m.jsxs("div",{style:{marginTop:"0.9rem",backgroundColor:"#121212",border:"1px solid #333",borderRadius:"12px",padding:"0.75rem"},children:[m.jsx("div",{style:{fontWeight:"bold"},children:"Quick"}),m.jsxs("div",{style:{marginTop:"0.6rem",display:"flex",gap:"0.5rem",alignItems:"center",flexWrap:"wrap"},children:[m.jsx("div",{style:{color:"#aaa"},children:"Last completed set reps"}),m.jsx("input",{type:"text",inputMode:"numeric",placeholder:String(Rt?.reps??""),value:we,onChange:w=>je(w.target.value),onKeyDown:w=>{w.key==="Enter"&&(bt(W,we),je(""),w.currentTarget.blur())},style:{width:"72px",borderRadius:"8px",border:"1px solid #555",backgroundColor:"#1a1a1a",color:"#fff",textAlign:"center",padding:"0.4rem"}}),m.jsx("button",{type:"button",onClick:()=>{bt(W,we),je("")},style:{backgroundColor:"#8b5cf6",color:"#fff",border:"none",borderRadius:"8px",padding:"0.45rem 0.9rem",cursor:"pointer",fontWeight:"bold"},children:"Apply"})]}),m.jsx("div",{style:{marginTop:"0.5rem",color:"#aaa",fontSize:"0.9rem"},children:"Leave blank to keep the default reps."})]}),m.jsx("div",{style:{marginTop:"1rem",fontWeight:"bold"},children:"Sets"}),m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",marginTop:"0.6rem"},children:Array.from({length:nt(Rt)},(w,L)=>{const C=W,G=Array.isArray(Rt?.setsCompleted)?Rt.setsCompleted:[],ne=!!G?.[L],ge=G.findIndex(Me=>!Me),Se=ne||ge!==-1&&L===ge,Re=H?.[C],$e=Array.isArray(Re)?Re[L]:null,We=typeof $e=="number"&&Number.isFinite($e)?String($e):"";return m.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.75rem",padding:"0.6rem 0.75rem",backgroundColor:"#121212",border:"1px solid #333",borderRadius:"12px"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.6rem"},children:[m.jsx("div",{"aria-hidden":"true",style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:ne?"#8b5cf6":"#444"}}),m.jsxs("div",{style:{fontWeight:"bold"},children:["Set ",L+1]}),m.jsxs("div",{style:{color:"#aaa"},children:["default ",String(Rt?.reps??"")]})]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[m.jsx("input",{type:"text",inputMode:"numeric",value:We,placeholder:String(Rt?.reps??""),disabled:!Se,onChange:Me=>ie(C,L,Me.target.value),style:{width:"80px",borderRadius:"8px",border:"1px solid #555",backgroundColor:"#1a1a1a",color:"#fff",textAlign:"center",padding:"0.4rem",opacity:Se?1:.55,cursor:Se?"text":"default"}}),m.jsx("button",{type:"button",disabled:!Se,onClick:()=>ie(C,L,""),style:{backgroundColor:"#1a1a1a",border:"1px solid #333",color:"#fff",borderRadius:"8px",padding:"0.4rem 0.75rem",cursor:Se?"pointer":"default",opacity:Se?1:.55},children:"Clear"})]})]},L)})}),m.jsx("button",{type:"button",disabled:!de,onClick:()=>{W!=null&&yt(W)},style:{marginTop:"1rem",width:"100%",backgroundColor:"#121212",border:"1px solid #333",color:de?"#fff":"#666",borderRadius:"10px",padding:"0.75rem",cursor:de?"pointer":"not-allowed",fontWeight:"bold"},children:"Undo last completed set"})]})}):null]})}function xp({workouts:s,setWorkouts:a,selectedWorkoutId:i,setSelectedWorkoutId:l,preferredUnit:c="lb",setPreferredUnit:f}){const h=ae.useRef(null),p=c==="kg"?"kg":"lb",y=J=>J/2.2046226218,v=J=>J*2.2046226218,x=(J,re=1)=>typeof J!="number"||Number.isNaN(J)?"":J.toFixed(re).replace(/\.0+$|(\.\d*[1-9])0+$/g,"$1"),O=J=>{if(J===""||J===null||J===void 0)return"";const re=typeof J=="number"?J:Number(J);return Number.isNaN(re)?"":x(p==="lb"?re:y(re),2)},D=J=>{if(J==="")return"";const re=String(J).replace(",",".").trim(),fe=Number(re);if(Number.isNaN(fe))return"";const Ee=p==="kg"?v(fe):fe;return Math.round(Ee*100)/100},k=s||[],M=ae.useMemo(()=>i&&k.find(J=>J.id===i)||null,[k,i]),I=M?.exercises||[];ae.useEffect(()=>{i&&h.current&&h.current.scrollIntoView({behavior:"smooth",block:"start"})},[i]);const F=J=>{l(re=>re===J?null:J)},Z=(J,re)=>{const fe=k.map(Ee=>Ee.id===J?{...Ee,name:re}:Ee);a(fe)},te=J=>(Array.isArray(J)?J:[]).map(fe=>{const Ee=Number(fe?.sets??0)||0;return{name:typeof fe?.name=="string"?fe.name:"Exercise",reps:Number(fe?.reps??0)||0,sets:Ee,weight:fe?.weight===""?"":Number(fe?.weight??0)||0,setsCompleted:Array.from({length:Ee},()=>!1)}}),X=(J,re,fe)=>{if(!i)return;const Ee=k.find(_e=>_e.id===i);if(!Ee)return;const A=[...Array.isArray(Ee.exercises)?Ee.exercises:[]];if(!A[J])return;const Y={...A[J]};if(re==="weight"){if(Y.weight=D(fe),!Array.isArray(Y.setsCompleted)){const oe=Number(Y.sets)||5;Y.setsCompleted=Array.from({length:oe},()=>!1)}A[J]=Y;const _e=k.map(oe=>oe.id===i?{...oe,exercises:A}:oe);a(_e);return}if(re==="reps"||re==="sets"){let _e=Number(fe);if(re==="sets"&&(!Number.isFinite(_e)||_e<=0)&&(_e=5),re!=="sets"&&fe===""?Y[re]="":Y[re]=_e,re==="sets"){const oe=Array.isArray(Y.setsCompleted)?Y.setsCompleted:[];Y.setsCompleted=Array.from({length:_e},(_,H)=>!!oe[H])}if(!Array.isArray(Y.setsCompleted)){const oe=Number(Y.sets)||5;Y.setsCompleted=Array.from({length:oe},()=>!1)}}else Y[re]=fe;A[J]=Y;const he=k.map(_e=>_e.id===i?{..._e,exercises:A}:_e);a(he)},le=J=>{if(!i)return;const re=k.find(Y=>Y.id===i);if(!re||!window.confirm("Delete this exercise?"))return;const De=(Array.isArray(re.exercises)?re.exercises:[]).filter((Y,he)=>he!==J),A=k.map(Y=>Y.id===i?{...Y,exercises:De}:Y);a(A)},ke=()=>{if(!i)return;const J=k.find(A=>A.id===i);if(!J)return;const re={name:"New Exercise",reps:10,sets:5,weight:0,setsCompleted:Array.from({length:5},()=>!1)},Ee=[...Array.isArray(J.exercises)?J.exercises:[],re],De=k.map(A=>A.id===i?{...A,exercises:Ee}:A);a(De)},ye=()=>{const J=crypto.randomUUID(),re={name:"New Exercise",reps:10,sets:5,weight:0,setsCompleted:Array.from({length:5},()=>!1)},fe={id:J,name:"New Workout",exercises:[re]},Ee=[...k,fe];a(Ee),l(J)},ce=J=>{const re=k.findIndex(he=>he.id===J);if(re===-1)return;const fe=k[re],Ee=crypto.randomUUID(),De=typeof fe?.name=="string"&&fe.name.trim()?`${fe.name} (copy)`:"Workout (copy)",A={id:Ee,name:De,exercises:te(fe.exercises||[])},Y=[...k.slice(0,re+1),A,...k.slice(re+1)];a(Y),l(Ee)},Le=J=>{if(k.length<=1){window.alert("You must keep at least one workout.");return}const re=k.find(De=>De.id===J);if(!window.confirm(`Delete "${re?.name||"Workout"}"? This does not delete your workout history.`))return;const Ee=k.filter(De=>De.id!==J);a(Ee),i===J&&l(null)},Ge=(J,re)=>{const fe=k.findIndex(Y=>Y.id===J);if(fe===-1)return;const Ee=re==="up"?fe-1:fe+1;if(Ee<0||Ee>=k.length)return;const De=[...k],A=De[fe];De[fe]=De[Ee],De[Ee]=A,a(De)},rt=J=>({backgroundColor:c===J?"#8b5cf6":"#121212",color:"#fff",border:"1px solid #333",borderRadius:"8px",padding:"0.45rem 0.9rem",cursor:"pointer",fontWeight:c===J?"bold":"normal"});return m.jsx("div",{style:{width:"100%",backgroundColor:"#121212",boxSizing:"border-box",overflowX:"hidden"},children:m.jsxs("div",{style:{width:"100%",padding:"0 1rem 2.5rem",boxSizing:"border-box"},children:[m.jsx("h2",{style:{textAlign:"center",marginBottom:"1rem"},children:"Customize Workouts"}),typeof f=="function"&&m.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"12px",padding:"1rem",marginBottom:"1rem"},children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"0.5rem"},children:"Units"}),m.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>f("lb"),style:rt("lb"),children:"lb"}),m.jsx("button",{onClick:()=>f("kg"),style:rt("kg"),children:"kg"})]})]}),m.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",marginBottom:"1rem"},children:[k.map((J,re)=>{const fe=i===J.id,Ee=re>0,De=re<k.length-1;return m.jsxs("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"8px",padding:"0.75rem",border:fe?"1px solid #8b5cf6":"1px solid #333"},children:[m.jsx("div",{style:{marginBottom:"0.6rem"},children:m.jsx("input",{type:"text",value:typeof J.name=="string"?J.name:"",onChange:A=>Z(J.id,A.target.value),placeholder:"Workout",style:{width:"100%",backgroundColor:"#121212",border:"1px solid #333",color:"#fff",borderRadius:"6px",padding:"0.5rem",boxSizing:"border-box",fontSize:"1rem",fontWeight:"500"}})}),m.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>F(J.id),style:{backgroundColor:fe?"#8b5cf6":"#121212",color:"#fff",borderRadius:"8px",padding:"0.4rem 0.75rem",border:"1px solid #333",cursor:"pointer"},children:fe?"Close":"Edit"}),m.jsx("button",{onClick:()=>Ge(J.id,"up"),disabled:!Ee,style:{backgroundColor:"#121212",color:Ee?"#fff":"#666",borderRadius:"8px",padding:"0.4rem 0.65rem",border:"1px solid #333",cursor:Ee?"pointer":"not-allowed"},title:"Move up",children:""}),m.jsx("button",{onClick:()=>Ge(J.id,"down"),disabled:!De,style:{backgroundColor:"#121212",color:De?"#fff":"#666",borderRadius:"8px",padding:"0.4rem 0.65rem",border:"1px solid #333",cursor:De?"pointer":"not-allowed"},title:"Move down",children:""}),m.jsx("button",{onClick:()=>ce(J.id),style:{backgroundColor:"#121212",border:"1px solid #333",color:"#fff",borderRadius:"8px",padding:"0.4rem 0.75rem",cursor:"pointer"},children:"Duplicate"}),m.jsx("button",{onClick:()=>Le(J.id),style:{backgroundColor:"transparent",border:"1px solid #333",color:"#ff5555",borderRadius:"8px",padding:"0.4rem 0.75rem",cursor:"pointer"},children:"Delete"})]})]},J.id)}),m.jsx("button",{onClick:ye,style:{width:"100%",padding:"0.6rem",backgroundColor:"#1a1a1a",color:"#fff",border:"1px solid #333",borderRadius:"8px",cursor:"pointer"},children:"+ Add Workout"})]}),M?m.jsxs(m.Fragment,{children:[m.jsx("div",{ref:h}),m.jsxs("div",{style:{textAlign:"center",color:"#aaa",margin:"1.25rem 0 0.5rem",fontSize:"0.95rem"},children:["Currently editing:"," ",m.jsx("strong",{style:{color:"#fff"},children:M.name||"Workout"})]}),m.jsx("h2",{style:{textAlign:"center"},children:M.name||"Workout"}),I.map((J,re)=>m.jsxs("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between",gap:"0.5rem",backgroundColor:"#1a1a1a",padding:"0.5rem 0.75rem",borderRadius:"8px",marginTop:"0.5rem",position:"relative"},children:[m.jsx("span",{onClick:()=>le(re),style:{position:"absolute",top:"6px",right:"8px",color:"#ff5555",fontWeight:"bold",cursor:"pointer",fontSize:"1.5rem"},children:""}),m.jsx("input",{type:"text",value:J.name,onChange:fe=>X(re,"name",fe.target.value),style:{width:"calc(100% - 2rem)",backgroundColor:"#121212",border:"1px solid #333",color:"#fff",borderRadius:"6px",padding:"0.4rem",paddingRight:"1.75rem"}}),m.jsxs("div",{style:{display:"flex",gap:"0.3rem",alignItems:"center"},children:[m.jsx("input",{type:"number",value:J.reps,onChange:fe=>X(re,"reps",fe.target.value),style:{width:"50px",backgroundColor:"#121212",border:"1px solid #333",color:"#fff",borderRadius:"6px",padding:"0.4rem",textAlign:"center"}}),m.jsx("span",{style:{color:"#aaa",fontSize:"0.9rem"},children:"reps"})]}),m.jsxs("div",{style:{display:"flex",gap:"0.3rem",alignItems:"center"},children:[m.jsx("input",{type:"number",value:J.sets,onChange:fe=>X(re,"sets",fe.target.value),style:{width:"50px",backgroundColor:"#121212",border:"1px solid #333",color:"#fff",borderRadius:"6px",padding:"0.4rem",textAlign:"center"}}),m.jsx("span",{style:{color:"#aaa",fontSize:"0.9rem"},children:"sets"})]}),m.jsxs("div",{style:{display:"flex",gap:"0.3rem",alignItems:"center"},children:[m.jsx("input",{type:"text",inputMode:"decimal",value:O(J.weight===""||J.weight===0?"":J.weight),onChange:fe=>X(re,"weight",fe.target.value),placeholder:"0",style:{width:"70px",backgroundColor:"#121212",border:"1px solid #333",color:"#fff",borderRadius:"6px",padding:"0.4rem",textAlign:"center"}}),m.jsx("span",{style:{color:"#aaa",fontSize:"0.9rem"},children:p})]})]},re)),m.jsx("button",{onClick:ke,style:{marginTop:"0.75rem",width:"100%",padding:"0.6rem",backgroundColor:"#1a1a1a",color:"#fff",border:"1px solid #333",borderRadius:"8px",cursor:"pointer"},children:"+ Add Exercise"})]}):null]})})}function Ep({history:s,deleteWorkout:a,updateWorkoutNotes:i,preferredUnit:l="lb"}){const[c,f]=ae.useState(null),[h,p]=ae.useState("Logs"),y=l==="kg"?"kg":"lb",v=z=>z/2.2046226218,x=(z,P=1)=>typeof z!="number"||Number.isNaN(z)?"":z.toFixed(P).replace(/\.0+$|(\.\d*[1-9])0+$/g,"$1"),O=z=>{if(z===""||z===null||z===void 0)return"";const P=typeof z=="number"?z:Number(z);return Number.isFinite(P)?x(y==="lb"?P:v(P),2):""},D=(z,P)=>{i(z,P),f(z)};ae.useEffect(()=>{if(c!==null){const z=setTimeout(()=>f(null),1e3);return()=>clearTimeout(z)}},[s,c]);const k=z=>{const P=(z?.type||"").trim();return P?P==="A"||P==="B"?`Workout ${P}`:P:"Workout"},M=z=>{const P=Number(z?.sets??0)||0,de=Array.isArray(z?.setsCompleted)?z.setsCompleted.length:0,w=Array.isArray(z?.repsBySet)?z.repsBySet.length:0;return Math.max(P,de,w,0)},I=z=>{const P=M(z);if(P<=0)return"";const de=typeof z?.reps=="number"&&Number.isFinite(z.reps)?z.reps:null,w=Array.isArray(z?.repsBySet)?z.repsBySet:null;return Array.from({length:P},(C,G)=>{const ne=w?w[G]:void 0;return typeof ne=="number"&&Number.isFinite(ne)?String(ne):de!==null?String(de):"?"}).join("/")},F="__ALL_WORKOUTS__",Z="__ALL_EXERCISES__",[te,X]=ae.useState(""),[le,ke]=ae.useState(F),[ye,ce]=ae.useState(30),Le="newest",Ge="oldest",[rt,J]=ae.useState(Le),re=z=>[...z].sort((P,de)=>new Date(P.date).getTime()-new Date(de.date).getTime()),fe=z=>{const P=Date.now(),de=Math.max(1,Number(z||30));return P-de*24*60*60*1e3},Ee=(z,P)=>Number.isFinite(z)&&z>=P,De=ae.useMemo(()=>{const z=new Set,P=Array.isArray(s)?s:[];for(const de of P)z.add(k(de));return Array.from(z).sort((de,w)=>de.localeCompare(w))},[s]),A=ae.useMemo(()=>{const z=Array.isArray(s)?s:[];if(z.length===0)return[];const P=fe(ye),de=String(te||"").trim().toLowerCase(),w=G=>{if(!de)return!0;const ne=k(G).toLowerCase(),ge=String(G?.notes||"").toLowerCase(),Se=(Array.isArray(G?.exercises)?G.exercises:[]).map(Re=>String(Re?.name||"").toLowerCase()).filter(Boolean).join(" ");return ne.includes(de)||ge.includes(de)||Se.includes(de)},L=G=>le===F?!0:k(G)===le,C=[];for(const G of z){const ne=new Date(G?.date).getTime();Ee(ne,P)&&L(G)&&w(G)&&C.push(G)}return C.sort((G,ne)=>{const ge=new Date(G.date).getTime(),se=new Date(ne.date).getTime();return rt===Ge?ge-se:se-ge}),C},[s,te,le,ye,rt]);ae.useEffect(()=>{le!==F&&(De.includes(le)||ke(F))},[De,le]);const Y=()=>{X(""),ke(F),ce(30),J(Le)},he=String(te||"").trim()!==""||le!==F||Number(ye)!==30||rt!==Le,_e=ae.useRef(new Map),oe=ae.useRef(null),_=z=>{const P=z?.client_id;if(P)return String(P);const de=new Date(z?.date).getTime();return`${Number.isFinite(de)?de:"no_date"}-${k(z)}`},H=(z,P)=>{const de=_e.current;P?de.set(z,P):de.delete(z)},ee=z=>{z&&(z.style.height="0px",z.style.height=`${z.scrollHeight}px`)},W=z=>{oe.current&&cancelAnimationFrame(oe.current),oe.current=requestAnimationFrame(()=>{const P=_e.current.get(z);ee(P)})};ae.useEffect(()=>()=>{oe.current&&cancelAnimationFrame(oe.current)},[]);const pe=z=>({backgroundColor:z?"#8b5cf6":"#1a1a1a",color:"#fff",borderRadius:"8px",padding:"0.5rem 0.75rem",border:"none",cursor:"pointer",whiteSpace:"nowrap",fontSize:"0.95rem"}),we=z=>{if(z===""||z===null||z===void 0)return 0;const P=typeof z=="number"?z:Number(z);return Number.isFinite(P)?y==="lb"?P:v(P):0},je=(z,P)=>{const de=Array.isArray(z?.setsCompleted)?z.setsCompleted:[],w=Array.isArray(z?.repsBySet)?z.repsBySet:[],L=!!de[P],C=w[P];if(typeof C=="number"&&Number.isFinite(C))return C===0&&!L?0:Math.max(0,Math.round(C));if(L){const G=typeof z?.reps=="number"&&Number.isFinite(z.reps)?z.reps:0;return Math.max(0,Math.round(G))}return 0},nt=ae.useMemo(()=>{const z=new Set,P=Array.isArray(A)?A:[];for(const de of P){const w=Array.isArray(de?.exercises)?de.exercises:[];for(const L of w){const C=String(L?.name||"").trim();C&&z.add(C)}}return Array.from(z).sort((de,w)=>de.localeCompare(w))},[A]),[Te,Gt]=ae.useState(Z),[ie,bt]=ae.useState("volume"),[yt,Vt]=ae.useState(null);ae.useEffect(()=>{if(!Te){Gt(Z);return}Te!==Z&&nt.length>0&&!nt.includes(Te)&&Gt(Z)},[nt,Te]),ae.useEffect(()=>{Vt(null)},[Te,ye,ie,te,le,rt]);const Gn=[{value:"volume",label:"Volume"},{value:"top_weight",label:"Top weight"},{value:"est_1rm",label:"Estimated 1RM"},{value:"completed_sets",label:"Completed sets"},{value:"workouts_per_week",label:"Workouts per week"},{value:"days_between",label:"Days between workouts"},{value:"last_set_reps",label:"Last-set reps"},{value:"body_weight",label:"Body weight"}],ot=ae.useMemo(()=>Gn.find(P=>P.value===ie)||Gn[0],[ie]),gn=z=>z==="volume"||z==="top_weight"||z==="est_1rm"||z==="completed_sets"||z==="last_set_reps",nn=ae.useMemo(()=>ie==="volume"?"Based on completed sets, plus any per-set reps you entered (for failures).":ie==="top_weight"?"Shows the heaviest weight you performed in each workout.":ie==="est_1rm"?"Estimated 1RM (one rep maximum) uses Epley: weight  (1 + reps/30) on performed sets.":ie==="completed_sets"?"Counts completed sets (not partial failures unless you marked a set complete).":ie==="workouts_per_week"?"Counts workouts grouped by week.":ie==="days_between"?"Shows days since your previous workout.":ie==="last_set_reps"?"Shows the reps you logged for the last performed set each workout (useful for failures).":ie==="body_weight"?"Shows body weight entries you saved when finishing workouts.":"",[ie]),Jn=(z,P)=>(Array.isArray(z?.exercises)?z.exercises:[]).some(w=>String(w?.name||"").trim()===P),jn=ae.useMemo(()=>{const z=Array.isArray(A)?A:[],P=re(z),de=[];if(ie==="days_between"){let w=null;for(const L of P){const C=new Date(L?.date).getTime();if(Number.isFinite(C)){if(w!==null){const G=Math.round((C-w)/864e5);de.push({dateMs:C,dateLabel:new Date(C).toLocaleDateString(),value:Math.max(0,G),valueLabel:`${Math.max(0,G)} days`})}w=C}}return de}if(ie==="body_weight"){for(const w of P){const L=new Date(w?.date).getTime();if(!Number.isFinite(L))continue;const C=typeof w?.body_weight_lbs=="number"&&Number.isFinite(w.body_weight_lbs)?w.body_weight_lbs:null;if(C===null)continue;const G=we(C);de.push({dateMs:L,dateLabel:new Date(L).toLocaleDateString(),value:G,valueLabel:`${x(G,1)} ${y}`})}return de}if(gn(ie)){for(const w of P){const L=new Date(w?.date).getTime();if(!Number.isFinite(L))continue;const C=Array.isArray(w?.exercises)?w.exercises:[];if(C.length===0||Te!==Z&&!Jn(w,Te))continue;let G=0;if(ie==="volume"){let se=0;for(const Se of C){const Re=String(Se?.name||"").trim();if(!Re||Te!==Z&&Re!==Te)continue;const $e=we(Se?.weight),We=M(Se);for(let Me=0;Me<We;Me++){const wt=je(Se,Me);wt>0&&(se+=$e*wt)}}G=se}if(ie==="top_weight"){let se=0,Se=!1;for(const Re of C){const $e=String(Re?.name||"").trim();if(!$e||Te!==Z&&$e!==Te)continue;const We=M(Re);if(We<=0)continue;let Me=!1;for(let St=0;St<We;St++)if(je(Re,St)>0){Me=!0;break}if(!Me)continue;const wt=we(Re?.weight);wt>se&&(se=wt),Se=!0}if(!Se)continue;G=se}if(ie==="est_1rm"){let se=0,Se=!1;for(const Re of C){const $e=String(Re?.name||"").trim();if(!$e||Te!==Z&&$e!==Te)continue;const We=we(Re?.weight),Me=M(Re);for(let wt=0;wt<Me;wt++){const St=je(Re,wt);if(St<=0)continue;const Kt=We*(1+St/30);Kt>se&&(se=Kt),Se=!0}}if(!Se)continue;G=se}if(ie==="completed_sets"){let se=0;for(const Se of C){const Re=String(Se?.name||"").trim();if(!Re||Te!==Z&&Re!==Te)continue;const $e=Array.isArray(Se?.setsCompleted)?Se.setsCompleted:[];for(const We of $e)We&&(se+=1)}G=se}if(ie==="last_set_reps"){let se=null;for(const Se of C){const Re=String(Se?.name||"").trim();if(!Re||Te!==Z&&Re!==Te)continue;const $e=M(Se);for(let We=0;We<$e;We++){const Me=je(Se,We);Me>0&&(se=Me)}}if(se===null)continue;G=se}const ne=new Date(L).toLocaleDateString(),ge=ie==="volume"?`${x(G,0)} ${y}-reps`:ie==="top_weight"?`${x(G,1)} ${y}`:ie==="est_1rm"?`${x(G,1)} ${y}`:ie==="completed_sets"?`${x(G,0)} sets`:ie==="last_set_reps"?`${x(G,0)} reps`:`${x(G,0)}`;de.push({dateMs:L,dateLabel:ne,value:G,valueLabel:ge})}return de}return[]},[A,Te,l,ie]),Ut=ae.useMemo(()=>{if(ie!=="workouts_per_week")return[];const z=Array.isArray(A)?A:[],P=re(z),de=C=>{const G=new Date(C),ge=(G.getDay()+6)%7,se=new Date(G.getFullYear(),G.getMonth(),G.getDate());return se.setDate(se.getDate()-ge),se.setHours(0,0,0,0),se.getTime()},w=new Map;for(const C of P){const G=new Date(C?.date).getTime();if(!Number.isFinite(G)||(Array.isArray(C?.exercises)?C.exercises:[]).length===0)continue;const ge=de(G);w.set(ge,(w.get(ge)||0)+1)}return Array.from(w.keys()).sort((C,G)=>C-G).map(C=>{const G=C+5184e5;return{keyLabel:new Date(C).toLocaleDateString(),count:w.get(C)||0,startMs:C,endMs:G}})},[A,ie]);ae.useEffect(()=>{if(yt!==null){if(ie==="workouts_per_week"){(yt<0||yt>=Ut.length)&&Vt(null);return}(yt<0||yt>=jn.length)&&Vt(null)}},[yt,jn,Ut,ie]);const Rt=z=>{const P=z<=0?1:z;return[0,.25,.5,.75,1].map(w=>({value:P*w}))},Yt=(z,P,de)=>{if(!P||P.length===0)return m.jsx("div",{style:{color:"#aaa",textAlign:"center",marginTop:"1rem"},children:"No history in the selected range."});const w=640,L=220,C=54,G=14,ne=14,ge=34,se=Math.max(...P.map(Ve=>Ve.value),0),Se=se<=0?1:se,Re=w-C-G,$e=L-ne-ge,We=Ve=>P.length===1?C+Re/2:C+Re*Ve/(P.length-1),Me=Ve=>{const sn=Math.max(0,Math.min(Se,Ve))/Se;return ne+(1-sn)*$e},wt=P.map((Ve,xt)=>`${We(xt)},${Me(Ve.value)}`).join(" "),St=P[0]?.dateLabel||"",Kt=P[P.length-1]?.dateLabel||"",Tt=Rt(se).map(Ve=>({value:Ve.value,y:Me(Ve.value)})),ut=yt!=null?P[yt]:null,ct=(()=>{if(!ut)return null;const Ve=We(yt),xt=Me(ut.value),sn=ut.dateLabel,kn=ut.valueLabel||x(ut.value,0),Zn=190,Rn=44;let pn=Ve-Zn/2,Dn=xt-Rn-10;const Ea=C,on=C+Re-Zn;pn=Math.max(Ea,Math.min(on,pn));const At=ne,zt=ne+$e-Rn;return Dn<At&&(Dn=Math.min(zt,xt+10)),{x:pn,y:Dn,cx:Ve,cy:xt,text1:sn,text2:kn}})(),rn=18;return m.jsxs("div",{style:{marginTop:"0.75rem",backgroundColor:"#1a1a1a",borderRadius:"12px",border:"1px solid #333",padding:"1rem"},children:[m.jsx("div",{style:{fontWeight:"bold"},children:z}),m.jsxs("div",{style:{marginTop:"0.75rem"},children:[m.jsxs("svg",{viewBox:`0 0 ${w} ${L}`,width:"100%",height:"220",role:"img","aria-label":de,style:{display:"block",touchAction:"manipulation"},onClick:()=>Vt(null),children:[m.jsx("rect",{x:0,y:0,width:w,height:L,fill:"#000",opacity:"0.001"}),m.jsx("line",{x1:C,y1:ne,x2:C,y2:ne+$e,stroke:"#333",strokeWidth:"1"}),m.jsx("line",{x1:C,y1:ne+$e,x2:C+Re,y2:ne+$e,stroke:"#333",strokeWidth:"1"}),Tt.map((Ve,xt)=>m.jsxs("g",{children:[m.jsx("line",{x1:C,y1:Ve.y,x2:C+Re,y2:Ve.y,stroke:"#2a2a2a",strokeWidth:"1"}),m.jsx("text",{x:8,y:Ve.y+4,fill:"#888",fontSize:"12",children:x(Ve.value,ie==="top_weight"||ie==="est_1rm"?1:0)})]},xt)),m.jsx("polyline",{fill:"none",stroke:"#8b5cf6",strokeWidth:"2.5",points:wt}),P.map((Ve,xt)=>{const sn=yt===xt;return m.jsxs("g",{children:[m.jsx("circle",{cx:We(xt),cy:Me(Ve.value),r:rn,fill:"#000",opacity:"0.001",onClick:kn=>{kn.stopPropagation(),Vt(xt)},style:{cursor:"pointer"}}),m.jsx("circle",{cx:We(xt),cy:Me(Ve.value),r:sn?5:4,fill:"#8b5cf6"})]},`${Ve.dateMs}-${xt}`)}),ct?m.jsxs("g",{children:[m.jsx("line",{x1:ct.cx,y1:ct.cy,x2:ct.cx,y2:ct.y+44,stroke:"#333",strokeWidth:"1"}),m.jsx("rect",{x:ct.x,y:ct.y,width:190,height:44,rx:10,ry:10,fill:"#121212",stroke:"#333",strokeWidth:"1"}),m.jsx("text",{x:ct.x+10,y:ct.y+18,fill:"#fff",fontSize:"12",children:ct.text1}),m.jsx("text",{x:ct.x+10,y:ct.y+34,fill:"#aaa",fontSize:"12",children:ct.text2})]}):null,m.jsx("text",{x:C,y:L-10,fill:"#888",fontSize:"12",children:St}),m.jsx("text",{x:C+Re,y:L-10,fill:"#888",fontSize:"12",textAnchor:"end",children:Kt})]}),m.jsx("div",{style:{marginTop:"0.5rem",color:"#aaa",fontSize:"0.9rem"},children:ut?m.jsxs("span",{children:["Selected: ",ut.dateLabel,"  ",ut.valueLabel]}):m.jsx("span",{children:"Tap a point to see details."})})]})]})},_t=z=>{if(!z||z.length===0)return m.jsx("div",{style:{color:"#aaa",textAlign:"center",marginTop:"1rem"},children:"No history in the selected range."});const P=640,de=220,w=54,L=14,C=14,G=34,ne=P-w-L,ge=de-C-G,se=Math.max(...z.map(ut=>ut.count),0),Se=se<=0?1:se,Re=8,$e=Math.max(6,(ne-Re*(z.length-1))/z.length),We=ut=>{const rn=Math.max(0,Math.min(Se,ut))/Se;return C+(1-rn)*ge},Me=Rt(se).map(ut=>({value:ut.value,y:We(ut.value)})),wt=z[0]?.keyLabel||"",St=z[z.length-1]?.keyLabel||"",Kt=yt!=null?z[yt]:null,Tt=(()=>{if(!Kt)return null;const ct=w+yt*($e+Re),rn=We(Kt.count),Ve=ct+$e/2,xt=rn,sn=Kt.keyLabel,kn=`${Kt.count} workouts`,Zn=190,Rn=44;let pn=Ve-Zn/2,Dn=xt-Rn-10;const Ea=w,on=w+ne-Zn;pn=Math.max(Ea,Math.min(on,pn));const At=C,zt=C+ge-Rn;return Dn<At&&(Dn=Math.min(zt,xt+10)),{x:pn,y:Dn,cx:Ve,cy:xt,text1:sn,text2:kn}})();return m.jsxs("div",{style:{marginTop:"0.75rem",backgroundColor:"#1a1a1a",borderRadius:"12px",border:"1px solid #333",padding:"1rem"},children:[m.jsx("div",{style:{fontWeight:"bold"},children:"Workouts per week"}),m.jsxs("div",{style:{marginTop:"0.75rem"},children:[m.jsxs("svg",{viewBox:`0 0 ${P} ${de}`,width:"100%",height:"220",role:"img","aria-label":"Workouts per week chart",style:{display:"block",touchAction:"manipulation"},onClick:()=>Vt(null),children:[m.jsx("rect",{x:0,y:0,width:P,height:de,fill:"#000",opacity:"0.001"}),m.jsx("line",{x1:w,y1:C,x2:w,y2:C+ge,stroke:"#333",strokeWidth:"1"}),m.jsx("line",{x1:w,y1:C+ge,x2:w+ne,y2:C+ge,stroke:"#333",strokeWidth:"1"}),Me.map((ut,ct)=>m.jsxs("g",{children:[m.jsx("line",{x1:w,y1:ut.y,x2:w+ne,y2:ut.y,stroke:"#2a2a2a",strokeWidth:"1"}),m.jsx("text",{x:8,y:ut.y+4,fill:"#888",fontSize:"12",children:x(ut.value,0)})]},ct)),z.map((ut,ct)=>{const rn=w+ct*($e+Re),Ve=We(ut.count),xt=C+ge-Ve,sn=yt===ct;return m.jsxs("g",{children:[m.jsx("rect",{x:rn,y:Ve,width:$e,height:xt,rx:6,ry:6,fill:sn?"#9f7bff":"#8b5cf6",opacity:sn?1:.9}),m.jsx("rect",{x:rn-8,y:C,width:$e+16,height:ge,fill:"#000",opacity:"0.001",onClick:kn=>{kn.stopPropagation(),Vt(ct)},style:{cursor:"pointer"}})]},`${ut.startMs}-${ct}`)}),Tt?m.jsxs("g",{children:[m.jsx("line",{x1:Tt.cx,y1:Tt.cy,x2:Tt.cx,y2:Tt.y+44,stroke:"#333",strokeWidth:"1"}),m.jsx("rect",{x:Tt.x,y:Tt.y,width:190,height:44,rx:10,ry:10,fill:"#121212",stroke:"#333",strokeWidth:"1"}),m.jsx("text",{x:Tt.x+10,y:Tt.y+18,fill:"#fff",fontSize:"12",children:Tt.text1}),m.jsx("text",{x:Tt.x+10,y:Tt.y+34,fill:"#aaa",fontSize:"12",children:Tt.text2})]}):null,m.jsx("text",{x:w,y:de-10,fill:"#888",fontSize:"12",children:wt}),m.jsx("text",{x:w+ne,y:de-10,fill:"#888",fontSize:"12",textAnchor:"end",children:St})]}),m.jsx("div",{style:{marginTop:"0.5rem",color:"#aaa",fontSize:"0.9rem"},children:Kt?m.jsxs("span",{children:["Selected: ",Kt.keyLabel,"  ",Kt.count," workouts"]}):m.jsx("span",{children:"Tap a bar to see details."})})]})]})},na=()=>{const z=gn(ie),P=Te===Z?"All exercises":Te,de=z?ie==="volume"?`Volume (${P})`:ie==="top_weight"?`Top weight (${P})`:ie==="est_1rm"?`Estimated 1RM (${P})`:ie==="completed_sets"?`Completed sets (${P})`:ie==="last_set_reps"?`Last-set reps (${P})`:ot.label:ot.label;return m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"12px",padding:"1rem"},children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"0.5rem"},children:"Charts"}),m.jsx("div",{style:{color:"#aaa",fontSize:"0.9rem"},children:nn}),m.jsxs("div",{style:{marginTop:"0.75rem",display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[m.jsxs("div",{style:{flex:"1 1 240px",minWidth:240},children:[m.jsx("div",{style:{color:"#aaa",fontSize:"0.85rem",marginBottom:"0.35rem"},children:"Chart type"}),m.jsx("select",{value:ie,onChange:w=>bt(w.target.value),style:{width:"100%",padding:"0.55rem 0.6rem",borderRadius:"8px",border:"1px solid #333",backgroundColor:"#121212",color:"#fff",boxSizing:"border-box"},children:Gn.map(w=>m.jsx("option",{value:w.value,children:w.label},w.value))})]}),z?m.jsxs("div",{style:{flex:"1 1 240px",minWidth:240},children:[m.jsx("div",{style:{color:"#aaa",fontSize:"0.85rem",marginBottom:"0.35rem"},children:"Exercise"}),m.jsxs("select",{value:Te,onChange:w=>Gt(w.target.value),style:{width:"100%",padding:"0.55rem 0.6rem",borderRadius:"8px",border:"1px solid #333",backgroundColor:"#121212",color:"#fff",boxSizing:"border-box"},children:[m.jsx("option",{value:Z,children:"All exercises"}),nt.length===0?null:nt.map(w=>m.jsx("option",{value:w,children:w},w))]})]}):null]})]}),ie==="workouts_per_week"?_t(Ut):Yt(de,jn,`${de} chart`)]})},Wn=()=>A.length===0?m.jsx("p",{style:{color:"#aaa",textAlign:"center"},children:"No workouts match your filters."}):m.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",width:"100%"},children:A.map(z=>{const P=(Array.isArray(s)?s:[]).findIndex(C=>(C?.client_id||null)===(z?.client_id||null)),de=P!==-1?P:0,w=typeof z?.body_weight_lbs=="number"&&Number.isFinite(z.body_weight_lbs)?z.body_weight_lbs:null,L=_(z);return m.jsxs("div",{style:{position:"relative",backgroundColor:"#1a1a1a",borderRadius:"8px",padding:"1rem",textAlign:"left",boxSizing:"border-box",transition:"background-color 0.2s",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[m.jsx("button",{onClick:C=>{C.stopPropagation(),a(de)},style:{position:"absolute",top:"6px",right:"6px",background:"transparent",border:"none",color:"#ff5555",fontWeight:"bold",fontSize:"1.5rem",padding:"4px",cursor:"pointer",transition:"color 0.2s"},children:""}),m.jsx("h3",{style:{margin:"0 0 0.25rem 0"},children:k(z)}),m.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[m.jsx("div",{style:{margin:0,fontSize:"0.9rem",color:"#aaa"},children:new Date(z.date).toLocaleString()}),w!==null?m.jsxs("div",{style:{margin:0,fontSize:"0.9rem",color:"#aaa"},children:["Body weight: ",O(w)," ",y]}):null]}),(z.exercises||[]).map((C,G)=>{const ne=M(C),ge=Array.isArray(C?.setsCompleted)?C.setsCompleted.filter(Boolean).length:0,se=O(C.weight),Se=I(C);return m.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"0.25rem"},children:[m.jsx("span",{children:C.name}),m.jsxs("span",{style:{color:"#aaa",fontSize:"0.9rem",textAlign:"right"},children:[se," ",y,"  ",C.reps," reps | ",ge,"/",ne," sets"]})]}),m.jsxs("div",{style:{color:"#aaa",fontSize:"0.9rem"},children:["reps: ",Se]})]},G)}),m.jsx("textarea",{ref:C=>H(L,C),placeholder:"Add notes.",value:z.notes||"",onChange:C=>{D(de,C.target.value),W(L)},onFocus:()=>W(L),style:{width:"100%",padding:"0.5rem",borderRadius:"6px",border:"1px solid #333",backgroundColor:"#121212",color:"#fff",resize:"none",minHeight:"50px",overflow:"hidden",boxSizing:"border-box"}}),m.jsx("span",{style:{fontSize:"0.8rem",color:"#aaa",textAlign:"right"},children:c===de?"Editing...":"Saved"})]},L)})});return m.jsx("div",{style:{width:"100%",backgroundColor:"#121212",color:"#fff",boxSizing:"border-box",overflowX:"hidden"},children:m.jsxs("div",{style:{width:"100%",padding:"0 1rem",boxSizing:"border-box"},children:[m.jsx("h2",{style:{marginBottom:"0.75rem",textAlign:"center"},children:"Workout History"}),m.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"12px",padding:"1rem",marginBottom:"0.75rem"},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:"0.75rem"},children:[m.jsx("div",{style:{fontWeight:"bold"},children:"Filters"}),he?m.jsx("button",{type:"button",onClick:Y,style:{backgroundColor:"transparent",border:"1px solid #333",color:"#aaa",borderRadius:"10px",padding:"0.35rem 0.6rem",cursor:"pointer",fontSize:"0.9rem"},children:"Clear"}):null]}),m.jsxs("div",{style:{marginTop:"0.75rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[m.jsx("input",{value:te,onChange:z=>X(z.target.value),placeholder:"Search workouts, exercises, notes",style:{width:"100%",padding:"0.6rem",borderRadius:"10px",border:"1px solid #333",backgroundColor:"#121212",color:"#fff",boxSizing:"border-box",outline:"none"}}),m.jsxs("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[m.jsxs("div",{style:{flex:"1 1 220px",minWidth:220},children:[m.jsx("div",{style:{color:"#aaa",fontSize:"0.85rem",marginBottom:"0.35rem"},children:"Workout"}),m.jsxs("select",{value:le,onChange:z=>ke(z.target.value),style:{width:"100%",padding:"0.55rem 0.6rem",borderRadius:"10px",border:"1px solid #333",backgroundColor:"#121212",color:"#fff",boxSizing:"border-box"},children:[m.jsx("option",{value:F,children:"All workouts"}),De.map(z=>m.jsx("option",{value:z,children:z},z))]})]}),m.jsxs("div",{style:{flex:"0 0 170px"},children:[m.jsx("div",{style:{color:"#aaa",fontSize:"0.85rem",marginBottom:"0.35rem"},children:"Range"}),m.jsxs("select",{value:String(ye),onChange:z=>ce(Number(z.target.value)),style:{width:"100%",padding:"0.55rem 0.6rem",borderRadius:"10px",border:"1px solid #333",backgroundColor:"#121212",color:"#fff",boxSizing:"border-box"},children:[m.jsx("option",{value:"7",children:"7 days"}),m.jsx("option",{value:"14",children:"14 days"}),m.jsx("option",{value:"30",children:"30 days"}),m.jsx("option",{value:"90",children:"90 days"}),m.jsx("option",{value:"180",children:"180 days"}),m.jsx("option",{value:"365",children:"365 days"}),m.jsx("option",{value:"3650",children:"All time"})]})]}),m.jsxs("div",{style:{flex:"0 0 170px"},children:[m.jsx("div",{style:{color:"#aaa",fontSize:"0.85rem",marginBottom:"0.35rem"},children:"Sort"}),m.jsxs("select",{value:rt,onChange:z=>J(z.target.value),style:{width:"100%",padding:"0.55rem 0.6rem",borderRadius:"10px",border:"1px solid #333",backgroundColor:"#121212",color:"#fff",boxSizing:"border-box"},children:[m.jsx("option",{value:Le,children:"Newest first"}),m.jsx("option",{value:Ge,children:"Oldest first"})]})]})]}),m.jsxs("div",{style:{color:"#aaa",fontSize:"0.9rem"},children:["Showing ",A.length," of ",(Array.isArray(s)?s:[]).length]})]})]}),m.jsxs("div",{style:{width:"100%",display:"flex",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[m.jsx("button",{onClick:()=>p("Logs"),style:pe(h==="Logs"),children:"Logs"}),m.jsx("button",{onClick:()=>p("Charts"),style:pe(h==="Charts"),children:"Charts"})]}),h==="Logs"?Wn():na()]})})}function Tp({sessionEmailMasked:s,sessionEmailFull:a,isSignedIn:i,onSignOut:l,onRequestEmailChange:c,onVerifyEmailChangeCode:f,emailChangeBusy:h,emailChangeMessage:p,onRefreshAuthStatus:y,historyCount:v=0,onExportHistoryCsv:x,onDeleteAllHistory:O,onDeleteAccount:D,dangerBusy:k=!1,dangerMessage:M=""}){const[I,F]=ae.useState(!1),[Z,te]=ae.useState("request"),[X,le]=ae.useState(""),[ke,ye]=ae.useState(""),[ce,Le]=ae.useState(!1);ae.useEffect(()=>{i||(F(!1),te("request"),le(""),ye(""),Le(!1))},[i]),ae.useEffect(()=>{Le(!1)},[s,a]);const Ge={backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"12px",padding:"1rem"},rt={color:"#aaa"},J={backgroundColor:"#121212",border:"1px solid #333",color:"#fff",borderRadius:"8px",padding:"0.5rem 0.9rem",cursor:"pointer"},re={width:"100%",marginTop:"0.6rem",padding:"0.75rem 1rem",backgroundColor:"#8b5cf6",color:"#fff",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:"bold"},fe=ie=>({cursor:ie?"default":"pointer",opacity:ie?.7:1}),Ee=i&&typeof c=="function"&&typeof y=="function"&&typeof f=="function",De=i&&typeof l=="function",A=()=>{F(!1),te("request"),le(""),ye("")},Y=async()=>{const ie=String(X||"").trim();ie&&(await c(ie),te("verify"))},he=async()=>{const ie=String(X||"").trim(),bt=String(ke||"").trim();!ie||!bt||(await f(ie,bt),await y(),A())},_e=typeof x=="function"&&Number(v||0)>0,oe=typeof O=="function"&&Number(v||0)>0,_=i&&typeof D=="function",H=typeof s=="string"?s:"",ee=typeof a=="string"?a:"",W=ee.trim().length>0,pe=H.trim().length>0,we=!!(ce&&W),je=we?ee:pe?H:ee,nt=i&&W,Te=({size:ie=16})=>m.jsxs("svg",{width:ie,height:ie,viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",style:{display:"block"},children:[m.jsx("path",{d:"M2.2 12s3.6-7 9.8-7 9.8 7 9.8 7-3.6 7-9.8 7-9.8-7-9.8-7Z",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"}),m.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"none",stroke:"currentColor",strokeWidth:"2"})]}),Gt=({size:ie=16})=>m.jsxs("svg",{width:ie,height:ie,viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",style:{display:"block"},children:[m.jsx("path",{d:"M2.2 12s3.6-7 9.8-7c2.1 0 4 0.8 5.6 1.9",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"}),m.jsx("path",{d:"M21.8 12s-3.6 7-9.8 7c-2.1 0-4-0.8-5.6-1.9",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"}),m.jsx("path",{d:"M9.9 9.9a3 3 0 0 0 4.2 4.2",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),m.jsx("path",{d:"M3 3l18 18",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]});return m.jsxs("div",{style:{width:"100%",padding:"0.75rem 1rem 1.25rem",boxSizing:"border-box"},children:[m.jsx("div",{style:Ge,children:m.jsxs("div",{children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"0.5rem"},children:"Email"}),Ee?m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{...rt,overflowWrap:"anywhere",display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[m.jsx("span",{children:"Current:"}),m.jsx("span",{style:{color:"#aaa"},children:je||""}),nt?m.jsx("button",{type:"button",onClick:()=>Le(ie=>!ie),"aria-label":we?"Hide email":"Show email",title:we?"Hide email":"Show email",style:{backgroundColor:"transparent",border:"1px solid #333",color:"#aaa",borderRadius:"8px",width:"30px",height:"30px",display:"inline-flex",alignItems:"center",justifyContent:"center",cursor:"pointer",padding:0,lineHeight:1},children:we?m.jsx(Gt,{}):m.jsx(Te,{})}):null]}),m.jsxs("div",{style:{marginTop:"0.75rem",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[De?m.jsx("button",{type:"button",onClick:()=>{window.confirm("Sign out of IronLoop on this device?")&&l()},disabled:h,style:{...J,...fe(h)},children:"Sign out"}):null,m.jsx("button",{onClick:()=>{I?A():(F(!0),te("request"),le(""),ye(""))},style:J,children:I?"Cancel":"Change email"}),m.jsx("button",{onClick:y,disabled:h,style:{...J,...fe(h)},children:"Refresh status"})]}),I&&m.jsxs("div",{style:{marginTop:"0.75rem"},children:[m.jsx("input",{value:X,onChange:ie=>le(ie.target.value),placeholder:"new@email.com",style:{width:"100%",padding:"0.6rem",borderRadius:"8px",boxSizing:"border-box"},inputMode:"email",autoCapitalize:"none",autoCorrect:"off",disabled:h||Z==="verify"}),Z==="request"?m.jsx("button",{onClick:Y,disabled:h||!String(X||"").trim(),style:{...re,...fe(h||!String(X||"").trim())},children:"Send code"}):m.jsxs(m.Fragment,{children:[m.jsx("div",{style:{marginTop:"0.6rem",...rt},children:"Enter the code sent to your new email."}),m.jsx("input",{value:ke,onChange:ie=>ye(ie.target.value),placeholder:"Code",style:{width:"100%",marginTop:"0.6rem",padding:"0.6rem",borderRadius:"8px",boxSizing:"border-box"},inputMode:"numeric",autoCapitalize:"none",autoCorrect:"off",disabled:h}),m.jsx("button",{onClick:he,disabled:h||!String(ke||"").trim()||!String(X||"").trim(),style:{...re,...fe(h||!String(ke||"").trim()||!String(X||"").trim())},children:"Confirm email change"}),m.jsx("button",{onClick:Y,disabled:h||!String(X||"").trim(),style:{width:"100%",marginTop:"0.6rem",padding:"0.6rem 1rem",backgroundColor:"#121212",border:"1px solid #333",color:"#fff",borderRadius:"8px",cursor:h||!String(X||"").trim()?"default":"pointer",opacity:h||!String(X||"").trim()?.7:1},children:"Resend code"}),m.jsx("button",{onClick:()=>{te("request"),ye("")},disabled:h,style:{width:"100%",marginTop:"0.6rem",padding:"0.6rem 1rem",backgroundColor:"#121212",border:"1px solid #333",color:"#fff",borderRadius:"8px",cursor:h?"default":"pointer",opacity:h?.7:1},children:"Change new email"})]})]}),p?m.jsx("div",{style:{marginTop:"0.75rem",color:"#aaa"},children:p}):null]}):m.jsx("div",{style:rt,children:"Sign in above to manage your email."})]})}),m.jsxs("div",{style:{...Ge,marginTop:"0.75rem"},children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"0.5rem"},children:"Export"}),m.jsx("div",{style:rt,children:"Download your workout history as a CSV file."}),m.jsxs("div",{style:{marginTop:"0.75rem"},children:[m.jsxs("button",{onClick:()=>{_e&&x()},disabled:!_e,style:{...re,...fe(!_e),backgroundColor:_e?"#8b5cf6":"#333"},children:["Export history (.csv)",Number(v||0)>0?` (${v})`:""]}),!_e&&m.jsx("div",{style:{marginTop:"0.6rem",color:"#aaa"},children:"No workouts to export yet."})]})]}),m.jsxs("div",{style:{...Ge,marginTop:"0.75rem",border:"1px solid #552222"},children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"0.5rem",color:"#ff6b6b"},children:"Danger zone"}),m.jsx("div",{style:rt,children:"These actions are destructive and cannot be undone."}),m.jsxs("div",{style:{marginTop:"0.75rem",display:"flex",flexDirection:"column",gap:"0.6rem"},children:[m.jsx("button",{type:"button",onClick:async()=>{if(!oe||k)return;const ie=i?"Delete all workout history? This will remove history from this device and from your Supabase account. This cannot be undone.":"Delete all workout history from this device? This cannot be undone.";!window.confirm(ie)||!window.confirm("Are you sure?")||await O()},disabled:!oe||k,style:{width:"100%",padding:"0.7rem 1rem",backgroundColor:"transparent",border:"1px solid #ff6b6b",color:"#ff6b6b",borderRadius:"8px",cursor:!oe||k?"default":"pointer",opacity:!oe||k?.6:1,fontWeight:"bold"},children:"Delete all history"}),m.jsx("button",{type:"button",onClick:async()=>{!_||k||!window.confirm("Delete your account and all associated data? This will permanently remove your IronLoop data from Supabase. This cannot be undone.")||!window.confirm("Final confirmation: delete account. You will be signed out immediately.")||await D()},disabled:!_||k,style:{width:"100%",padding:"0.7rem 1rem",backgroundColor:"transparent",border:"1px solid #ff6b6b",color:"#ff6b6b",borderRadius:"8px",cursor:!_||k?"default":"pointer",opacity:!_||k?.6:1,fontWeight:"bold"},children:"Delete account"})]}),oe?null:m.jsx("div",{style:{marginTop:"0.6rem",color:"#aaa"},children:"No history to delete."}),i?null:m.jsx("div",{style:{marginTop:"0.6rem",color:"#aaa"},children:"Sign in to delete your account."}),M?m.jsx("div",{style:{marginTop:"0.75rem",color:"#aaa"},children:M}):null]})]})}function Dl(s,a){var i={};for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&a.indexOf(l)<0&&(i[l]=s[l]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,l=Object.getOwnPropertySymbols(s);c<l.length;c++)a.indexOf(l[c])<0&&Object.prototype.propertyIsEnumerable.call(s,l[c])&&(i[l[c]]=s[l[c]]);return i}function Ap(s,a,i,l){function c(f){return f instanceof i?f:new i(function(h){h(f)})}return new(i||(i=Promise))(function(f,h){function p(x){try{v(l.next(x))}catch(O){h(O)}}function y(x){try{v(l.throw(x))}catch(O){h(O)}}function v(x){x.done?f(x.value):c(x.value).then(p,y)}v((l=l.apply(s,a||[])).next())})}const Op=s=>s?(...a)=>s(...a):(...a)=>fetch(...a);class vc extends Error{constructor(a,i="FunctionsError",l){super(a),this.name=i,this.context=l}}class Cp extends vc{constructor(a){super("Failed to send a request to the Edge Function","FunctionsFetchError",a)}}class pm extends vc{constructor(a){super("Relay Error invoking the Edge Function","FunctionsRelayError",a)}}class vm extends vc{constructor(a){super("Edge Function returned a non-2xx status code","FunctionsHttpError",a)}}var sc;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(sc||(sc={}));class jp{constructor(a,{headers:i={},customFetch:l,region:c=sc.Any}={}){this.url=a,this.headers=i,this.region=c,this.fetch=Op(l)}setAuth(a){this.headers.Authorization=`Bearer ${a}`}invoke(a){return Ap(this,arguments,void 0,function*(i,l={}){var c;let f,h;try{const{headers:p,method:y,body:v,signal:x,timeout:O}=l;let D={},{region:k}=l;k||(k=this.region);const M=new URL(`${this.url}/${i}`);k&&k!=="any"&&(D["x-region"]=k,M.searchParams.set("forceFunctionRegion",k));let I;v&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&v instanceof Blob||v instanceof ArrayBuffer?(D["Content-Type"]="application/octet-stream",I=v):typeof v=="string"?(D["Content-Type"]="text/plain",I=v):typeof FormData<"u"&&v instanceof FormData?I=v:(D["Content-Type"]="application/json",I=JSON.stringify(v)):I=v;let F=x;O&&(h=new AbortController,f=setTimeout(()=>h.abort(),O),x?(F=h.signal,x.addEventListener("abort",()=>h.abort())):F=h.signal);const Z=yield this.fetch(M.toString(),{method:y||"POST",headers:Object.assign(Object.assign(Object.assign({},D),this.headers),p),body:I,signal:F}).catch(ke=>{throw new Cp(ke)}),te=Z.headers.get("x-relay-error");if(te&&te==="true")throw new pm(Z);if(!Z.ok)throw new vm(Z);let X=((c=Z.headers.get("Content-Type"))!==null&&c!==void 0?c:"text/plain").split(";")[0].trim(),le;return X==="application/json"?le=yield Z.json():X==="application/octet-stream"||X==="application/pdf"?le=yield Z.blob():X==="text/event-stream"?le=Z:X==="multipart/form-data"?le=yield Z.formData():le=yield Z.text(),{data:le,error:null,response:Z}}catch(p){return{data:null,error:p,response:p instanceof vm||p instanceof pm?p.context:void 0}}finally{f&&clearTimeout(f)}})}}var kp=class extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}},Rp=class{constructor(s){var a,i;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(a=s.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=s.signal,this.isMaybeSingle=(i=s.isMaybeSingle)!==null&&i!==void 0?i:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,a){return this.headers=new Headers(this.headers),this.headers.set(s,a),this}then(s,a){var i=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{let h=null,p=null,y=null,v=f.status,x=f.statusText;if(f.ok){var O,D;if(i.method!=="HEAD"){var k;const Z=await f.text();Z===""||(i.headers.get("Accept")==="text/csv"||i.headers.get("Accept")&&(!((k=i.headers.get("Accept"))===null||k===void 0)&&k.includes("application/vnd.pgrst.plan+text"))?p=Z:p=JSON.parse(Z))}const I=(O=i.headers.get("Prefer"))===null||O===void 0?void 0:O.match(/count=(exact|planned|estimated)/),F=(D=f.headers.get("content-range"))===null||D===void 0?void 0:D.split("/");I&&F&&F.length>1&&(y=parseInt(F[1])),i.isMaybeSingle&&i.method==="GET"&&Array.isArray(p)&&(p.length>1?(h={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,y=null,v=406,x="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{var M;const I=await f.text();try{h=JSON.parse(I),Array.isArray(h)&&f.status===404&&(p=[],h=null,v=200,x="OK")}catch{f.status===404&&I===""?(v=204,x="No Content"):h={message:I}}if(h&&i.isMaybeSingle&&(!(h==null||(M=h.details)===null||M===void 0)&&M.includes("0 rows"))&&(h=null,v=200,x="OK"),h&&i.shouldThrowOnError)throw new kp(h)}return{error:h,data:p,count:y,status:v,statusText:x}});return this.shouldThrowOnError||(c=c.catch(f=>{var h;let p="";const y=f?.cause;if(y){var v,x,O,D;const M=(v=y?.message)!==null&&v!==void 0?v:"",I=(x=y?.code)!==null&&x!==void 0?x:"";p=`${(O=f?.name)!==null&&O!==void 0?O:"FetchError"}: ${f?.message}`,p+=`

Caused by: ${(D=y?.name)!==null&&D!==void 0?D:"Error"}: ${M}`,I&&(p+=` (${I})`),y?.stack&&(p+=`
${y.stack}`)}else{var k;p=(k=f?.stack)!==null&&k!==void 0?k:""}return{error:{message:`${(h=f?.name)!==null&&h!==void 0?h:"FetchError"}: ${f?.message}`,details:p,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),c.then(s,a)}returns(){return this}overrideTypes(){return this}},Dp=class extends Rp{select(s){let a=!1;const i=(s??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:a=!0,nullsFirst:i,foreignTable:l,referencedTable:c=l}={}){const f=c?`${c}.order`:"order",h=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${h?`${h},`:""}${s}.${a?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:a,referencedTable:i=a}={}){const l=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,a,{foreignTable:i,referencedTable:l=i}={}){const c=typeof l>"u"?"offset":`${l}.offset`,f=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(f,`${a-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:a=!1,settings:i=!1,buffers:l=!1,wal:c=!1,format:f="text"}={}){var h;const p=[s?"analyze":null,a?"verbose":null,i?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),y=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${y}"; options=${p};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};const bm=new RegExp("[,()]");var ui=class extends Dp{eq(s,a){return this.url.searchParams.append(s,`eq.${a}`),this}neq(s,a){return this.url.searchParams.append(s,`neq.${a}`),this}gt(s,a){return this.url.searchParams.append(s,`gt.${a}`),this}gte(s,a){return this.url.searchParams.append(s,`gte.${a}`),this}lt(s,a){return this.url.searchParams.append(s,`lt.${a}`),this}lte(s,a){return this.url.searchParams.append(s,`lte.${a}`),this}like(s,a){return this.url.searchParams.append(s,`like.${a}`),this}likeAllOf(s,a){return this.url.searchParams.append(s,`like(all).{${a.join(",")}}`),this}likeAnyOf(s,a){return this.url.searchParams.append(s,`like(any).{${a.join(",")}}`),this}ilike(s,a){return this.url.searchParams.append(s,`ilike.${a}`),this}ilikeAllOf(s,a){return this.url.searchParams.append(s,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(s,a){return this.url.searchParams.append(s,`ilike(any).{${a.join(",")}}`),this}regexMatch(s,a){return this.url.searchParams.append(s,`match.${a}`),this}regexIMatch(s,a){return this.url.searchParams.append(s,`imatch.${a}`),this}is(s,a){return this.url.searchParams.append(s,`is.${a}`),this}isDistinct(s,a){return this.url.searchParams.append(s,`isdistinct.${a}`),this}in(s,a){const i=Array.from(new Set(a)).map(l=>typeof l=="string"&&bm.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`in.(${i})`),this}notIn(s,a){const i=Array.from(new Set(a)).map(l=>typeof l=="string"&&bm.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`not.in.(${i})`),this}contains(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cs.{${a.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(a)}`),this}containedBy(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cd.{${a.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(a)}`),this}rangeGt(s,a){return this.url.searchParams.append(s,`sr.${a}`),this}rangeGte(s,a){return this.url.searchParams.append(s,`nxl.${a}`),this}rangeLt(s,a){return this.url.searchParams.append(s,`sl.${a}`),this}rangeLte(s,a){return this.url.searchParams.append(s,`nxr.${a}`),this}rangeAdjacent(s,a){return this.url.searchParams.append(s,`adj.${a}`),this}overlaps(s,a){return typeof a=="string"?this.url.searchParams.append(s,`ov.${a}`):this.url.searchParams.append(s,`ov.{${a.join(",")}}`),this}textSearch(s,a,{config:i,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const f=i===void 0?"":`(${i})`;return this.url.searchParams.append(s,`${c}fts${f}.${a}`),this}match(s){return Object.entries(s).forEach(([a,i])=>{this.url.searchParams.append(a,`eq.${i}`)}),this}not(s,a,i){return this.url.searchParams.append(s,`not.${a}.${i}`),this}or(s,{foreignTable:a,referencedTable:i=a}={}){const l=i?`${i}.or`:"or";return this.url.searchParams.append(l,`(${s})`),this}filter(s,a,i){return this.url.searchParams.append(s,`${a}.${i}`),this}},Np=class{constructor(s,{headers:a={},schema:i,fetch:l}){this.url=s,this.headers=new Headers(a),this.schema=i,this.fetch=l}select(s,a){const{head:i=!1,count:l}=a??{},c=i?"HEAD":"GET";let f=!1;const h=(s??"*").split("").map(p=>/\s/.test(p)&&!f?"":(p==='"'&&(f=!f),p)).join("");return this.url.searchParams.set("select",h),l&&this.headers.append("Prefer",`count=${l}`),new ui({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:a,defaultToNull:i=!0}={}){var l;const c="POST";if(a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const f=s.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(f.length>0){const h=[...new Set(f)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new ui({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(s,{onConflict:a,ignoreDuplicates:i=!1,count:l,defaultToNull:c=!0}={}){var f;const h="POST";if(this.headers.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const p=s.reduce((y,v)=>y.concat(Object.keys(v)),[]);if(p.length>0){const y=[...new Set(p)].map(v=>`"${v}"`);this.url.searchParams.set("columns",y.join(","))}}return new ui({method:h,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(s,{count:a}={}){var i;const l="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new ui({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}delete({count:s}={}){var a;const i="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new ui({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}},Up=class Gm{constructor(a,{headers:i={},schema:l,fetch:c}={}){this.url=a,this.headers=new Headers(i),this.schemaName=l,this.fetch=c}from(a){if(!a||typeof a!="string"||a.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Np(new URL(`${this.url}/${a}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new Gm(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,i={},{head:l=!1,get:c=!1,count:f}={}){var h;let p;const y=new URL(`${this.url}/rpc/${a}`);let v;l||c?(p=l?"HEAD":"GET",Object.entries(i).filter(([O,D])=>D!==void 0).map(([O,D])=>[O,Array.isArray(D)?`{${D.join(",")}}`:`${D}`]).forEach(([O,D])=>{y.searchParams.append(O,D)})):(p="POST",v=i);const x=new Headers(this.headers);return f&&x.set("Prefer",`count=${f}`),new ui({method:p,url:y,headers:x,schema:this.schemaName,body:v,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}};class zp{constructor(){}static detectEnvironment(){var a;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((a=navigator.userAgent)===null||a===void 0)&&a.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const i=process.versions;if(i&&i.node){const l=i.node,c=parseInt(l.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const a=this.detectEnvironment();if(a.constructor)return a.constructor;let i=a.error||"WebSocket not supported in this environment.";throw a.workaround&&(i+=`

Suggested solution: ${a.workaround}`),new Error(i)}static createWebSocket(a,i){const l=this.getWebSocketConstructor();return new l(a,i)}static isWebSocketSupported(){try{const a=this.detectEnvironment();return a.type==="native"||a.type==="ws"}catch{return!1}}}const Mp="2.89.0",Bp=`realtime-js/${Mp}`,Vm="1.0.0",Lp="2.0.0",_m=Vm,lc=1e4,qp=1e3,Hp=100;var Wa;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Wa||(Wa={}));var Qt;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(Qt||(Qt={}));var Qn;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(Qn||(Qn={}));var oc;(function(s){s.websocket="websocket"})(oc||(oc={}));var br;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(br||(br={}));class $p{constructor(a){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=a??[]}encode(a,i){if(a.event===this.BROADCAST_EVENT&&!(a.payload instanceof ArrayBuffer)&&typeof a.payload.event=="string")return i(this._binaryEncodeUserBroadcastPush(a));let l=[a.join_ref,a.ref,a.topic,a.event,a.payload];return i(JSON.stringify(l))}_binaryEncodeUserBroadcastPush(a){var i;return this._isArrayBuffer((i=a.payload)===null||i===void 0?void 0:i.payload)?this._encodeBinaryUserBroadcastPush(a):this._encodeJsonUserBroadcastPush(a)}_encodeBinaryUserBroadcastPush(a){var i,l;const c=(l=(i=a.payload)===null||i===void 0?void 0:i.payload)!==null&&l!==void 0?l:new ArrayBuffer(0);return this._encodeUserBroadcastPush(a,this.BINARY_ENCODING,c)}_encodeJsonUserBroadcastPush(a){var i,l;const c=(l=(i=a.payload)===null||i===void 0?void 0:i.payload)!==null&&l!==void 0?l:{},h=new TextEncoder().encode(JSON.stringify(c)).buffer;return this._encodeUserBroadcastPush(a,this.JSON_ENCODING,h)}_encodeUserBroadcastPush(a,i,l){var c,f;const h=a.topic,p=(c=a.ref)!==null&&c!==void 0?c:"",y=(f=a.join_ref)!==null&&f!==void 0?f:"",v=a.payload.event,x=this.allowedMetadataKeys?this._pick(a.payload,this.allowedMetadataKeys):{},O=Object.keys(x).length===0?"":JSON.stringify(x);if(y.length>255)throw new Error(`joinRef length ${y.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`ref length ${p.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`topic length ${h.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`userEvent length ${v.length} exceeds maximum of 255`);if(O.length>255)throw new Error(`metadata length ${O.length} exceeds maximum of 255`);const D=this.USER_BROADCAST_PUSH_META_LENGTH+y.length+p.length+h.length+v.length+O.length,k=new ArrayBuffer(this.HEADER_LENGTH+D);let M=new DataView(k),I=0;M.setUint8(I++,this.KINDS.userBroadcastPush),M.setUint8(I++,y.length),M.setUint8(I++,p.length),M.setUint8(I++,h.length),M.setUint8(I++,v.length),M.setUint8(I++,O.length),M.setUint8(I++,i),Array.from(y,Z=>M.setUint8(I++,Z.charCodeAt(0))),Array.from(p,Z=>M.setUint8(I++,Z.charCodeAt(0))),Array.from(h,Z=>M.setUint8(I++,Z.charCodeAt(0))),Array.from(v,Z=>M.setUint8(I++,Z.charCodeAt(0))),Array.from(O,Z=>M.setUint8(I++,Z.charCodeAt(0)));var F=new Uint8Array(k.byteLength+l.byteLength);return F.set(new Uint8Array(k),0),F.set(new Uint8Array(l),k.byteLength),F.buffer}decode(a,i){if(this._isArrayBuffer(a)){let l=this._binaryDecode(a);return i(l)}if(typeof a=="string"){const l=JSON.parse(a),[c,f,h,p,y]=l;return i({join_ref:c,ref:f,topic:h,event:p,payload:y})}return i({})}_binaryDecode(a){const i=new DataView(a),l=i.getUint8(0),c=new TextDecoder;if(l===this.KINDS.userBroadcast)return this._decodeUserBroadcast(a,i,c)}_decodeUserBroadcast(a,i,l){const c=i.getUint8(1),f=i.getUint8(2),h=i.getUint8(3),p=i.getUint8(4);let y=this.HEADER_LENGTH+4;const v=l.decode(a.slice(y,y+c));y=y+c;const x=l.decode(a.slice(y,y+f));y=y+f;const O=l.decode(a.slice(y,y+h));y=y+h;const D=a.slice(y,a.byteLength),k=p===this.JSON_ENCODING?JSON.parse(l.decode(D)):D,M={type:this.BROADCAST_EVENT,event:x,payload:k};return h>0&&(M.meta=JSON.parse(O)),{join_ref:null,ref:null,topic:v,event:this.BROADCAST_EVENT,payload:M}}_isArrayBuffer(a){var i;return a instanceof ArrayBuffer||((i=a?.constructor)===null||i===void 0?void 0:i.name)==="ArrayBuffer"}_pick(a,i){return!a||typeof a!="object"?{}:Object.fromEntries(Object.entries(a).filter(([l])=>i.includes(l)))}}class Ym{constructor(a,i){this.callback=a,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=a,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var gt;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(gt||(gt={}));const wm=(s,a,i={})=>{var l;const c=(l=i.skipTypes)!==null&&l!==void 0?l:[];return a?Object.keys(a).reduce((f,h)=>(f[h]=Gp(h,s,a,c),f),{}):{}},Gp=(s,a,i,l)=>{const c=a.find(p=>p.name===s),f=c?.type,h=i[s];return f&&!l.includes(f)?Km(f,h):uc(h)},Km=(s,a)=>{if(s.charAt(0)==="_"){const i=s.slice(1,s.length);return Ip(a,i)}switch(s){case gt.bool:return Vp(a);case gt.float4:case gt.float8:case gt.int2:case gt.int4:case gt.int8:case gt.numeric:case gt.oid:return Yp(a);case gt.json:case gt.jsonb:return Kp(a);case gt.timestamp:return Xp(a);case gt.abstime:case gt.date:case gt.daterange:case gt.int4range:case gt.int8range:case gt.money:case gt.reltime:case gt.text:case gt.time:case gt.timestamptz:case gt.timetz:case gt.tsrange:case gt.tstzrange:return uc(a);default:return uc(a)}},uc=s=>s,Vp=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},Yp=s=>{if(typeof s=="string"){const a=parseFloat(s);if(!Number.isNaN(a))return a}return s},Kp=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch{return s}return s},Ip=(s,a)=>{if(typeof s!="string")return s;const i=s.length-1,l=s[i];if(s[0]==="{"&&l==="}"){let f;const h=s.slice(1,i);try{f=JSON.parse("["+h+"]")}catch{f=h?h.split(","):[]}return f.map(p=>Km(a,p))}return s},Xp=s=>typeof s=="string"?s.replace(" ","T"):s,Im=s=>{const a=new URL(s);return a.protocol=a.protocol.replace(/^ws/i,"http"),a.pathname=a.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),a.pathname===""||a.pathname==="/"?a.pathname="/api/broadcast":a.pathname=a.pathname+"/api/broadcast",a.href};class Zu{constructor(a,i,l={},c=lc){this.channel=a,this.event=i,this.payload=l,this.timeout=c,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(a){this.timeout=a,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(a){this.payload=Object.assign(Object.assign({},this.payload),a)}receive(a,i){var l;return this._hasReceived(a)&&i((l=this.receivedResp)===null||l===void 0?void 0:l.response),this.recHooks.push({status:a,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const a=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},a),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(a,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:a,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:a,response:i}){this.recHooks.filter(l=>l.status===a).forEach(l=>l.callback(i))}_hasReceived(a){return this.receivedResp&&this.receivedResp.status===a}}var Sm;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Sm||(Sm={}));class ss{constructor(a,i){this.channel=a,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const l=i?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(l.state,{},c=>{const{onJoin:f,onLeave:h,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ss.syncState(this.state,c,f,h),this.pendingDiffs.forEach(y=>{this.state=ss.syncDiff(this.state,y,f,h)}),this.pendingDiffs=[],p()}),this.channel._on(l.diff,{},c=>{const{onJoin:f,onLeave:h,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(c):(this.state=ss.syncDiff(this.state,c,f,h),p())}),this.onJoin((c,f,h)=>{this.channel._trigger("presence",{event:"join",key:c,currentPresences:f,newPresences:h})}),this.onLeave((c,f,h)=>{this.channel._trigger("presence",{event:"leave",key:c,currentPresences:f,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(a,i,l,c){const f=this.cloneDeep(a),h=this.transformState(i),p={},y={};return this.map(f,(v,x)=>{h[v]||(y[v]=x)}),this.map(h,(v,x)=>{const O=f[v];if(O){const D=x.map(F=>F.presence_ref),k=O.map(F=>F.presence_ref),M=x.filter(F=>k.indexOf(F.presence_ref)<0),I=O.filter(F=>D.indexOf(F.presence_ref)<0);M.length>0&&(p[v]=M),I.length>0&&(y[v]=I)}else p[v]=x}),this.syncDiff(f,{joins:p,leaves:y},l,c)}static syncDiff(a,i,l,c){const{joins:f,leaves:h}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return l||(l=()=>{}),c||(c=()=>{}),this.map(f,(p,y)=>{var v;const x=(v=a[p])!==null&&v!==void 0?v:[];if(a[p]=this.cloneDeep(y),x.length>0){const O=a[p].map(k=>k.presence_ref),D=x.filter(k=>O.indexOf(k.presence_ref)<0);a[p].unshift(...D)}l(p,x,y)}),this.map(h,(p,y)=>{let v=a[p];if(!v)return;const x=y.map(O=>O.presence_ref);v=v.filter(O=>x.indexOf(O.presence_ref)<0),a[p]=v,c(p,v,y),v.length===0&&delete a[p]}),a}static map(a,i){return Object.getOwnPropertyNames(a).map(l=>i(l,a[l]))}static transformState(a){return a=this.cloneDeep(a),Object.getOwnPropertyNames(a).reduce((i,l)=>{const c=a[l];return"metas"in c?i[l]=c.metas.map(f=>(f.presence_ref=f.phx_ref,delete f.phx_ref,delete f.phx_ref_prev,f)):i[l]=c,i},{})}static cloneDeep(a){return JSON.parse(JSON.stringify(a))}onJoin(a){this.caller.onJoin=a}onLeave(a){this.caller.onLeave=a}onSync(a){this.caller.onSync=a}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var xm;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(xm||(xm={}));var ls;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(ls||(ls={}));var Sa;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(Sa||(Sa={}));class di{constructor(a,i={config:{}},l){var c,f;if(this.topic=a,this.params=i,this.socket=l,this.bindings={},this.state=Qt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=a.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new Zu(this,Qn.join,this.params,this.timeout),this.rejoinTimer=new Ym(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Qt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Qt.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Qt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Qt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Qt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Qn.reply,{},(h,p)=>{this._trigger(this._replyEventName(p),h)}),this.presence=new ss(this),this.broadcastEndpointURL=Im(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((f=(c=this.params.config)===null||c===void 0?void 0:c.broadcast)===null||f===void 0)&&f.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(a,i=this.timeout){var l,c,f;if(this.socket.isConnected()||this.socket.connect(),this.state==Qt.closed){const{config:{broadcast:h,presence:p,private:y}}=this.params,v=(c=(l=this.bindings.postgres_changes)===null||l===void 0?void 0:l.map(k=>k.filter))!==null&&c!==void 0?c:[],x=!!this.bindings[ls.PRESENCE]&&this.bindings[ls.PRESENCE].length>0||((f=this.params.config.presence)===null||f===void 0?void 0:f.enabled)===!0,O={},D={broadcast:h,presence:Object.assign(Object.assign({},p),{enabled:x}),postgres_changes:v,private:y};this.socket.accessTokenValue&&(O.access_token=this.socket.accessTokenValue),this._onError(k=>a?.(Sa.CHANNEL_ERROR,k)),this._onClose(()=>a?.(Sa.CLOSED)),this.updateJoinPayload(Object.assign({config:D},O)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:k})=>{var M;if(this.socket._isManualToken()||this.socket.setAuth(),k===void 0){a?.(Sa.SUBSCRIBED);return}else{const I=this.bindings.postgres_changes,F=(M=I?.length)!==null&&M!==void 0?M:0,Z=[];for(let te=0;te<F;te++){const X=I[te],{filter:{event:le,schema:ke,table:ye,filter:ce}}=X,Le=k&&k[te];if(Le&&Le.event===le&&di.isFilterValueEqual(Le.schema,ke)&&di.isFilterValueEqual(Le.table,ye)&&di.isFilterValueEqual(Le.filter,ce))Z.push(Object.assign(Object.assign({},X),{id:Le.id}));else{this.unsubscribe(),this.state=Qt.errored,a?.(Sa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=Z,a&&a(Sa.SUBSCRIBED);return}}).receive("error",k=>{this.state=Qt.errored,a?.(Sa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(k).join(", ")||"error")))}).receive("timeout",()=>{a?.(Sa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(a,i={}){return await this.send({type:"presence",event:"track",payload:a},i.timeout||this.timeout)}async untrack(a={}){return await this.send({type:"presence",event:"untrack"},a)}on(a,i,l){return this.state===Qt.joined&&a===ls.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(a,i,l)}async httpSend(a,i,l={}){var c;if(i==null)return Promise.reject("Payload is required for httpSend()");const f={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(f.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:f,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(c=l.timeout)!==null&&c!==void 0?c:this.timeout);if(p.status===202)return{success:!0};let y=p.statusText;try{const v=await p.json();y=v.error||v.message||y}catch{}return Promise.reject(new Error(y))}async send(a,i={}){var l,c;if(!this._canPush()&&a.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:f,payload:h}=a,p={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(p.Authorization=`Bearer ${this.socket.accessTokenValue}`);const y={method:"POST",headers:p,body:JSON.stringify({messages:[{topic:this.subTopic,event:f,payload:h,private:this.private}]})};try{const v=await this._fetchWithTimeout(this.broadcastEndpointURL,y,(l=i.timeout)!==null&&l!==void 0?l:this.timeout);return await((c=v.body)===null||c===void 0?void 0:c.cancel()),v.ok?"ok":"error"}catch(v){return v.name==="AbortError"?"timed out":"error"}}else return new Promise(f=>{var h,p,y;const v=this._push(a.type,a,i.timeout||this.timeout);a.type==="broadcast"&&!(!((y=(p=(h=this.params)===null||h===void 0?void 0:h.config)===null||p===void 0?void 0:p.broadcast)===null||y===void 0)&&y.ack)&&f("ok"),v.receive("ok",()=>f("ok")),v.receive("error",()=>f("error")),v.receive("timeout",()=>f("timed out"))})}updateJoinPayload(a){this.joinPush.updatePayload(a)}unsubscribe(a=this.timeout){this.state=Qt.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Qn.close,"leave",this._joinRef())};this.joinPush.destroy();let l=null;return new Promise(c=>{l=new Zu(this,Qn.leave,{},a),l.receive("ok",()=>{i(),c("ok")}).receive("timeout",()=>{i(),c("timed out")}).receive("error",()=>{c("error")}),l.send(),this._canPush()||l.trigger("ok",{})}).finally(()=>{l?.destroy()})}teardown(){this.pushBuffer.forEach(a=>a.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Qt.closed,this.bindings={}}async _fetchWithTimeout(a,i,l){const c=new AbortController,f=setTimeout(()=>c.abort(),l),h=await this.socket.fetch(a,Object.assign(Object.assign({},i),{signal:c.signal}));return clearTimeout(f),h}_push(a,i,l=this.timeout){if(!this.joinedOnce)throw`tried to push '${a}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let c=new Zu(this,a,i,l);return this._canPush()?c.send():this._addToPushBuffer(c),c}_addToPushBuffer(a){if(a.startTimeout(),this.pushBuffer.push(a),this.pushBuffer.length>Hp){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(a,i,l){return i}_isMember(a){return this.topic===a}_joinRef(){return this.joinPush.ref}_trigger(a,i,l){var c,f;const h=a.toLocaleLowerCase(),{close:p,error:y,leave:v,join:x}=Qn;if(l&&[p,y,v,x].indexOf(h)>=0&&l!==this._joinRef())return;let D=this._onMessage(h,i,l);if(i&&!D)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(c=this.bindings.postgres_changes)===null||c===void 0||c.filter(k=>{var M,I,F;return((M=k.filter)===null||M===void 0?void 0:M.event)==="*"||((F=(I=k.filter)===null||I===void 0?void 0:I.event)===null||F===void 0?void 0:F.toLocaleLowerCase())===h}).map(k=>k.callback(D,l)):(f=this.bindings[h])===null||f===void 0||f.filter(k=>{var M,I,F,Z,te,X;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in k){const le=k.id,ke=(M=k.filter)===null||M===void 0?void 0:M.event;return le&&((I=i.ids)===null||I===void 0?void 0:I.includes(le))&&(ke==="*"||ke?.toLocaleLowerCase()===((F=i.data)===null||F===void 0?void 0:F.type.toLocaleLowerCase()))}else{const le=(te=(Z=k?.filter)===null||Z===void 0?void 0:Z.event)===null||te===void 0?void 0:te.toLocaleLowerCase();return le==="*"||le===((X=i?.event)===null||X===void 0?void 0:X.toLocaleLowerCase())}else return k.type.toLocaleLowerCase()===h}).map(k=>{if(typeof D=="object"&&"ids"in D){const M=D.data,{schema:I,table:F,commit_timestamp:Z,type:te,errors:X}=M;D=Object.assign(Object.assign({},{schema:I,table:F,commit_timestamp:Z,eventType:te,new:{},old:{},errors:X}),this._getPayloadRecords(M))}k.callback(D,l)})}_isClosed(){return this.state===Qt.closed}_isJoined(){return this.state===Qt.joined}_isJoining(){return this.state===Qt.joining}_isLeaving(){return this.state===Qt.leaving}_replyEventName(a){return`chan_reply_${a}`}_on(a,i,l){const c=a.toLocaleLowerCase(),f={type:c,filter:i,callback:l};return this.bindings[c]?this.bindings[c].push(f):this.bindings[c]=[f],this}_off(a,i){const l=a.toLocaleLowerCase();return this.bindings[l]&&(this.bindings[l]=this.bindings[l].filter(c=>{var f;return!(((f=c.type)===null||f===void 0?void 0:f.toLocaleLowerCase())===l&&di.isEqual(c.filter,i))})),this}static isEqual(a,i){if(Object.keys(a).length!==Object.keys(i).length)return!1;for(const l in a)if(a[l]!==i[l])return!1;return!0}static isFilterValueEqual(a,i){return(a??void 0)===(i??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(a){this._on(Qn.close,{},a)}_onError(a){this._on(Qn.error,{},i=>a(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(a=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Qt.joining,this.joinPush.resend(a))}_getPayloadRecords(a){const i={new:{},old:{}};return(a.type==="INSERT"||a.type==="UPDATE")&&(i.new=wm(a.columns,a.record)),(a.type==="UPDATE"||a.type==="DELETE")&&(i.old=wm(a.columns,a.old_record)),i}}const Fu=()=>{},Tl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Qp=[1e3,2e3,5e3,1e4],Jp=1e4,Wp=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Zp{constructor(a,i){var l;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=lc,this.transport=null,this.heartbeatIntervalMs=Tl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Fu,this.ref=0,this.reconnectTimer=null,this.vsn=_m,this.logger=Fu,this.conn=null,this.sendBuffer=[],this.serializer=new $p,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=c=>c?(...f)=>c(...f):(...f)=>fetch(...f),!(!((l=i?.params)===null||l===void 0)&&l.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${a}/${oc.websocket}`,this.httpEndpoint=Im(a),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=zp.createWebSocket(this.endpointURL())}catch(a){this._setConnectionState("disconnected");const i=a.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(a,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const l=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(l),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(a?this.conn.close(a,i??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(a){const i=await a.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const a=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),a}log(a,i,l){this.logger(a,i,l)}connectionState(){switch(this.conn&&this.conn.readyState){case Wa.connecting:return br.Connecting;case Wa.open:return br.Open;case Wa.closing:return br.Closing;default:return br.Closed}}isConnected(){return this.connectionState()===br.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(a,i={config:{}}){const l=`realtime:${a}`,c=this.getChannels().find(f=>f.topic===l);if(c)return c;{const f=new di(`realtime:${a}`,i,this);return this.channels.push(f),f}}push(a){const{topic:i,event:l,payload:c,ref:f}=a,h=()=>{this.encode(a,p=>{var y;(y=this.conn)===null||y===void 0||y.send(p)})};this.log("push",`${i} ${l} (${f})`,c),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(a=null){this._authPromise=this._performAuth(a);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var a;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(a=this.conn)===null||a===void 0||a.close(qp,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},Tl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(a){this.heartbeatCallback=a}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(a=>a()),this.sendBuffer=[])}_makeRef(){let a=this.ref+1;return a===this.ref?this.ref=0:this.ref=a,this.ref.toString()}_leaveOpenTopic(a){let i=this.channels.find(l=>l.topic===a&&(l._isJoined()||l._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${a}"`),i.unsubscribe())}_remove(a){this.channels=this.channels.filter(i=>i.topic!==a.topic)}_onConnMessage(a){this.decode(a.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply")try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error")}catch(v){this.log("error","error in heartbeat callback",v)}i.ref&&i.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:l,event:c,payload:f,ref:h}=i,p=h?`(${h})`:"",y=f.status||"";this.log("receive",`${y} ${l} ${c} ${p}`.trim(),f),this.channels.filter(v=>v._isMember(l)).forEach(v=>v._trigger(c,f,h)),this._triggerStateCallbacks("message",i)})}_clearTimer(a){var i;a==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):a==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=a=>this._onConnError(a),this.conn.onmessage=a=>this._onConnMessage(a),this.conn.onclose=a=>this._onConnClose(a),this.conn.readyState===Wa.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Wa.open||this.conn.readyState===Wa.connecting)try{this.conn.close()}catch(a){this.log("error","Error closing connection",a)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(a=>a.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(i=>{this.log("error","error waiting for auth on connect",i),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const a=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(a),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this._terminateWorker()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(a){var i;this._setConnectionState("disconnected"),this.log("transport","close",a),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",a)}_onConnError(a){this._setConnectionState("disconnected"),this.log("transport",`${a}`),this._triggerChanError(),this._triggerStateCallbacks("error",a)}_triggerChanError(){this.channels.forEach(a=>a._trigger(Qn.error))}_appendParams(a,i){if(Object.keys(i).length===0)return a;const l=a.match(/\?/)?"&":"?",c=new URLSearchParams(i);return`${a}${l}${c}`}_workerObjectUrl(a){let i;if(a)i=a;else{const l=new Blob([Wp],{type:"application/javascript"});i=URL.createObjectURL(l)}return i}_setConnectionState(a,i=!1){this._connectionState=a,a==="connecting"?this._wasManualDisconnect=!1:a==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(a=null){let i,l=!1;if(a)i=a,l=!0;else if(this.accessToken)try{i=await this.accessToken()}catch(c){this.log("error","Error fetching access token from callback",c),i=this.accessTokenValue}else i=this.accessTokenValue;l?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(c=>{const f={access_token:i,version:Bp};i&&c.updateJoinPayload(f),c.joinedOnce&&c._isJoined()&&c._push(Qn.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(a="general"){this._isManualToken()||this.setAuth().catch(i=>{this.log("error",`Error setting auth in ${a}`,i)})}_triggerStateCallbacks(a,i){try{this.stateChangeCallbacks[a].forEach(l=>{try{l(i)}catch(c){this.log("error",`error in ${a} callback`,c)}})}catch(l){this.log("error",`error triggering ${a} callbacks`,l)}}_setupReconnectionTimer(){this.reconnectTimer=new Ym(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Tl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(a){var i,l,c,f,h,p,y,v,x,O,D,k;switch(this.transport=(i=a?.transport)!==null&&i!==void 0?i:null,this.timeout=(l=a?.timeout)!==null&&l!==void 0?l:lc,this.heartbeatIntervalMs=(c=a?.heartbeatIntervalMs)!==null&&c!==void 0?c:Tl.HEARTBEAT_INTERVAL,this.worker=(f=a?.worker)!==null&&f!==void 0?f:!1,this.accessToken=(h=a?.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(p=a?.heartbeatCallback)!==null&&p!==void 0?p:Fu,this.vsn=(y=a?.vsn)!==null&&y!==void 0?y:_m,a?.params&&(this.params=a.params),a?.logger&&(this.logger=a.logger),(a?.logLevel||a?.log_level)&&(this.logLevel=a.logLevel||a.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(v=a?.reconnectAfterMs)!==null&&v!==void 0?v:(M=>Qp[M-1]||Jp),this.vsn){case Vm:this.encode=(x=a?.encode)!==null&&x!==void 0?x:((M,I)=>I(JSON.stringify(M))),this.decode=(O=a?.decode)!==null&&O!==void 0?O:((M,I)=>I(JSON.parse(M)));break;case Lp:this.encode=(D=a?.encode)!==null&&D!==void 0?D:this.serializer.encode.bind(this.serializer),this.decode=(k=a?.decode)!==null&&k!==void 0?k:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=a?.workerUrl}}}var os=class extends Error{constructor(s,a){super(s),this.name="IcebergError",this.status=a.status,this.icebergType=a.icebergType,this.icebergCode=a.icebergCode,this.details=a.details,this.isCommitStateUnknown=a.icebergType==="CommitStateUnknownException"||[500,502,504].includes(a.status)&&a.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Fp(s,a,i){const l=new URL(a,s);if(i)for(const[c,f]of Object.entries(i))f!==void 0&&l.searchParams.set(c,f);return l.toString()}async function Pp(s){return!s||s.type==="none"?{}:s.type==="bearer"?{Authorization:`Bearer ${s.token}`}:s.type==="header"?{[s.name]:s.value}:s.type==="custom"?await s.getHeaders():{}}function e0(s){const a=s.fetchImpl??globalThis.fetch;return{async request({method:i,path:l,query:c,body:f,headers:h}){const p=Fp(s.baseUrl,l,c),y=await Pp(s.auth),v=await a(p,{method:i,headers:{...f?{"Content-Type":"application/json"}:{},...y,...h},body:f?JSON.stringify(f):void 0}),x=await v.text(),O=(v.headers.get("content-type")||"").includes("application/json"),D=O&&x?JSON.parse(x):x;if(!v.ok){const k=O?D:void 0,M=k?.error;throw new os(M?.message??`Request failed with status ${v.status}`,{status:v.status,icebergType:M?.type,icebergCode:M?.code,details:k})}return{status:v.status,headers:v.headers,data:D}}}}function Al(s){return s.join("")}var t0=class{constructor(s,a=""){this.client=s,this.prefix=a}async listNamespaces(s){const a=s?{parent:Al(s.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:a})).data.namespaces.map(l=>({namespace:l}))}async createNamespace(s,a){const i={namespace:s.namespace,properties:a?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:i})).data}async dropNamespace(s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Al(s.namespace)}`})}async loadNamespaceMetadata(s){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Al(s.namespace)}`})).data.properties}}async namespaceExists(s){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Al(s.namespace)}`}),!0}catch(a){if(a instanceof os&&a.status===404)return!1;throw a}}async createNamespaceIfNotExists(s,a){try{return await this.createNamespace(s,a)}catch(i){if(i instanceof os&&i.status===409)return;throw i}}};function ai(s){return s.join("")}var n0=class{constructor(s,a="",i){this.client=s,this.prefix=a,this.accessDelegation=i}async listTables(s){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ai(s.namespace)}/tables`})).data.identifiers}async createTable(s,a){const i={};return this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ai(s.namespace)}/tables`,body:a,headers:i})).data.metadata}async updateTable(s,a){const i=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ai(s.namespace)}/tables/${s.name}`,body:a});return{"metadata-location":i.data["metadata-location"],metadata:i.data.metadata}}async dropTable(s,a){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ai(s.namespace)}/tables/${s.name}`,query:{purgeRequested:String(a?.purge??!1)}})}async loadTable(s){const a={};return this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ai(s.namespace)}/tables/${s.name}`,headers:a})).data.metadata}async tableExists(s){const a={};this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ai(s.namespace)}/tables/${s.name}`,headers:a}),!0}catch(i){if(i instanceof os&&i.status===404)return!1;throw i}}async createTableIfNotExists(s,a){try{return await this.createTable(s,a)}catch(i){if(i instanceof os&&i.status===409)return await this.loadTable({namespace:s.namespace,name:a.name});throw i}}},a0=class{constructor(s){let a="v1";s.catalogName&&(a+=`/${s.catalogName}`);const i=s.baseUrl.endsWith("/")?s.baseUrl:`${s.baseUrl}/`;this.client=e0({baseUrl:i,auth:s.auth,fetchImpl:s.fetch}),this.accessDelegation=s.accessDelegation?.join(","),this.namespaceOps=new t0(this.client,a),this.tableOps=new n0(this.client,a,this.accessDelegation)}async listNamespaces(s){return this.namespaceOps.listNamespaces(s)}async createNamespace(s,a){return this.namespaceOps.createNamespace(s,a)}async dropNamespace(s){await this.namespaceOps.dropNamespace(s)}async loadNamespaceMetadata(s){return this.namespaceOps.loadNamespaceMetadata(s)}async listTables(s){return this.tableOps.listTables(s)}async createTable(s,a){return this.tableOps.createTable(s,a)}async updateTable(s,a){return this.tableOps.updateTable(s,a)}async dropTable(s,a){await this.tableOps.dropTable(s,a)}async loadTable(s){return this.tableOps.loadTable(s)}async namespaceExists(s){return this.namespaceOps.namespaceExists(s)}async tableExists(s){return this.tableOps.tableExists(s)}async createNamespaceIfNotExists(s,a){return this.namespaceOps.createNamespaceIfNotExists(s,a)}async createTableIfNotExists(s,a){return this.tableOps.createTableIfNotExists(s,a)}},Nl=class extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}};function Ot(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var r0=class extends Nl{constructor(s,a,i){super(s),this.name="StorageApiError",this.status=a,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},cc=class extends Nl{constructor(s,a){super(s),this.name="StorageUnknownError",this.originalError=a}};const bc=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),i0=()=>Response,fc=s=>{if(Array.isArray(s))return s.map(i=>fc(i));if(typeof s=="function"||s!==Object(s))return s;const a={};return Object.entries(s).forEach(([i,l])=>{const c=i.replace(/([-_][a-z])/gi,f=>f.toUpperCase().replace(/[-_]/g,""));a[c]=fc(l)}),a},s0=s=>{if(typeof s!="object"||s===null)return!1;const a=Object.getPrototypeOf(s);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},l0=s=>!s||typeof s!="string"||s.length===0||s.length>100||s.trim()!==s||s.includes("/")||s.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(s);function us(s){"@babel/helpers - typeof";return us=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},us(s)}function o0(s,a){if(us(s)!="object"||!s)return s;var i=s[Symbol.toPrimitive];if(i!==void 0){var l=i.call(s,a);if(us(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}function u0(s){var a=o0(s,"string");return us(a)=="symbol"?a:a+""}function c0(s,a,i){return(a=u0(a))in s?Object.defineProperty(s,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[a]=i,s}function Em(s,a){var i=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);a&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),i.push.apply(i,l)}return i}function Ce(s){for(var a=1;a<arguments.length;a++){var i=arguments[a]!=null?arguments[a]:{};a%2?Em(Object(i),!0).forEach(function(l){c0(s,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(i)):Em(Object(i)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(i,l))})}return s}const Pu=s=>{var a;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(a=s.error)===null||a===void 0?void 0:a.message)||JSON.stringify(s)},f0=async(s,a,i)=>{s instanceof await i0()&&!i?.noResolveJson?s.json().then(l=>{const c=s.status||500,f=l?.statusCode||c+"";a(new r0(Pu(l),c,f))}).catch(l=>{a(new cc(Pu(l),l))}):a(new cc(Pu(s),s))},d0=(s,a,i,l)=>{const c={method:s,headers:a?.headers||{}};return s==="GET"||!l?c:(s0(l)?(c.headers=Ce({"Content-Type":"application/json"},a?.headers),c.body=JSON.stringify(l)):c.body=l,a?.duplex&&(c.duplex=a.duplex),Ce(Ce({},c),i))};async function ms(s,a,i,l,c,f){return new Promise((h,p)=>{s(i,d0(a,l,c,f)).then(y=>{if(!y.ok)throw y;return l?.noResolveJson?y:y.json()}).then(y=>h(y)).catch(y=>f0(y,p,l))})}async function cs(s,a,i,l){return ms(s,"GET",a,i,l)}async function Xn(s,a,i,l,c){return ms(s,"POST",a,l,c,i)}async function dc(s,a,i,l,c){return ms(s,"PUT",a,l,c,i)}async function h0(s,a,i,l){return ms(s,"HEAD",a,Ce(Ce({},i),{},{noResolveJson:!0}),l)}async function _c(s,a,i,l,c){return ms(s,"DELETE",a,l,c,i)}var m0=class{constructor(s,a){this.downloadFn=s,this.shouldThrowOnError=a}then(s,a){return this.execute().then(s,a)}async execute(){var s=this;try{return{data:(await s.downloadFn()).body,error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Ot(a))return{data:null,error:a};throw a}}};let Xm;Xm=Symbol.toStringTag;var y0=class{constructor(s,a){this.downloadFn=s,this.shouldThrowOnError=a,this[Xm]="BlobDownloadBuilder",this.promise=null}asStream(){return new m0(this.downloadFn,this.shouldThrowOnError)}then(s,a){return this.getPromise().then(s,a)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var s=this;try{return{data:await(await s.downloadFn()).blob(),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Ot(a))return{data:null,error:a};throw a}}};const g0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Tm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var p0=class{constructor(s,a={},i,l){this.shouldThrowOnError=!1,this.url=s,this.headers=a,this.bucketId=i,this.fetch=bc(l)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(s,a,i,l){var c=this;try{let f;const h=Ce(Ce({},Tm),l);let p=Ce(Ce({},c.headers),s==="POST"&&{"x-upsert":String(h.upsert)});const y=h.metadata;typeof Blob<"u"&&i instanceof Blob?(f=new FormData,f.append("cacheControl",h.cacheControl),y&&f.append("metadata",c.encodeMetadata(y)),f.append("",i)):typeof FormData<"u"&&i instanceof FormData?(f=i,f.has("cacheControl")||f.append("cacheControl",h.cacheControl),y&&!f.has("metadata")&&f.append("metadata",c.encodeMetadata(y))):(f=i,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType,y&&(p["x-metadata"]=c.toBase64(c.encodeMetadata(y))),(typeof ReadableStream<"u"&&f instanceof ReadableStream||f&&typeof f=="object"&&"pipe"in f&&typeof f.pipe=="function")&&!h.duplex&&(h.duplex="half")),l?.headers&&(p=Ce(Ce({},p),l.headers));const v=c._removeEmptyFolders(a),x=c._getFinalPath(v),O=await(s=="PUT"?dc:Xn)(c.fetch,`${c.url}/object/${x}`,f,Ce({headers:p},h?.duplex?{duplex:h.duplex}:{}));return{data:{path:v,id:O.Id,fullPath:O.Key},error:null}}catch(f){if(c.shouldThrowOnError)throw f;if(Ot(f))return{data:null,error:f};throw f}}async upload(s,a,i){return this.uploadOrUpdate("POST",s,a,i)}async uploadToSignedUrl(s,a,i,l){var c=this;const f=c._removeEmptyFolders(s),h=c._getFinalPath(f),p=new URL(c.url+`/object/upload/sign/${h}`);p.searchParams.set("token",a);try{let y;const v=Ce({upsert:Tm.upsert},l),x=Ce(Ce({},c.headers),{"x-upsert":String(v.upsert)});return typeof Blob<"u"&&i instanceof Blob?(y=new FormData,y.append("cacheControl",v.cacheControl),y.append("",i)):typeof FormData<"u"&&i instanceof FormData?(y=i,y.append("cacheControl",v.cacheControl)):(y=i,x["cache-control"]=`max-age=${v.cacheControl}`,x["content-type"]=v.contentType),{data:{path:f,fullPath:(await dc(c.fetch,p.toString(),y,{headers:x})).Key},error:null}}catch(y){if(c.shouldThrowOnError)throw y;if(Ot(y))return{data:null,error:y};throw y}}async createSignedUploadUrl(s,a){var i=this;try{let l=i._getFinalPath(s);const c=Ce({},i.headers);a?.upsert&&(c["x-upsert"]="true");const f=await Xn(i.fetch,`${i.url}/object/upload/sign/${l}`,{},{headers:c}),h=new URL(i.url+f.url),p=h.searchParams.get("token");if(!p)throw new Nl("No token returned by API");return{data:{signedUrl:h.toString(),path:s,token:p},error:null}}catch(l){if(i.shouldThrowOnError)throw l;if(Ot(l))return{data:null,error:l};throw l}}async update(s,a,i){return this.uploadOrUpdate("PUT",s,a,i)}async move(s,a,i){var l=this;try{return{data:await Xn(l.fetch,`${l.url}/object/move`,{bucketId:l.bucketId,sourceKey:s,destinationKey:a,destinationBucket:i?.destinationBucket},{headers:l.headers}),error:null}}catch(c){if(l.shouldThrowOnError)throw c;if(Ot(c))return{data:null,error:c};throw c}}async copy(s,a,i){var l=this;try{return{data:{path:(await Xn(l.fetch,`${l.url}/object/copy`,{bucketId:l.bucketId,sourceKey:s,destinationKey:a,destinationBucket:i?.destinationBucket},{headers:l.headers})).Key},error:null}}catch(c){if(l.shouldThrowOnError)throw c;if(Ot(c))return{data:null,error:c};throw c}}async createSignedUrl(s,a,i){var l=this;try{let c=l._getFinalPath(s),f=await Xn(l.fetch,`${l.url}/object/sign/${c}`,Ce({expiresIn:a},i?.transform?{transform:i.transform}:{}),{headers:l.headers});const h=i?.download?`&download=${i.download===!0?"":i.download}`:"";return f={signedUrl:encodeURI(`${l.url}${f.signedURL}${h}`)},{data:f,error:null}}catch(c){if(l.shouldThrowOnError)throw c;if(Ot(c))return{data:null,error:c};throw c}}async createSignedUrls(s,a,i){var l=this;try{const c=await Xn(l.fetch,`${l.url}/object/sign/${l.bucketId}`,{expiresIn:a,paths:s},{headers:l.headers}),f=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:c.map(h=>Ce(Ce({},h),{},{signedUrl:h.signedURL?encodeURI(`${l.url}${h.signedURL}${f}`):null})),error:null}}catch(c){if(l.shouldThrowOnError)throw c;if(Ot(c))return{data:null,error:c};throw c}}download(s,a){const i=typeof a?.transform<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString(a?.transform||{}),c=l?`?${l}`:"",f=this._getFinalPath(s),h=()=>cs(this.fetch,`${this.url}/${i}/${f}${c}`,{headers:this.headers,noResolveJson:!0});return new y0(h,this.shouldThrowOnError)}async info(s){var a=this;const i=a._getFinalPath(s);try{return{data:fc(await cs(a.fetch,`${a.url}/object/info/${i}`,{headers:a.headers})),error:null}}catch(l){if(a.shouldThrowOnError)throw l;if(Ot(l))return{data:null,error:l};throw l}}async exists(s){var a=this;const i=a._getFinalPath(s);try{return await h0(a.fetch,`${a.url}/object/${i}`,{headers:a.headers}),{data:!0,error:null}}catch(l){if(a.shouldThrowOnError)throw l;if(Ot(l)&&l instanceof cc){const c=l.originalError;if([400,404].includes(c?.status))return{data:!1,error:l}}throw l}}getPublicUrl(s,a){const i=this._getFinalPath(s),l=[],c=a?.download?`download=${a.download===!0?"":a.download}`:"";c!==""&&l.push(c);const f=typeof a?.transform<"u"?"render/image":"object",h=this.transformOptsToQueryString(a?.transform||{});h!==""&&l.push(h);let p=l.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${i}${p}`)}}}async remove(s){var a=this;try{return{data:await _c(a.fetch,`${a.url}/object/${a.bucketId}`,{prefixes:s},{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Ot(i))return{data:null,error:i};throw i}}async list(s,a,i){var l=this;try{const c=Ce(Ce(Ce({},g0),a),{},{prefix:s||""});return{data:await Xn(l.fetch,`${l.url}/object/list/${l.bucketId}`,c,{headers:l.headers},i),error:null}}catch(c){if(l.shouldThrowOnError)throw c;if(Ot(c))return{data:null,error:c};throw c}}async listV2(s,a){var i=this;try{const l=Ce({},s);return{data:await Xn(i.fetch,`${i.url}/object/list-v2/${i.bucketId}`,l,{headers:i.headers},a),error:null}}catch(l){if(i.shouldThrowOnError)throw l;if(Ot(l))return{data:null,error:l};throw l}}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const a=[];return s.width&&a.push(`width=${s.width}`),s.height&&a.push(`height=${s.height}`),s.resize&&a.push(`resize=${s.resize}`),s.format&&a.push(`format=${s.format}`),s.quality&&a.push(`quality=${s.quality}`),a.join("&")}};const Qm="2.89.0",Jm={"X-Client-Info":`storage-js/${Qm}`};var v0=class{constructor(s,a={},i,l){this.shouldThrowOnError=!1;const c=new URL(s);l?.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href.replace(/\/$/,""),this.headers=Ce(Ce({},Jm),a),this.fetch=bc(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(s){var a=this;try{const i=a.listBucketOptionsToQueryString(s);return{data:await cs(a.fetch,`${a.url}/bucket${i}`,{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Ot(i))return{data:null,error:i};throw i}}async getBucket(s){var a=this;try{return{data:await cs(a.fetch,`${a.url}/bucket/${s}`,{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Ot(i))return{data:null,error:i};throw i}}async createBucket(s,a={public:!1}){var i=this;try{return{data:await Xn(i.fetch,`${i.url}/bucket`,{id:s,name:s,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:i.headers}),error:null}}catch(l){if(i.shouldThrowOnError)throw l;if(Ot(l))return{data:null,error:l};throw l}}async updateBucket(s,a){var i=this;try{return{data:await dc(i.fetch,`${i.url}/bucket/${s}`,{id:s,name:s,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:i.headers}),error:null}}catch(l){if(i.shouldThrowOnError)throw l;if(Ot(l))return{data:null,error:l};throw l}}async emptyBucket(s){var a=this;try{return{data:await Xn(a.fetch,`${a.url}/bucket/${s}/empty`,{},{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Ot(i))return{data:null,error:i};throw i}}async deleteBucket(s){var a=this;try{return{data:await _c(a.fetch,`${a.url}/bucket/${s}`,{},{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Ot(i))return{data:null,error:i};throw i}}listBucketOptionsToQueryString(s){const a={};return s&&("limit"in s&&(a.limit=String(s.limit)),"offset"in s&&(a.offset=String(s.offset)),s.search&&(a.search=s.search),s.sortColumn&&(a.sortColumn=s.sortColumn),s.sortOrder&&(a.sortOrder=s.sortOrder)),Object.keys(a).length>0?"?"+new URLSearchParams(a).toString():""}},b0=class{constructor(s,a={},i){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Ce(Ce({},Jm),a),this.fetch=bc(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(s){var a=this;try{return{data:await Xn(a.fetch,`${a.url}/bucket`,{name:s},{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Ot(i))return{data:null,error:i};throw i}}async listBuckets(s){var a=this;try{const i=new URLSearchParams;s?.limit!==void 0&&i.set("limit",s.limit.toString()),s?.offset!==void 0&&i.set("offset",s.offset.toString()),s?.sortColumn&&i.set("sortColumn",s.sortColumn),s?.sortOrder&&i.set("sortOrder",s.sortOrder),s?.search&&i.set("search",s.search);const l=i.toString(),c=l?`${a.url}/bucket?${l}`:`${a.url}/bucket`;return{data:await cs(a.fetch,c,{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Ot(i))return{data:null,error:i};throw i}}async deleteBucket(s){var a=this;try{return{data:await _c(a.fetch,`${a.url}/bucket/${s}`,{},{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Ot(i))return{data:null,error:i};throw i}}from(s){var a=this;if(!l0(s))throw new Nl("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const i=new a0({baseUrl:this.url,catalogName:s,auth:{type:"custom",getHeaders:async()=>a.headers},fetch:this.fetch}),l=this.shouldThrowOnError;return new Proxy(i,{get(c,f){const h=c[f];return typeof h!="function"?h:async(...p)=>{try{return{data:await h.apply(c,p),error:null}}catch(y){if(l)throw y;return{data:null,error:y}}}}})}};const wc={"X-Client-Info":`storage-js/${Qm}`,"Content-Type":"application/json"};var Wm=class extends Error{constructor(s){super(s),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function On(s){return typeof s=="object"&&s!==null&&"__isStorageVectorsError"in s}var ec=class extends Wm{constructor(s,a,i){super(s),this.name="StorageVectorsApiError",this.status=a,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},_0=class extends Wm{constructor(s,a){super(s),this.name="StorageVectorsUnknownError",this.originalError=a}};const Sc=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),w0=s=>{if(typeof s!="object"||s===null)return!1;const a=Object.getPrototypeOf(s);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},Am=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),S0=async(s,a,i)=>{if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!i?.noResolveJson){const l=s.status||500,c=s;if(typeof c.json=="function")c.json().then(f=>{const h=f?.statusCode||f?.code||l+"";a(new ec(Am(f),l,h))}).catch(()=>{const f=l+"";a(new ec(c.statusText||`HTTP ${l} error`,l,f))});else{const f=l+"";a(new ec(c.statusText||`HTTP ${l} error`,l,f))}}else a(new _0(Am(s),s))},x0=(s,a,i,l)=>{const c={method:s,headers:a?.headers||{}};return l?(w0(l)?(c.headers=Ce({"Content-Type":"application/json"},a?.headers),c.body=JSON.stringify(l)):c.body=l,Ce(Ce({},c),i)):c};async function E0(s,a,i,l,c,f){return new Promise((h,p)=>{s(i,x0(a,l,c,f)).then(y=>{if(!y.ok)throw y;if(l?.noResolveJson)return y;const v=y.headers.get("content-type");return!v||!v.includes("application/json")?{}:y.json()}).then(y=>h(y)).catch(y=>S0(y,p,l))})}async function Cn(s,a,i,l,c){return E0(s,"POST",a,l,c,i)}var T0=class{constructor(s,a={},i){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Ce(Ce({},wc),a),this.fetch=Sc(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(s){var a=this;try{return{data:await Cn(a.fetch,`${a.url}/CreateIndex`,s,{headers:a.headers})||{},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(On(i))return{data:null,error:i};throw i}}async getIndex(s,a){var i=this;try{return{data:await Cn(i.fetch,`${i.url}/GetIndex`,{vectorBucketName:s,indexName:a},{headers:i.headers}),error:null}}catch(l){if(i.shouldThrowOnError)throw l;if(On(l))return{data:null,error:l};throw l}}async listIndexes(s){var a=this;try{return{data:await Cn(a.fetch,`${a.url}/ListIndexes`,s,{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(On(i))return{data:null,error:i};throw i}}async deleteIndex(s,a){var i=this;try{return{data:await Cn(i.fetch,`${i.url}/DeleteIndex`,{vectorBucketName:s,indexName:a},{headers:i.headers})||{},error:null}}catch(l){if(i.shouldThrowOnError)throw l;if(On(l))return{data:null,error:l};throw l}}},A0=class{constructor(s,a={},i){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Ce(Ce({},wc),a),this.fetch=Sc(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(s){var a=this;try{if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Cn(a.fetch,`${a.url}/PutVectors`,s,{headers:a.headers})||{},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(On(i))return{data:null,error:i};throw i}}async getVectors(s){var a=this;try{return{data:await Cn(a.fetch,`${a.url}/GetVectors`,s,{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(On(i))return{data:null,error:i};throw i}}async listVectors(s){var a=this;try{if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return{data:await Cn(a.fetch,`${a.url}/ListVectors`,s,{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(On(i))return{data:null,error:i};throw i}}async queryVectors(s){var a=this;try{return{data:await Cn(a.fetch,`${a.url}/QueryVectors`,s,{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(On(i))return{data:null,error:i};throw i}}async deleteVectors(s){var a=this;try{if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Cn(a.fetch,`${a.url}/DeleteVectors`,s,{headers:a.headers})||{},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(On(i))return{data:null,error:i};throw i}}},O0=class{constructor(s,a={},i){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Ce(Ce({},wc),a),this.fetch=Sc(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(s){var a=this;try{return{data:await Cn(a.fetch,`${a.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:a.headers})||{},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(On(i))return{data:null,error:i};throw i}}async getBucket(s){var a=this;try{return{data:await Cn(a.fetch,`${a.url}/GetVectorBucket`,{vectorBucketName:s},{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(On(i))return{data:null,error:i};throw i}}async listBuckets(s={}){var a=this;try{return{data:await Cn(a.fetch,`${a.url}/ListVectorBuckets`,s,{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(On(i))return{data:null,error:i};throw i}}async deleteBucket(s){var a=this;try{return{data:await Cn(a.fetch,`${a.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:a.headers})||{},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(On(i))return{data:null,error:i};throw i}}},C0=class extends O0{constructor(s,a={}){super(s,a.headers||{},a.fetch)}from(s){return new j0(this.url,this.headers,s,this.fetch)}async createBucket(s){var a=()=>super.createBucket,i=this;return a().call(i,s)}async getBucket(s){var a=()=>super.getBucket,i=this;return a().call(i,s)}async listBuckets(s={}){var a=()=>super.listBuckets,i=this;return a().call(i,s)}async deleteBucket(s){var a=()=>super.deleteBucket,i=this;return a().call(i,s)}},j0=class extends T0{constructor(s,a,i,l){super(s,a,l),this.vectorBucketName=i}async createIndex(s){var a=()=>super.createIndex,i=this;return a().call(i,Ce(Ce({},s),{},{vectorBucketName:i.vectorBucketName}))}async listIndexes(s={}){var a=()=>super.listIndexes,i=this;return a().call(i,Ce(Ce({},s),{},{vectorBucketName:i.vectorBucketName}))}async getIndex(s){var a=()=>super.getIndex,i=this;return a().call(i,i.vectorBucketName,s)}async deleteIndex(s){var a=()=>super.deleteIndex,i=this;return a().call(i,i.vectorBucketName,s)}index(s){return new k0(this.url,this.headers,this.vectorBucketName,s,this.fetch)}},k0=class extends A0{constructor(s,a,i,l,c){super(s,a,c),this.vectorBucketName=i,this.indexName=l}async putVectors(s){var a=()=>super.putVectors,i=this;return a().call(i,Ce(Ce({},s),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async getVectors(s){var a=()=>super.getVectors,i=this;return a().call(i,Ce(Ce({},s),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async listVectors(s={}){var a=()=>super.listVectors,i=this;return a().call(i,Ce(Ce({},s),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async queryVectors(s){var a=()=>super.queryVectors,i=this;return a().call(i,Ce(Ce({},s),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async deleteVectors(s){var a=()=>super.deleteVectors,i=this;return a().call(i,Ce(Ce({},s),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}},R0=class extends v0{constructor(s,a={},i,l){super(s,a,i,l)}from(s){return new p0(this.url,this.headers,s,this.fetch)}get vectors(){return new C0(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new b0(this.url+"/iceberg",this.headers,this.fetch)}};const Zm="2.89.0",ci=30*1e3,hc=3,tc=hc*ci,D0="http://localhost:9999",N0="supabase.auth.token",U0={"X-Client-Info":`gotrue-js/${Zm}`},mc="X-Supabase-Api-Version",Fm={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},z0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,M0=600*1e3;class fs extends Error{constructor(a,i,l){super(a),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=l}}function be(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class B0 extends fs{constructor(a,i,l){super(a,i,l),this.name="AuthApiError",this.status=i,this.code=l}}function L0(s){return be(s)&&s.name==="AuthApiError"}class _r extends fs{constructor(a,i){super(a),this.name="AuthUnknownError",this.originalError=i}}class xa extends fs{constructor(a,i,l,c){super(a,l,c),this.name=i,this.status=l}}class An extends xa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function q0(s){return be(s)&&s.name==="AuthSessionMissingError"}class ri extends xa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ol extends xa{constructor(a){super(a,"AuthInvalidCredentialsError",400,void 0)}}class Cl extends xa{constructor(a,i=null){super(a,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function H0(s){return be(s)&&s.name==="AuthImplicitGrantRedirectError"}class Om extends xa{constructor(a,i=null){super(a,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class $0 extends xa{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class yc extends xa{constructor(a,i){super(a,"AuthRetryableFetchError",i,void 0)}}function nc(s){return be(s)&&s.name==="AuthRetryableFetchError"}class Cm extends xa{constructor(a,i,l){super(a,"AuthWeakPasswordError",i,"weak_password"),this.reasons=l}}class gc extends xa{constructor(a){super(a,"AuthInvalidJwtError",400,"invalid_jwt")}}const jl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),jm=` 	
\r=`.split(""),G0=(()=>{const s=new Array(128);for(let a=0;a<s.length;a+=1)s[a]=-1;for(let a=0;a<jm.length;a+=1)s[jm[a].charCodeAt(0)]=-2;for(let a=0;a<jl.length;a+=1)s[jl[a].charCodeAt(0)]=a;return s})();function km(s,a,i){if(s!==null)for(a.queue=a.queue<<8|s,a.queuedBits+=8;a.queuedBits>=6;){const l=a.queue>>a.queuedBits-6&63;i(jl[l]),a.queuedBits-=6}else if(a.queuedBits>0)for(a.queue=a.queue<<6-a.queuedBits,a.queuedBits=6;a.queuedBits>=6;){const l=a.queue>>a.queuedBits-6&63;i(jl[l]),a.queuedBits-=6}}function Pm(s,a,i){const l=G0[s];if(l>-1)for(a.queue=a.queue<<6|l,a.queuedBits+=6;a.queuedBits>=8;)i(a.queue>>a.queuedBits-8&255),a.queuedBits-=8;else{if(l===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function Rm(s){const a=[],i=h=>{a.push(String.fromCodePoint(h))},l={utf8seq:0,codepoint:0},c={queue:0,queuedBits:0},f=h=>{K0(h,l,i)};for(let h=0;h<s.length;h+=1)Pm(s.charCodeAt(h),c,f);return a.join("")}function V0(s,a){if(s<=127){a(s);return}else if(s<=2047){a(192|s>>6),a(128|s&63);return}else if(s<=65535){a(224|s>>12),a(128|s>>6&63),a(128|s&63);return}else if(s<=1114111){a(240|s>>18),a(128|s>>12&63),a(128|s>>6&63),a(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function Y0(s,a){for(let i=0;i<s.length;i+=1){let l=s.charCodeAt(i);if(l>55295&&l<=56319){const c=(l-55296)*1024&65535;l=(s.charCodeAt(i+1)-56320&65535|c)+65536,i+=1}V0(l,a)}}function K0(s,a,i){if(a.utf8seq===0){if(s<=127){i(s);return}for(let l=1;l<6;l+=1)if((s>>7-l&1)===0){a.utf8seq=l;break}if(a.utf8seq===2)a.codepoint=s&31;else if(a.utf8seq===3)a.codepoint=s&15;else if(a.utf8seq===4)a.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");a.utf8seq-=1}else if(a.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");a.codepoint=a.codepoint<<6|s&63,a.utf8seq-=1,a.utf8seq===0&&i(a.codepoint)}}function hi(s){const a=[],i={queue:0,queuedBits:0},l=c=>{a.push(c)};for(let c=0;c<s.length;c+=1)Pm(s.charCodeAt(c),i,l);return new Uint8Array(a)}function I0(s){const a=[];return Y0(s,i=>a.push(i)),new Uint8Array(a)}function wr(s){const a=[],i={queue:0,queuedBits:0},l=c=>{a.push(c)};return s.forEach(c=>km(c,i,l)),km(null,i,l),a.join("")}function X0(s){return Math.round(Date.now()/1e3)+s}function Q0(){return Symbol("auth-callback")}const tn=()=>typeof window<"u"&&typeof document<"u",gr={tested:!1,writable:!1},ey=()=>{if(!tn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(gr.tested)return gr.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),gr.tested=!0,gr.writable=!0}catch{gr.tested=!0,gr.writable=!1}return gr.writable};function J0(s){const a={},i=new URL(s);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((c,f)=>{a[f]=c})}catch{}return i.searchParams.forEach((l,c)=>{a[c]=l}),a}const ty=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),W0=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",fi=async(s,a,i)=>{await s.setItem(a,JSON.stringify(i))},pr=async(s,a)=>{const i=await s.getItem(a);if(!i)return null;try{return JSON.parse(i)}catch{return i}},en=async(s,a)=>{await s.removeItem(a)};class Ul{constructor(){this.promise=new Ul.promiseConstructor((a,i)=>{this.resolve=a,this.reject=i})}}Ul.promiseConstructor=Promise;function ac(s){const a=s.split(".");if(a.length!==3)throw new gc("Invalid JWT structure");for(let l=0;l<a.length;l++)if(!z0.test(a[l]))throw new gc("JWT not in base64url format");return{header:JSON.parse(Rm(a[0])),payload:JSON.parse(Rm(a[1])),signature:hi(a[2]),raw:{header:a[0],payload:a[1]}}}async function Z0(s){return await new Promise(a=>{setTimeout(()=>a(null),s)})}function F0(s,a){return new Promise((l,c)=>{(async()=>{for(let f=0;f<1/0;f++)try{const h=await s(f);if(!a(f,null,h)){l(h);return}}catch(h){if(!a(f,h)){c(h);return}}})()})}function P0(s){return("0"+s.toString(16)).substr(-2)}function ev(){const a=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",l=i.length;let c="";for(let f=0;f<56;f++)c+=i.charAt(Math.floor(Math.random()*l));return c}return crypto.getRandomValues(a),Array.from(a,P0).join("")}async function tv(s){const i=new TextEncoder().encode(s),l=await crypto.subtle.digest("SHA-256",i),c=new Uint8Array(l);return Array.from(c).map(f=>String.fromCharCode(f)).join("")}async function nv(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const i=await tv(s);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ii(s,a,i=!1){const l=ev();let c=l;i&&(c+="/PASSWORD_RECOVERY"),await fi(s,`${a}-code-verifier`,c);const f=await nv(l);return[f,l===f?"plain":"s256"]}const av=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function rv(s){const a=s.headers.get(mc);if(!a||!a.match(av))return null;try{return new Date(`${a}T00:00:00.0Z`)}catch{return null}}function iv(s){if(!s)throw new Error("Missing exp claim");const a=Math.floor(Date.now()/1e3);if(s<=a)throw new Error("JWT has expired")}function sv(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const lv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function si(s){if(!lv.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function rc(){const s={};return new Proxy(s,{get:(a,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const l=i.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(a,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(a,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ov(s,a){return new Proxy(s,{get:(i,l,c)=>{if(l==="__isInsecureUserWarningProxy")return!0;if(typeof l=="symbol"){const f=l.toString();if(f==="Symbol(Symbol.toPrimitive)"||f==="Symbol(Symbol.toStringTag)"||f==="Symbol(util.inspect.custom)"||f==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(i,l,c)}return!a.value&&typeof l=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a.value=!0),Reflect.get(i,l,c)}})}function Dm(s){return JSON.parse(JSON.stringify(s))}const vr=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),uv=[502,503,504];async function Nm(s){var a;if(!W0(s))throw new yc(vr(s),0);if(uv.includes(s.status))throw new yc(vr(s),s.status);let i;try{i=await s.json()}catch(f){throw new _r(vr(f),f)}let l;const c=rv(s);if(c&&c.getTime()>=Fm["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?l=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(l=i.error_code),l){if(l==="weak_password")throw new Cm(vr(i),s.status,((a=i.weak_password)===null||a===void 0?void 0:a.reasons)||[]);if(l==="session_not_found")throw new An}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((f,h)=>f&&typeof h=="string",!0))throw new Cm(vr(i),s.status,i.weak_password.reasons);throw new B0(vr(i),s.status||500,l)}const cv=(s,a,i,l)=>{const c={method:s,headers:a?.headers||{}};return s==="GET"?c:(c.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},a?.headers),c.body=JSON.stringify(l),Object.assign(Object.assign({},c),i))};async function Oe(s,a,i,l){var c;const f=Object.assign({},l?.headers);f[mc]||(f[mc]=Fm["2024-01-01"].name),l?.jwt&&(f.Authorization=`Bearer ${l.jwt}`);const h=(c=l?.query)!==null&&c!==void 0?c:{};l?.redirectTo&&(h.redirect_to=l.redirectTo);const p=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",y=await fv(s,a,i+p,{headers:f,noResolveJson:l?.noResolveJson},{},l?.body);return l?.xform?l?.xform(y):{data:Object.assign({},y),error:null}}async function fv(s,a,i,l,c,f){const h=cv(a,l,c,f);let p;try{p=await s(i,Object.assign({},h))}catch(y){throw console.error(y),new yc(vr(y),0)}if(p.ok||await Nm(p),l?.noResolveJson)return p;try{return await p.json()}catch(y){await Nm(y)}}function In(s){var a;let i=null;mv(s)&&(i=Object.assign({},s),s.expires_at||(i.expires_at=X0(s.expires_in)));const l=(a=s.user)!==null&&a!==void 0?a:s;return{data:{session:i,user:l},error:null}}function Um(s){const a=In(s);return!a.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0)&&(a.data.weak_password=s.weak_password),a}function Za(s){var a;return{data:{user:(a=s.user)!==null&&a!==void 0?a:s},error:null}}function dv(s){return{data:s,error:null}}function hv(s){const{action_link:a,email_otp:i,hashed_token:l,redirect_to:c,verification_type:f}=s,h=Dl(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:a,email_otp:i,hashed_token:l,redirect_to:c,verification_type:f},y=Object.assign({},h);return{data:{properties:p,user:y},error:null}}function zm(s){return s}function mv(s){return s.access_token&&s.refresh_token&&s.expires_in}const ic=["global","local","others"];class yv{constructor({url:a="",headers:i={},fetch:l}){this.url=a,this.headers=i,this.fetch=ty(l),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(a,i=ic[0]){if(ic.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ic.join(", ")}`);try{return await Oe(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:a,noResolveJson:!0}),{data:null,error:null}}catch(l){if(be(l))return{data:null,error:l};throw l}}async inviteUserByEmail(a,i={}){try{return await Oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:a,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:Za})}catch(l){if(be(l))return{data:{user:null},error:l};throw l}}async generateLink(a){try{const{options:i}=a,l=Dl(a,["options"]),c=Object.assign(Object.assign({},l),i);return"newEmail"in l&&(c.new_email=l?.newEmail,delete c.newEmail),await Oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:c,headers:this.headers,xform:hv,redirectTo:i?.redirectTo})}catch(i){if(be(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(a){try{return await Oe(this.fetch,"POST",`${this.url}/admin/users`,{body:a,headers:this.headers,xform:Za})}catch(i){if(be(i))return{data:{user:null},error:i};throw i}}async listUsers(a){var i,l,c,f,h,p,y;try{const v={nextPage:null,lastPage:0,total:0},x=await Oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(i=a?.page)===null||i===void 0?void 0:i.toString())!==null&&l!==void 0?l:"",per_page:(f=(c=a?.perPage)===null||c===void 0?void 0:c.toString())!==null&&f!==void 0?f:""},xform:zm});if(x.error)throw x.error;const O=await x.json(),D=(h=x.headers.get("x-total-count"))!==null&&h!==void 0?h:0,k=(y=(p=x.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&y!==void 0?y:[];return k.length>0&&(k.forEach(M=>{const I=parseInt(M.split(";")[0].split("=")[1].substring(0,1)),F=JSON.parse(M.split(";")[1].split("=")[1]);v[`${F}Page`]=I}),v.total=parseInt(D)),{data:Object.assign(Object.assign({},O),v),error:null}}catch(v){if(be(v))return{data:{users:[]},error:v};throw v}}async getUserById(a){si(a);try{return await Oe(this.fetch,"GET",`${this.url}/admin/users/${a}`,{headers:this.headers,xform:Za})}catch(i){if(be(i))return{data:{user:null},error:i};throw i}}async updateUserById(a,i){si(a);try{return await Oe(this.fetch,"PUT",`${this.url}/admin/users/${a}`,{body:i,headers:this.headers,xform:Za})}catch(l){if(be(l))return{data:{user:null},error:l};throw l}}async deleteUser(a,i=!1){si(a);try{return await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${a}`,{headers:this.headers,body:{should_soft_delete:i},xform:Za})}catch(l){if(be(l))return{data:{user:null},error:l};throw l}}async _listFactors(a){si(a.userId);try{const{data:i,error:l}=await Oe(this.fetch,"GET",`${this.url}/admin/users/${a.userId}/factors`,{headers:this.headers,xform:c=>({data:{factors:c},error:null})});return{data:i,error:l}}catch(i){if(be(i))return{data:null,error:i};throw i}}async _deleteFactor(a){si(a.userId),si(a.id);try{return{data:await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${a.userId}/factors/${a.id}`,{headers:this.headers}),error:null}}catch(i){if(be(i))return{data:null,error:i};throw i}}async _listOAuthClients(a){var i,l,c,f,h,p,y;try{const v={nextPage:null,lastPage:0,total:0},x=await Oe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(i=a?.page)===null||i===void 0?void 0:i.toString())!==null&&l!==void 0?l:"",per_page:(f=(c=a?.perPage)===null||c===void 0?void 0:c.toString())!==null&&f!==void 0?f:""},xform:zm});if(x.error)throw x.error;const O=await x.json(),D=(h=x.headers.get("x-total-count"))!==null&&h!==void 0?h:0,k=(y=(p=x.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&y!==void 0?y:[];return k.length>0&&(k.forEach(M=>{const I=parseInt(M.split(";")[0].split("=")[1].substring(0,1)),F=JSON.parse(M.split(";")[1].split("=")[1]);v[`${F}Page`]=I}),v.total=parseInt(D)),{data:Object.assign(Object.assign({},O),v),error:null}}catch(v){if(be(v))return{data:{clients:[]},error:v};throw v}}async _createOAuthClient(a){try{return await Oe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:a,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(be(i))return{data:null,error:i};throw i}}async _getOAuthClient(a){try{return await Oe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(be(i))return{data:null,error:i};throw i}}async _updateOAuthClient(a,i){try{return await Oe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${a}`,{body:i,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(be(l))return{data:null,error:l};throw l}}async _deleteOAuthClient(a){try{return await Oe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(i){if(be(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(a){try{return await Oe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${a}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(be(i))return{data:null,error:i};throw i}}}function Mm(s={}){return{getItem:a=>s[a]||null,setItem:(a,i)=>{s[a]=i},removeItem:a=>{delete s[a]}}}const li={debug:!!(globalThis&&ey()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ny extends Error{constructor(a){super(a),this.isAcquireTimeout=!0}}class gv extends ny{}async function pv(s,a,i){li.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,a);const l=new globalThis.AbortController;return a>0&&setTimeout(()=>{l.abort(),li.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},a),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,a===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:l.signal},async c=>{if(c){li.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,c.name);try{return await i()}finally{li.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,c.name)}}else{if(a===0)throw li.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new gv(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(li.debug)try{const f=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(f,null,"  "))}catch(f){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",f)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}function vv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ay(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function bv(s){return parseInt(s,16)}function _v(s){const a=new TextEncoder().encode(s);return"0x"+Array.from(a,l=>l.toString(16).padStart(2,"0")).join("")}function wv(s){var a;const{chainId:i,domain:l,expirationTime:c,issuedAt:f=new Date,nonce:h,notBefore:p,requestId:y,resources:v,scheme:x,uri:O,version:D}=s;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!l)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!O)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(D!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${D}`);if(!((a=s.statement)===null||a===void 0)&&a.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const k=ay(s.address),M=x?`${x}://${l}`:l,I=s.statement?`${s.statement}
`:"",F=`${M} wants you to sign in with your Ethereum account:
${k}

${I}`;let Z=`URI: ${O}
Version: ${D}
Chain ID: ${i}${h?`
Nonce: ${h}`:""}
Issued At: ${f.toISOString()}`;if(c&&(Z+=`
Expiration Time: ${c.toISOString()}`),p&&(Z+=`
Not Before: ${p.toISOString()}`),y&&(Z+=`
Request ID: ${y}`),v){let te=`
Resources:`;for(const X of v){if(!X||typeof X!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${X}`);te+=`
- ${X}`}Z+=te}return`${F}
${Z}`}class $t extends Error{constructor({message:a,code:i,cause:l,name:c}){var f;super(a,{cause:l}),this.__isWebAuthnError=!0,this.name=(f=c??(l instanceof Error?l.name:void 0))!==null&&f!==void 0?f:"Unknown Error",this.code=i}}class kl extends $t{constructor(a,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:a}),this.name="WebAuthnUnknownError",this.originalError=i}}function Sv({error:s,options:a}){var i,l,c;const{publicKey:f}=a;if(!f)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(a.signal instanceof AbortSignal)return new $t({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((i=f.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new $t({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(a.mediation==="conditional"&&((l=f.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new $t({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((c=f.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new $t({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new $t({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new $t({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return f.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new $t({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new $t({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const h=window.location.hostname;if(ry(h)){if(f.rp.id!==h)return new $t({message:`The RP ID "${f.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new $t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(f.user.id.byteLength<1||f.user.id.byteLength>64)return new $t({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new $t({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new $t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function xv({error:s,options:a}){const{publicKey:i}=a;if(!i)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(a.signal instanceof AbortSignal)return new $t({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new $t({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const l=window.location.hostname;if(ry(l)){if(i.rpId!==l)return new $t({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new $t({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new $t({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new $t({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class Ev{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const a=new AbortController;return this.controller=a,a.signal}cancelCeremony(){if(this.controller){const a=new Error("Manually cancelling existing WebAuthn API call");a.name="AbortError",this.controller.abort(a),this.controller=void 0}}}const Tv=new Ev;function Av(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:a,user:i,excludeCredentials:l}=s,c=Dl(s,["challenge","user","excludeCredentials"]),f=hi(a).buffer,h=Object.assign(Object.assign({},i),{id:hi(i.id).buffer}),p=Object.assign(Object.assign({},c),{challenge:f,user:h});if(l&&l.length>0){p.excludeCredentials=new Array(l.length);for(let y=0;y<l.length;y++){const v=l[y];p.excludeCredentials[y]=Object.assign(Object.assign({},v),{id:hi(v.id).buffer,type:v.type||"public-key",transports:v.transports})}}return p}function Ov(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:a,allowCredentials:i}=s,l=Dl(s,["challenge","allowCredentials"]),c=hi(a).buffer,f=Object.assign(Object.assign({},l),{challenge:c});if(i&&i.length>0){f.allowCredentials=new Array(i.length);for(let h=0;h<i.length;h++){const p=i[h];f.allowCredentials[h]=Object.assign(Object.assign({},p),{id:hi(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return f}function Cv(s){var a;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const i=s;return{id:s.id,rawId:s.id,response:{attestationObject:wr(new Uint8Array(s.response.attestationObject)),clientDataJSON:wr(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(a=i.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function jv(s){var a;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const i=s,l=s.getClientExtensionResults(),c=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:wr(new Uint8Array(c.authenticatorData)),clientDataJSON:wr(new Uint8Array(c.clientDataJSON)),signature:wr(new Uint8Array(c.signature)),userHandle:c.userHandle?wr(new Uint8Array(c.userHandle)):void 0},type:"public-key",clientExtensionResults:l,authenticatorAttachment:(a=i.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function ry(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function Bm(){var s,a;return!!(tn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator?.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((a=navigator?.credentials)===null||a===void 0?void 0:a.get)=="function")}async function kv(s){try{const a=await navigator.credentials.create(s);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new kl("Browser returned unexpected credential type",a)}:{data:null,error:new kl("Empty credential response",a)}}catch(a){return{data:null,error:Sv({error:a,options:s})}}}async function Rv(s){try{const a=await navigator.credentials.get(s);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new kl("Browser returned unexpected credential type",a)}:{data:null,error:new kl("Empty credential response",a)}}catch(a){return{data:null,error:xv({error:a,options:s})}}}const Dv={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Nv={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Rl(...s){const a=c=>c!==null&&typeof c=="object"&&!Array.isArray(c),i=c=>c instanceof ArrayBuffer||ArrayBuffer.isView(c),l={};for(const c of s)if(c)for(const f in c){const h=c[f];if(h!==void 0)if(Array.isArray(h))l[f]=h;else if(i(h))l[f]=h;else if(a(h)){const p=l[f];a(p)?l[f]=Rl(p,h):l[f]=Rl(h)}else l[f]=h}return l}function Uv(s,a){return Rl(Dv,s,a||{})}function zv(s,a){return Rl(Nv,s,a||{})}class Mv{constructor(a){this.client=a,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(a){return this.client.mfa.enroll(Object.assign(Object.assign({},a),{factorType:"webauthn"}))}async _challenge({factorId:a,webauthn:i,friendlyName:l,signal:c},f){try{const{data:h,error:p}=await this.client.mfa.challenge({factorId:a,webauthn:i});if(!h)return{data:null,error:p};const y=c??Tv.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:v}=h.webauthn.credential_options.publicKey;v.name||(v.name=`${v.id}:${l}`),v.displayName||(v.displayName=v.name)}switch(h.webauthn.type){case"create":{const v=Uv(h.webauthn.credential_options.publicKey,f?.create),{data:x,error:O}=await kv({publicKey:v,signal:y});return x?{data:{factorId:a,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:x}},error:null}:{data:null,error:O}}case"request":{const v=zv(h.webauthn.credential_options.publicKey,f?.request),{data:x,error:O}=await Rv(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:v,signal:y}));return x?{data:{factorId:a,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:x}},error:null}:{data:null,error:O}}}}catch(h){return be(h)?{data:null,error:h}:{data:null,error:new _r("Unexpected error in challenge",h)}}}async _verify({challengeId:a,factorId:i,webauthn:l}){return this.client.mfa.verify({factorId:i,challengeId:a,webauthn:l})}async _authenticate({factorId:a,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},f){if(!i)return{data:null,error:new fs("rpId is required for WebAuthn authentication")};try{if(!Bm())return{data:null,error:new _r("Browser does not support WebAuthn",null)};const{data:h,error:p}=await this.challenge({factorId:a,webauthn:{rpId:i,rpOrigins:l},signal:c},{request:f});if(!h)return{data:null,error:p};const{webauthn:y}=h;return this._verify({factorId:a,challengeId:h.challengeId,webauthn:{type:y.type,rpId:i,rpOrigins:l,credential_response:y.credential_response}})}catch(h){return be(h)?{data:null,error:h}:{data:null,error:new _r("Unexpected error in authenticate",h)}}}async _register({friendlyName:a,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:l=typeof window<"u"?[window.location.origin]:void 0,signal:c}={}},f){if(!i)return{data:null,error:new fs("rpId is required for WebAuthn registration")};try{if(!Bm())return{data:null,error:new _r("Browser does not support WebAuthn",null)};const{data:h,error:p}=await this._enroll({friendlyName:a});if(!h)return await this.client.mfa.listFactors().then(x=>{var O;return(O=x.data)===null||O===void 0?void 0:O.all.find(D=>D.factor_type==="webauthn"&&D.friendly_name===a&&D.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x?.id}):void 0),{data:null,error:p};const{data:y,error:v}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:i,rpOrigins:l},signal:c},{create:f});return y?this._verify({factorId:h.id,challengeId:y.challengeId,webauthn:{rpId:i,rpOrigins:l,type:y.webauthn.type,credential_response:y.webauthn.credential_response}}):{data:null,error:v}}catch(h){return be(h)?{data:null,error:h}:{data:null,error:new _r("Unexpected error in register",h)}}}}vv();const Bv={url:D0,storageKey:N0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:U0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Lm(s,a,i){return await i()}const oi={};class ds{get jwks(){var a,i;return(i=(a=oi[this.storageKey])===null||a===void 0?void 0:a.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(a){oi[this.storageKey]=Object.assign(Object.assign({},oi[this.storageKey]),{jwks:a})}get jwks_cached_at(){var a,i;return(i=(a=oi[this.storageKey])===null||a===void 0?void 0:a.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(a){oi[this.storageKey]=Object.assign(Object.assign({},oi[this.storageKey]),{cachedAt:a})}constructor(a){var i,l,c;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const f=Object.assign(Object.assign({},Bv),a);if(this.storageKey=f.storageKey,this.instanceID=(i=ds.nextInstanceID[this.storageKey])!==null&&i!==void 0?i:0,ds.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!f.debug,typeof f.debug=="function"&&(this.logger=f.debug),this.instanceID>0&&tn()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=f.persistSession,this.autoRefreshToken=f.autoRefreshToken,this.admin=new yv({url:f.url,headers:f.headers,fetch:f.fetch}),this.url=f.url,this.headers=f.headers,this.fetch=ty(f.fetch),this.lock=f.lock||Lm,this.detectSessionInUrl=f.detectSessionInUrl,this.flowType=f.flowType,this.hasCustomAuthorizationHeader=f.hasCustomAuthorizationHeader,this.throwOnError=f.throwOnError,f.lock?this.lock=f.lock:this.persistSession&&tn()&&(!((l=globalThis?.navigator)===null||l===void 0)&&l.locks)?this.lock=pv:this.lock=Lm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Mv(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(f.storage?this.storage=f.storage:ey()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Mm(this.memoryStorage)),f.userStorage&&(this.userStorage=f.userStorage)):(this.memoryStorage={},this.storage=Mm(this.memoryStorage)),tn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(c=this.broadcastChannel)===null||c===void 0||c.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h),await this._notifyAllSubscribers(h.data.event,h.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(a){if(this.throwOnError&&a&&a.error)throw a.error;return a}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Zm}) ${new Date().toISOString()}`}_debug(...a){return this.logDebugMessages&&this.logger(this._logPrefix(),...a),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var a;try{let i={},l="none";if(tn()&&(i=J0(window.location.href),this._isImplicitGrantCallback(i)?l="implicit":await this._isPKCECallback(i)&&(l="pkce")),tn()&&this.detectSessionInUrl&&l!=="none"){const{data:c,error:f}=await this._getSessionFromURL(i,l);if(f){if(this._debug("#_initialize()","error detecting session from URL",f),H0(f)){const y=(a=f.details)===null||a===void 0?void 0:a.code;if(y==="identity_already_exists"||y==="identity_not_found"||y==="single_identity_not_deletable")return{error:f}}return await this._removeSession(),{error:f}}const{session:h,redirectType:p}=c;return this._debug("#_initialize()","detected session in URL",h,"redirect type",p),await this._saveSession(h),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return be(i)?this._returnResult({error:i}):this._returnResult({error:new _r("Unexpected error during initialization",i)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(a){var i,l,c;try{const f=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(l=(i=a?.options)===null||i===void 0?void 0:i.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:(c=a?.options)===null||c===void 0?void 0:c.captchaToken}},xform:In}),{data:h,error:p}=f;if(p||!h)return this._returnResult({data:{user:null,session:null},error:p});const y=h.session,v=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",y)),this._returnResult({data:{user:v,session:y},error:null})}catch(f){if(be(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async signUp(a){var i,l,c;try{let f;if("email"in a){const{email:x,password:O,options:D}=a;let k=null,M=null;this.flowType==="pkce"&&([k,M]=await ii(this.storage,this.storageKey)),f=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:D?.emailRedirectTo,body:{email:x,password:O,data:(i=D?.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:D?.captchaToken},code_challenge:k,code_challenge_method:M},xform:In})}else if("phone"in a){const{phone:x,password:O,options:D}=a;f=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:O,data:(l=D?.data)!==null&&l!==void 0?l:{},channel:(c=D?.channel)!==null&&c!==void 0?c:"sms",gotrue_meta_security:{captcha_token:D?.captchaToken}},xform:In})}else throw new Ol("You must provide either an email or phone number and a password");const{data:h,error:p}=f;if(p||!h)return await en(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:p});const y=h.session,v=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",y)),this._returnResult({data:{user:v,session:y},error:null})}catch(f){if(await en(this.storage,`${this.storageKey}-code-verifier`),be(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async signInWithPassword(a){try{let i;if("email"in a){const{email:f,password:h,options:p}=a;i=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:f,password:h,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Um})}else if("phone"in a){const{phone:f,password:h,options:p}=a;i=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:f,password:h,gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:Um})}else throw new Ol("You must provide either an email or phone number and a password");const{data:l,error:c}=i;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const f=new ri;return this._returnResult({data:{user:null,session:null},error:f})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:c})}catch(i){if(be(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOAuth(a){var i,l,c,f;return await this._handleProviderSignIn(a.provider,{redirectTo:(i=a.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=a.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=a.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:(f=a.options)===null||f===void 0?void 0:f.skipBrowserRedirect})}async exchangeCodeForSession(a){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(a))}async signInWithWeb3(a){const{chain:i}=a;switch(i){case"ethereum":return await this.signInWithEthereum(a);case"solana":return await this.signInWithSolana(a);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(a){var i,l,c,f,h,p,y,v,x,O,D;let k,M;if("message"in a)k=a.message,M=a.signature;else{const{chain:I,wallet:F,statement:Z,options:te}=a;let X;if(tn())if(typeof F=="object")X=F;else{const Ge=window;if("ethereum"in Ge&&typeof Ge.ethereum=="object"&&"request"in Ge.ethereum&&typeof Ge.ethereum.request=="function")X=Ge.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof F!="object"||!te?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");X=F}const le=new URL((i=te?.url)!==null&&i!==void 0?i:window.location.href),ke=await X.request({method:"eth_requestAccounts"}).then(Ge=>Ge).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ke||ke.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const ye=ay(ke[0]);let ce=(l=te?.signInWithEthereum)===null||l===void 0?void 0:l.chainId;if(!ce){const Ge=await X.request({method:"eth_chainId"});ce=bv(Ge)}const Le={domain:le.host,address:ye,statement:Z,uri:le.href,version:"1",chainId:ce,nonce:(c=te?.signInWithEthereum)===null||c===void 0?void 0:c.nonce,issuedAt:(h=(f=te?.signInWithEthereum)===null||f===void 0?void 0:f.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(p=te?.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(y=te?.signInWithEthereum)===null||y===void 0?void 0:y.notBefore,requestId:(v=te?.signInWithEthereum)===null||v===void 0?void 0:v.requestId,resources:(x=te?.signInWithEthereum)===null||x===void 0?void 0:x.resources};k=wv(Le),M=await X.request({method:"personal_sign",params:[_v(k),ye]})}try{const{data:I,error:F}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:k,signature:M},!((O=a.options)===null||O===void 0)&&O.captchaToken?{gotrue_meta_security:{captcha_token:(D=a.options)===null||D===void 0?void 0:D.captchaToken}}:null),xform:In});if(F)throw F;if(!I||!I.session||!I.user){const Z=new ri;return this._returnResult({data:{user:null,session:null},error:Z})}return I.session&&(await this._saveSession(I.session),await this._notifyAllSubscribers("SIGNED_IN",I.session)),this._returnResult({data:Object.assign({},I),error:F})}catch(I){if(be(I))return this._returnResult({data:{user:null,session:null},error:I});throw I}}async signInWithSolana(a){var i,l,c,f,h,p,y,v,x,O,D,k;let M,I;if("message"in a)M=a.message,I=a.signature;else{const{chain:F,wallet:Z,statement:te,options:X}=a;let le;if(tn())if(typeof Z=="object")le=Z;else{const ye=window;if("solana"in ye&&typeof ye.solana=="object"&&("signIn"in ye.solana&&typeof ye.solana.signIn=="function"||"signMessage"in ye.solana&&typeof ye.solana.signMessage=="function"))le=ye.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof Z!="object"||!X?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");le=Z}const ke=new URL((i=X?.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in le&&le.signIn){const ye=await le.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},X?.signInWithSolana),{version:"1",domain:ke.host,uri:ke.href}),te?{statement:te}:null));let ce;if(Array.isArray(ye)&&ye[0]&&typeof ye[0]=="object")ce=ye[0];else if(ye&&typeof ye=="object"&&"signedMessage"in ye&&"signature"in ye)ce=ye;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ce&&"signature"in ce&&(typeof ce.signedMessage=="string"||ce.signedMessage instanceof Uint8Array)&&ce.signature instanceof Uint8Array)M=typeof ce.signedMessage=="string"?ce.signedMessage:new TextDecoder().decode(ce.signedMessage),I=ce.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in le)||typeof le.signMessage!="function"||!("publicKey"in le)||typeof le!="object"||!le.publicKey||!("toBase58"in le.publicKey)||typeof le.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");M=[`${ke.host} wants you to sign in with your Solana account:`,le.publicKey.toBase58(),...te?["",te,""]:[""],"Version: 1",`URI: ${ke.href}`,`Issued At: ${(c=(l=X?.signInWithSolana)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date().toISOString()}`,...!((f=X?.signInWithSolana)===null||f===void 0)&&f.notBefore?[`Not Before: ${X.signInWithSolana.notBefore}`]:[],...!((h=X?.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${X.signInWithSolana.expirationTime}`]:[],...!((p=X?.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${X.signInWithSolana.chainId}`]:[],...!((y=X?.signInWithSolana)===null||y===void 0)&&y.nonce?[`Nonce: ${X.signInWithSolana.nonce}`]:[],...!((v=X?.signInWithSolana)===null||v===void 0)&&v.requestId?[`Request ID: ${X.signInWithSolana.requestId}`]:[],...!((O=(x=X?.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||O===void 0)&&O.length?["Resources",...X.signInWithSolana.resources.map(ce=>`- ${ce}`)]:[]].join(`
`);const ye=await le.signMessage(new TextEncoder().encode(M),"utf8");if(!ye||!(ye instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");I=ye}}try{const{data:F,error:Z}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:M,signature:wr(I)},!((D=a.options)===null||D===void 0)&&D.captchaToken?{gotrue_meta_security:{captcha_token:(k=a.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:In});if(Z)throw Z;if(!F||!F.session||!F.user){const te=new ri;return this._returnResult({data:{user:null,session:null},error:te})}return F.session&&(await this._saveSession(F.session),await this._notifyAllSubscribers("SIGNED_IN",F.session)),this._returnResult({data:Object.assign({},F),error:Z})}catch(F){if(be(F))return this._returnResult({data:{user:null,session:null},error:F});throw F}}async _exchangeCodeForSession(a){const i=await pr(this.storage,`${this.storageKey}-code-verifier`),[l,c]=(i??"").split("/");try{if(!l&&this.flowType==="pkce")throw new $0;const{data:f,error:h}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:a,code_verifier:l},xform:In});if(await en(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!f||!f.session||!f.user){const p=new ri;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:Object.assign(Object.assign({},f),{redirectType:c??null}),error:h})}catch(f){if(await en(this.storage,`${this.storageKey}-code-verifier`),be(f))return this._returnResult({data:{user:null,session:null,redirectType:null},error:f});throw f}}async signInWithIdToken(a){try{const{options:i,provider:l,token:c,access_token:f,nonce:h}=a,p=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:l,id_token:c,access_token:f,nonce:h,gotrue_meta_security:{captcha_token:i?.captchaToken}},xform:In}),{data:y,error:v}=p;if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!y||!y.session||!y.user){const x=new ri;return this._returnResult({data:{user:null,session:null},error:x})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:y,error:v})}catch(i){if(be(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOtp(a){var i,l,c,f,h;try{if("email"in a){const{email:p,options:y}=a;let v=null,x=null;this.flowType==="pkce"&&([v,x]=await ii(this.storage,this.storageKey));const{error:O}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(i=y?.data)!==null&&i!==void 0?i:{},create_user:(l=y?.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:y?.captchaToken},code_challenge:v,code_challenge_method:x},redirectTo:y?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:O})}if("phone"in a){const{phone:p,options:y}=a,{data:v,error:x}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(c=y?.data)!==null&&c!==void 0?c:{},create_user:(f=y?.shouldCreateUser)!==null&&f!==void 0?f:!0,gotrue_meta_security:{captcha_token:y?.captchaToken},channel:(h=y?.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:v?.message_id},error:x})}throw new Ol("You must provide either an email or phone number.")}catch(p){if(await en(this.storage,`${this.storageKey}-code-verifier`),be(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(a){var i,l;try{let c,f;"options"in a&&(c=(i=a.options)===null||i===void 0?void 0:i.redirectTo,f=(l=a.options)===null||l===void 0?void 0:l.captchaToken);const{data:h,error:p}=await Oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},a),{gotrue_meta_security:{captcha_token:f}}),redirectTo:c,xform:In});if(p)throw p;if(!h)throw new Error("An error occurred on token verification.");const y=h.session,v=h.user;return y?.access_token&&(await this._saveSession(y),await this._notifyAllSubscribers(a.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",y)),this._returnResult({data:{user:v,session:y},error:null})}catch(c){if(be(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithSSO(a){var i,l,c,f,h;try{let p=null,y=null;this.flowType==="pkce"&&([p,y]=await ii(this.storage,this.storageKey));const v=await Oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in a?{provider_id:a.providerId}:null),"domain"in a?{domain:a.domain}:null),{redirect_to:(l=(i=a.options)===null||i===void 0?void 0:i.redirectTo)!==null&&l!==void 0?l:void 0}),!((c=a?.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:a.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:y}),headers:this.headers,xform:dv});return!((f=v.data)===null||f===void 0)&&f.url&&tn()&&!(!((h=a.options)===null||h===void 0)&&h.skipBrowserRedirect)&&window.location.assign(v.data.url),this._returnResult(v)}catch(p){if(await en(this.storage,`${this.storageKey}-code-verifier`),be(p))return this._returnResult({data:null,error:p});throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async a=>{const{data:{session:i},error:l}=a;if(l)throw l;if(!i)throw new An;const{error:c}=await Oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return this._returnResult({data:{user:null,session:null},error:c})})}catch(a){if(be(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async resend(a){try{const i=`${this.url}/resend`;if("email"in a){const{email:l,type:c,options:f}=a,{error:h}=await Oe(this.fetch,"POST",i,{headers:this.headers,body:{email:l,type:c,gotrue_meta_security:{captcha_token:f?.captchaToken}},redirectTo:f?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in a){const{phone:l,type:c,options:f}=a,{data:h,error:p}=await Oe(this.fetch,"POST",i,{headers:this.headers,body:{phone:l,type:c,gotrue_meta_security:{captcha_token:f?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h?.message_id},error:p})}throw new Ol("You must provide either an email or phone number and a type")}catch(i){if(be(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async i=>i))}async _acquireLock(a,i){this._debug("#_acquireLock","begin",a);try{if(this.lockAcquired){const l=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),c=(async()=>(await l,await i()))();return this.pendingInLock.push((async()=>{try{await c}catch{}})()),c}return await this.lock(`lock:${this.storageKey}`,a,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const l=i();for(this.pendingInLock.push((async()=>{try{await l}catch{}})()),await l;this.pendingInLock.length;){const c=[...this.pendingInLock];await Promise.all(c),this.pendingInLock.splice(0,c.length)}return await l}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(a){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await a(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let a=null;const i=await pr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?a=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!a)return{data:{session:null},error:null};const l=a.expires_at?a.expires_at*1e3-Date.now()<tc:!1;if(this._debug("#__loadSession()",`session has${l?"":" not"} expired`,"expires_at",a.expires_at),!l){if(this.userStorage){const h=await pr(this.userStorage,this.storageKey+"-user");h?.user?a.user=h.user:a.user=rc()}if(this.storage.isServer&&a.user&&!a.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};a.user=ov(a.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:a},error:null}}const{data:c,error:f}=await this._callRefreshToken(a.refresh_token);return f?this._returnResult({data:{session:null},error:f}):this._returnResult({data:{session:c},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(a){if(a)return await this._getUser(a);await this.initializePromise;const i=await this._acquireLock(-1,async()=>await this._getUser());return i.data.user&&(this.suppressGetSessionWarning=!0),i}async _getUser(a){try{return a?await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:a,xform:Za}):await this._useSession(async i=>{var l,c,f;const{data:h,error:p}=i;if(p)throw p;return!(!((l=h.session)===null||l===void 0)&&l.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new An}:await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(f=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&f!==void 0?f:void 0,xform:Za})})}catch(i){if(be(i))return q0(i)&&(await this._removeSession(),await en(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:i});throw i}}async updateUser(a,i={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(a,i))}async _updateUser(a,i={}){try{return await this._useSession(async l=>{const{data:c,error:f}=l;if(f)throw f;if(!c.session)throw new An;const h=c.session;let p=null,y=null;this.flowType==="pkce"&&a.email!=null&&([p,y]=await ii(this.storage,this.storageKey));const{data:v,error:x}=await Oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i?.emailRedirectTo,body:Object.assign(Object.assign({},a),{code_challenge:p,code_challenge_method:y}),jwt:h.access_token,xform:Za});if(x)throw x;return h.user=v.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),this._returnResult({data:{user:h.user},error:null})})}catch(l){if(await en(this.storage,`${this.storageKey}-code-verifier`),be(l))return this._returnResult({data:{user:null},error:l});throw l}}async setSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(a))}async _setSession(a){try{if(!a.access_token||!a.refresh_token)throw new An;const i=Date.now()/1e3;let l=i,c=!0,f=null;const{payload:h}=ac(a.access_token);if(h.exp&&(l=h.exp,c=l<=i),c){const{data:p,error:y}=await this._callRefreshToken(a.refresh_token);if(y)return this._returnResult({data:{user:null,session:null},error:y});if(!p)return{data:{user:null,session:null},error:null};f=p}else{const{data:p,error:y}=await this._getUser(a.access_token);if(y)throw y;f={access_token:a.access_token,refresh_token:a.refresh_token,user:p.user,token_type:"bearer",expires_in:l-i,expires_at:l},await this._saveSession(f),await this._notifyAllSubscribers("SIGNED_IN",f)}return this._returnResult({data:{user:f.user,session:f},error:null})}catch(i){if(be(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}}async refreshSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(a))}async _refreshSession(a){try{return await this._useSession(async i=>{var l;if(!a){const{data:h,error:p}=i;if(p)throw p;a=(l=h.session)!==null&&l!==void 0?l:void 0}if(!a?.refresh_token)throw new An;const{data:c,error:f}=await this._callRefreshToken(a.refresh_token);return f?this._returnResult({data:{user:null,session:null},error:f}):c?this._returnResult({data:{user:c.user,session:c},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(i){if(be(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async _getSessionFromURL(a,i){try{if(!tn())throw new Cl("No browser detected.");if(a.error||a.error_description||a.error_code)throw new Cl(a.error_description||"Error in URL with unspecified error_description",{error:a.error||"unspecified_error",code:a.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new Om("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Cl("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!a.code)throw new Om("No code detected.");const{data:te,error:X}=await this._exchangeCodeForSession(a.code);if(X)throw X;const le=new URL(window.location.href);return le.searchParams.delete("code"),window.history.replaceState(window.history.state,"",le.toString()),{data:{session:te.session,redirectType:null},error:null}}const{provider_token:l,provider_refresh_token:c,access_token:f,refresh_token:h,expires_in:p,expires_at:y,token_type:v}=a;if(!f||!p||!h||!v)throw new Cl("No session defined in URL");const x=Math.round(Date.now()/1e3),O=parseInt(p);let D=x+O;y&&(D=parseInt(y));const k=D-x;k*1e3<=ci&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${k}s, should have been closer to ${O}s`);const M=D-O;x-M>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",M,D,x):x-M<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",M,D,x);const{data:I,error:F}=await this._getUser(f);if(F)throw F;const Z={provider_token:l,provider_refresh_token:c,access_token:f,expires_in:O,expires_at:D,refresh_token:h,token_type:v,user:I.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:Z,redirectType:a.type},error:null})}catch(l){if(be(l))return this._returnResult({data:{session:null,redirectType:null},error:l});throw l}}_isImplicitGrantCallback(a){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),a):!!(a.access_token||a.error_description)}async _isPKCECallback(a){const i=await pr(this.storage,`${this.storageKey}-code-verifier`);return!!(a.code&&i)}async signOut(a={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(a))}async _signOut({scope:a}={scope:"global"}){return await this._useSession(async i=>{var l;const{data:c,error:f}=i;if(f)return this._returnResult({error:f});const h=(l=c.session)===null||l===void 0?void 0:l.access_token;if(h){const{error:p}=await this.admin.signOut(h,a);if(p&&!(L0(p)&&(p.status===404||p.status===401||p.status===403)))return this._returnResult({error:p})}return a!=="others"&&(await this._removeSession(),await en(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(a){const i=Q0(),l={id:i,callback:a,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,l),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:l}}}async _emitInitialSession(a){return await this._useSession(async i=>{var l,c;try{const{data:{session:f},error:h}=i;if(h)throw h;await((l=this.stateChangeEmitters.get(a))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",f)),this._debug("INITIAL_SESSION","callback id",a,"session",f)}catch(f){await((c=this.stateChangeEmitters.get(a))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",a,"error",f),console.error(f)}})}async resetPasswordForEmail(a,i={}){let l=null,c=null;this.flowType==="pkce"&&([l,c]=await ii(this.storage,this.storageKey,!0));try{return await Oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:a,code_challenge:l,code_challenge_method:c,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(f){if(await en(this.storage,`${this.storageKey}-code-verifier`),be(f))return this._returnResult({data:null,error:f});throw f}}async getUserIdentities(){var a;try{const{data:i,error:l}=await this.getUser();if(l)throw l;return this._returnResult({data:{identities:(a=i.user.identities)!==null&&a!==void 0?a:[]},error:null})}catch(i){if(be(i))return this._returnResult({data:null,error:i});throw i}}async linkIdentity(a){return"token"in a?this.linkIdentityIdToken(a):this.linkIdentityOAuth(a)}async linkIdentityOAuth(a){var i;try{const{data:l,error:c}=await this._useSession(async f=>{var h,p,y,v,x;const{data:O,error:D}=f;if(D)throw D;const k=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,a.provider,{redirectTo:(h=a.options)===null||h===void 0?void 0:h.redirectTo,scopes:(p=a.options)===null||p===void 0?void 0:p.scopes,queryParams:(y=a.options)===null||y===void 0?void 0:y.queryParams,skipBrowserRedirect:!0});return await Oe(this.fetch,"GET",k,{headers:this.headers,jwt:(x=(v=O.session)===null||v===void 0?void 0:v.access_token)!==null&&x!==void 0?x:void 0})});if(c)throw c;return tn()&&!(!((i=a.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(l?.url),this._returnResult({data:{provider:a.provider,url:l?.url},error:null})}catch(l){if(be(l))return this._returnResult({data:{provider:a.provider,url:null},error:l});throw l}}async linkIdentityIdToken(a){return await this._useSession(async i=>{var l;try{const{error:c,data:{session:f}}=i;if(c)throw c;const{options:h,provider:p,token:y,access_token:v,nonce:x}=a,O=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(l=f?.access_token)!==null&&l!==void 0?l:void 0,body:{provider:p,id_token:y,access_token:v,nonce:x,link_identity:!0,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:In}),{data:D,error:k}=O;return k?this._returnResult({data:{user:null,session:null},error:k}):!D||!D.session||!D.user?this._returnResult({data:{user:null,session:null},error:new ri}):(D.session&&(await this._saveSession(D.session),await this._notifyAllSubscribers("USER_UPDATED",D.session)),this._returnResult({data:D,error:k}))}catch(c){if(await en(this.storage,`${this.storageKey}-code-verifier`),be(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}})}async unlinkIdentity(a){try{return await this._useSession(async i=>{var l,c;const{data:f,error:h}=i;if(h)throw h;return await Oe(this.fetch,"DELETE",`${this.url}/user/identities/${a.identity_id}`,{headers:this.headers,jwt:(c=(l=f.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0})})}catch(i){if(be(i))return this._returnResult({data:null,error:i});throw i}}async _refreshAccessToken(a){const i=`#_refreshAccessToken(${a.substring(0,5)}...)`;this._debug(i,"begin");try{const l=Date.now();return await F0(async c=>(c>0&&await Z0(200*Math.pow(2,c-1)),this._debug(i,"refreshing attempt",c),await Oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:a},headers:this.headers,xform:In})),(c,f)=>{const h=200*Math.pow(2,c);return f&&nc(f)&&Date.now()+h-l<ci})}catch(l){if(this._debug(i,"error",l),be(l))return this._returnResult({data:{session:null,user:null},error:l});throw l}finally{this._debug(i,"end")}}_isValidSession(a){return typeof a=="object"&&a!==null&&"access_token"in a&&"refresh_token"in a&&"expires_at"in a}async _handleProviderSignIn(a,i){const l=await this._getUrlForProvider(`${this.url}/authorize`,a,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",a,"options",i,"url",l),tn()&&!i.skipBrowserRedirect&&window.location.assign(l),{data:{provider:a,url:l},error:null}}async _recoverAndRefresh(){var a,i;const l="#_recoverAndRefresh()";this._debug(l,"begin");try{const c=await pr(this.storage,this.storageKey);if(c&&this.userStorage){let h=await pr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:c.user},await fi(this.userStorage,this.storageKey+"-user",h)),c.user=(a=h?.user)!==null&&a!==void 0?a:rc()}else if(c&&!c.user&&!c.user){const h=await pr(this.storage,this.storageKey+"-user");h&&h?.user?(c.user=h.user,await en(this.storage,this.storageKey+"-user"),await fi(this.storage,this.storageKey,c)):c.user=rc()}if(this._debug(l,"session from storage",c),!this._isValidSession(c)){this._debug(l,"session is not valid"),c!==null&&await this._removeSession();return}const f=((i=c.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<tc;if(this._debug(l,`session has${f?"":" not"} expired with margin of ${tc}s`),f){if(this.autoRefreshToken&&c.refresh_token){const{error:h}=await this._callRefreshToken(c.refresh_token);h&&(console.error(h),nc(h)||(this._debug(l,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(c.user&&c.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:p}=await this._getUser(c.access_token);!p&&h?.user?(c.user=h.user,await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)):this._debug(l,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(l,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",c)}catch(c){this._debug(l,"error",c),console.error(c);return}finally{this._debug(l,"end")}}async _callRefreshToken(a){var i,l;if(!a)throw new An;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const c=`#_callRefreshToken(${a.substring(0,5)}...)`;this._debug(c,"begin");try{this.refreshingDeferred=new Ul;const{data:f,error:h}=await this._refreshAccessToken(a);if(h)throw h;if(!f.session)throw new An;await this._saveSession(f.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",f.session);const p={data:f.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(f){if(this._debug(c,"error",f),be(f)){const h={data:null,error:f};return nc(f)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(h),h}throw(l=this.refreshingDeferred)===null||l===void 0||l.reject(f),f}finally{this.refreshingDeferred=null,this._debug(c,"end")}}async _notifyAllSubscribers(a,i,l=!0){const c=`#_notifyAllSubscribers(${a})`;this._debug(c,"begin",i,`broadcast = ${l}`);try{this.broadcastChannel&&l&&this.broadcastChannel.postMessage({event:a,session:i});const f=[],h=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(a,i)}catch(y){f.push(y)}});if(await Promise.all(h),f.length>0){for(let p=0;p<f.length;p+=1)console.error(f[p]);throw f[0]}}finally{this._debug(c,"end")}}async _saveSession(a){this._debug("#_saveSession()",a),this.suppressGetSessionWarning=!0,await en(this.storage,`${this.storageKey}-code-verifier`);const i=Object.assign({},a),l=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!l&&i.user&&await fi(this.userStorage,this.storageKey+"-user",{user:i.user});const c=Object.assign({},i);delete c.user;const f=Dm(c);await fi(this.storage,this.storageKey,f)}else{const c=Dm(i);await fi(this.storage,this.storageKey,c)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await en(this.storage,this.storageKey),await en(this.storage,this.storageKey+"-code-verifier"),await en(this.storage,this.storageKey+"-user"),this.userStorage&&await en(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const a=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{a&&tn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",a)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const a=setInterval(()=>this._autoRefreshTokenTick(),ci);this.autoRefreshTicker=a,a&&typeof a=="object"&&typeof a.unref=="function"?a.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(a),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const a=this.autoRefreshTicker;this.autoRefreshTicker=null,a&&clearInterval(a)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const a=Date.now();try{return await this._useSession(async i=>{const{data:{session:l}}=i;if(!l||!l.refresh_token||!l.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const c=Math.floor((l.expires_at*1e3-a)/ci);this._debug("#_autoRefreshTokenTick()",`access token expires in ${c} ticks, a tick lasts ${ci}ms, refresh threshold is ${hc} ticks`),c<=hc&&await this._callRefreshToken(l.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(a){if(a.isAcquireTimeout||a instanceof ny)this._debug("auto refresh token tick lock not available");else throw a}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!tn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(a){console.error("_handleVisibilityChange",a)}}async _onVisibilityChanged(a){const i=`#_onVisibilityChanged(${a})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),a||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(a,i,l){const c=[`provider=${encodeURIComponent(i)}`];if(l?.redirectTo&&c.push(`redirect_to=${encodeURIComponent(l.redirectTo)}`),l?.scopes&&c.push(`scopes=${encodeURIComponent(l.scopes)}`),this.flowType==="pkce"){const[f,h]=await ii(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(f)}`,code_challenge_method:`${encodeURIComponent(h)}`});c.push(p.toString())}if(l?.queryParams){const f=new URLSearchParams(l.queryParams);c.push(f.toString())}return l?.skipBrowserRedirect&&c.push(`skip_http_redirect=${l.skipBrowserRedirect}`),`${a}?${c.join("&")}`}async _unenroll(a){try{return await this._useSession(async i=>{var l;const{data:c,error:f}=i;return f?this._returnResult({data:null,error:f}):await Oe(this.fetch,"DELETE",`${this.url}/factors/${a.factorId}`,{headers:this.headers,jwt:(l=c?.session)===null||l===void 0?void 0:l.access_token})})}catch(i){if(be(i))return this._returnResult({data:null,error:i});throw i}}async _enroll(a){try{return await this._useSession(async i=>{var l,c;const{data:f,error:h}=i;if(h)return this._returnResult({data:null,error:h});const p=Object.assign({friendly_name:a.friendlyName,factor_type:a.factorType},a.factorType==="phone"?{phone:a.phone}:a.factorType==="totp"?{issuer:a.issuer}:{}),{data:y,error:v}=await Oe(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(l=f?.session)===null||l===void 0?void 0:l.access_token});return v?this._returnResult({data:null,error:v}):(a.factorType==="totp"&&y.type==="totp"&&(!((c=y?.totp)===null||c===void 0)&&c.qr_code)&&(y.totp.qr_code=`data:image/svg+xml;utf-8,${y.totp.qr_code}`),this._returnResult({data:y,error:null}))})}catch(i){if(be(i))return this._returnResult({data:null,error:i});throw i}}async _verify(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var l;const{data:c,error:f}=i;if(f)return this._returnResult({data:null,error:f});const h=Object.assign({challenge_id:a.challengeId},"webauthn"in a?{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_response:a.webauthn.type==="create"?Cv(a.webauthn.credential_response):jv(a.webauthn.credential_response)})}:{code:a.code}),{data:p,error:y}=await Oe(this.fetch,"POST",`${this.url}/factors/${a.factorId}/verify`,{body:h,headers:this.headers,jwt:(l=c?.session)===null||l===void 0?void 0:l.access_token});return y?this._returnResult({data:null,error:y}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:y}))})}catch(i){if(be(i))return this._returnResult({data:null,error:i});throw i}})}async _challenge(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var l;const{data:c,error:f}=i;if(f)return this._returnResult({data:null,error:f});const h=await Oe(this.fetch,"POST",`${this.url}/factors/${a.factorId}/challenge`,{body:a,headers:this.headers,jwt:(l=c?.session)===null||l===void 0?void 0:l.access_token});if(h.error)return h;const{data:p}=h;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:Av(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:Ov(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(be(i))return this._returnResult({data:null,error:i});throw i}})}async _challengeAndVerify(a){const{data:i,error:l}=await this._challenge({factorId:a.factorId});return l?this._returnResult({data:null,error:l}):await this._verify({factorId:a.factorId,challengeId:i.id,code:a.code})}async _listFactors(){var a;const{data:{user:i},error:l}=await this.getUser();if(l)return{data:null,error:l};const c={all:[],phone:[],totp:[],webauthn:[]};for(const f of(a=i?.factors)!==null&&a!==void 0?a:[])c.all.push(f),f.status==="verified"&&c[f.factor_type].push(f);return{data:c,error:null}}async _getAuthenticatorAssuranceLevel(){var a,i;const{data:{session:l},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=ac(l.access_token);let h=null;f.aal&&(h=f.aal);let p=h;((i=(a=l.user.factors)===null||a===void 0?void 0:a.filter(x=>x.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(p="aal2");const v=f.amr||[];return{data:{currentLevel:h,nextLevel:p,currentAuthenticationMethods:v},error:null}}async _getAuthorizationDetails(a){try{return await this._useSession(async i=>{const{data:{session:l},error:c}=i;return c?this._returnResult({data:null,error:c}):l?await Oe(this.fetch,"GET",`${this.url}/oauth/authorizations/${a}`,{headers:this.headers,jwt:l.access_token,xform:f=>({data:f,error:null})}):this._returnResult({data:null,error:new An})})}catch(i){if(be(i))return this._returnResult({data:null,error:i});throw i}}async _approveAuthorization(a,i){try{return await this._useSession(async l=>{const{data:{session:c},error:f}=l;if(f)return this._returnResult({data:null,error:f});if(!c)return this._returnResult({data:null,error:new An});const h=await Oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return h.data&&h.data.redirect_url&&tn()&&!i?.skipBrowserRedirect&&window.location.assign(h.data.redirect_url),h})}catch(l){if(be(l))return this._returnResult({data:null,error:l});throw l}}async _denyAuthorization(a,i){try{return await this._useSession(async l=>{const{data:{session:c},error:f}=l;if(f)return this._returnResult({data:null,error:f});if(!c)return this._returnResult({data:null,error:new An});const h=await Oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:c.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return h.data&&h.data.redirect_url&&tn()&&!i?.skipBrowserRedirect&&window.location.assign(h.data.redirect_url),h})}catch(l){if(be(l))return this._returnResult({data:null,error:l});throw l}}async _listOAuthGrants(){try{return await this._useSession(async a=>{const{data:{session:i},error:l}=a;return l?this._returnResult({data:null,error:l}):i?await Oe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new An})})}catch(a){if(be(a))return this._returnResult({data:null,error:a});throw a}}async _revokeOAuthGrant(a){try{return await this._useSession(async i=>{const{data:{session:l},error:c}=i;return c?this._returnResult({data:null,error:c}):l?(await Oe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:l.access_token,query:{client_id:a.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new An})})}catch(i){if(be(i))return this._returnResult({data:null,error:i});throw i}}async fetchJwk(a,i={keys:[]}){let l=i.keys.find(p=>p.kid===a);if(l)return l;const c=Date.now();if(l=this.jwks.keys.find(p=>p.kid===a),l&&this.jwks_cached_at+M0>c)return l;const{data:f,error:h}=await Oe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!f.keys||f.keys.length===0||(this.jwks=f,this.jwks_cached_at=c,l=f.keys.find(p=>p.kid===a),!l)?null:l}async getClaims(a,i={}){try{let l=a;if(!l){const{data:k,error:M}=await this.getSession();if(M||!k.session)return this._returnResult({data:null,error:M});l=k.session.access_token}const{header:c,payload:f,signature:h,raw:{header:p,payload:y}}=ac(l);i?.allowExpired||iv(f.exp);const v=!c.alg||c.alg.startsWith("HS")||!c.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(c.kid,i?.keys?{keys:i.keys}:i?.jwks);if(!v){const{error:k}=await this.getUser(l);if(k)throw k;return{data:{claims:f,header:c,signature:h},error:null}}const x=sv(c.alg),O=await crypto.subtle.importKey("jwk",v,x,!0,["verify"]);if(!await crypto.subtle.verify(x,O,h,I0(`${p}.${y}`)))throw new gc("Invalid JWT signature");return{data:{claims:f,header:c,signature:h},error:null}}catch(l){if(be(l))return this._returnResult({data:null,error:l});throw l}}}ds.nextInstanceID={};const Lv=ds,qv="2.89.0";let is="";typeof Deno<"u"?is="deno":typeof document<"u"?is="web":typeof navigator<"u"&&navigator.product==="ReactNative"?is="react-native":is="node";const Hv={"X-Client-Info":`supabase-js-${is}/${qv}`},$v={headers:Hv},Gv={schema:"public"},Vv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Yv={};function hs(s){"@babel/helpers - typeof";return hs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},hs(s)}function Kv(s,a){if(hs(s)!="object"||!s)return s;var i=s[Symbol.toPrimitive];if(i!==void 0){var l=i.call(s,a);if(hs(l)!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(s)}function Iv(s){var a=Kv(s,"string");return hs(a)=="symbol"?a:a+""}function Xv(s,a,i){return(a=Iv(a))in s?Object.defineProperty(s,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[a]=i,s}function qm(s,a){var i=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);a&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),i.push.apply(i,l)}return i}function kt(s){for(var a=1;a<arguments.length;a++){var i=arguments[a]!=null?arguments[a]:{};a%2?qm(Object(i),!0).forEach(function(l){Xv(s,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(i)):qm(Object(i)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(i,l))})}return s}const Qv=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),Jv=()=>Headers,Wv=(s,a,i)=>{const l=Qv(i),c=Jv();return async(f,h)=>{var p;const y=(p=await a())!==null&&p!==void 0?p:s;let v=new c(h?.headers);return v.has("apikey")||v.set("apikey",s),v.has("Authorization")||v.set("Authorization",`Bearer ${y}`),l(f,kt(kt({},h),{},{headers:v}))}};function Zv(s){return s.endsWith("/")?s:s+"/"}function Fv(s,a){var i,l;const{db:c,auth:f,realtime:h,global:p}=s,{db:y,auth:v,realtime:x,global:O}=a,D={db:kt(kt({},y),c),auth:kt(kt({},v),f),realtime:kt(kt({},x),h),storage:{},global:kt(kt(kt({},O),p),{},{headers:kt(kt({},(i=O?.headers)!==null&&i!==void 0?i:{}),(l=p?.headers)!==null&&l!==void 0?l:{})}),accessToken:async()=>""};return s.accessToken?D.accessToken=s.accessToken:delete D.accessToken,D}function Pv(s){const a=s?.trim();if(!a)throw new Error("supabaseUrl is required.");if(!a.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Zv(a))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var eb=class extends Lv{constructor(s){super(s)}},tb=class{constructor(s,a,i){var l,c;this.supabaseUrl=s,this.supabaseKey=a;const f=Pv(s);if(!a)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const h=`sb-${f.hostname.split(".")[0]}-auth-token`,p={db:Gv,realtime:Yv,auth:kt(kt({},Vv),{},{storageKey:h}),global:$v},y=Fv(i??{},p);if(this.storageKey=(l=y.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(c=y.global.headers)!==null&&c!==void 0?c:{},y.accessToken)this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(x,O)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(O)} is not possible`)}});else{var v;this.auth=this._initSupabaseAuthClient((v=y.auth)!==null&&v!==void 0?v:{},this.headers,y.global.fetch)}this.fetch=Wv(a,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(kt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.accessToken&&this.accessToken().then(x=>this.realtime.setAuth(x)).catch(x=>console.warn("Failed to set initial Realtime auth token:",x)),this.rest=new Up(new URL("rest/v1",f).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),this.storage=new R0(this.storageUrl.href,this.headers,this.fetch,i?.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new jp(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,a={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,a,i)}channel(s,a={config:{}}){return this.realtime.channel(s,a)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var s=this,a,i;if(s.accessToken)return await s.accessToken();const{data:l}=await s.auth.getSession();return(a=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:s.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:a,detectSessionInUrl:i,storage:l,userStorage:c,storageKey:f,flowType:h,lock:p,debug:y,throwOnError:v},x,O){const D={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new eb({url:this.authUrl.href,headers:kt(kt({},D),x),storageKey:f,autoRefreshToken:s,persistSession:a,detectSessionInUrl:i,storage:l,userStorage:c,flowType:h,lock:p,debug:y,throwOnError:v,fetch:O,hasCustomAuthorizationHeader:Object.keys(this.headers).some(k=>k.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new Zp(this.realtimeUrl.href,kt(kt({},s),{},{params:kt(kt({},{apikey:this.supabaseKey}),s?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,a)=>{this._handleTokenChanged(s,"CLIENT",a?.access_token)})}_handleTokenChanged(s,a,i){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const nb=(s,a,i)=>new tb(s,a,i);function ab(){if(typeof window<"u"||typeof process>"u")return!1;const s=process.version;if(s==null)return!1;const a=s.match(/^v(\d+)\./);return a?parseInt(a[1],10)<=18:!1}ab()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const rb="https://bpxypuklucesntwietez.supabase.co",ib="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJweHlwdWtsdWNlc250d2lldGV6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjcyMDIzOTcsImV4cCI6MjA4Mjc3ODM5N30.mYtIqqFsXWWclh0nhRAurtUPoRBRT63bVtgWePvDKpc",Ht=nb(rb,ib,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!1,storage:window.localStorage,storageKey:"ironloop-auth"}});function Hm({children:s}){return m.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:m.jsx("div",{style:{width:"100%",maxWidth:"700px"},children:s})})}function sb({size:s=18}){return m.jsx("svg",{width:s,height:s,viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:m.jsx("path",{fill:"currentColor",d:"M12 12a4.2 4.2 0 1 0-4.2-4.2A4.2 4.2 0 0 0 12 12Zm0 2c-4.1 0-7.5 2.2-7.5 4.8V21h15v-2.2c0-2.6-3.4-4.8-7.5-4.8Z"})})}function lb(){const s=()=>{let E=localStorage.getItem("deviceId");return E||(E=crypto.randomUUID(),localStorage.setItem("deviceId",E)),E},a=ae.useMemo(()=>s(),[]),i="templatesUpdatedAt",l=()=>localStorage.getItem(i)!==null,c=()=>{const E=localStorage.getItem(i),N=E?Number(E):0;return Number.isFinite(N)?N:0},f=E=>{localStorage.setItem(i,String(E))},h="workoutTemplatesV2",p="ironloop:units:v1",y=()=>{try{const E=localStorage.getItem(p);if(E==="kg"||E==="lb")return E}catch{}return"lb"},[v,x]=ae.useState(()=>y());ae.useEffect(()=>{try{localStorage.setItem(p,v)}catch{}},[v]);const O=()=>{try{for(let E=localStorage.length-1;E>=0;E--){const N=localStorage.key(E);N&&N.startsWith("sb-")&&N.includes("auth-token")&&localStorage.removeItem(N)}}catch(E){console.error("Failed clearing Supabase auth keys:",E)}},[D,k]=ae.useState(null),M=D?.user?.id||null,[I,F]=ae.useState("Workout"),[Z,te]=ae.useState(!1),X="ironloop:firstVisitSeen:v1",[le,ke]=ae.useState(!1);ae.useEffect(()=>{try{localStorage.getItem(X)==="true"||ke(!0)}catch{ke(!1)}},[]);const ye=()=>{try{localStorage.setItem(X,"true")}catch{}},[ce,Le]=ae.useState(null),[Ge,rt]=ae.useState(""),[J,re]=ae.useState(""),[fe,Ee]=ae.useState("email"),[De,A]=ae.useState(""),[Y,he]=ae.useState(!1),[_e,oe]=ae.useState(""),[_,H]=ae.useState(!1),[ee,W]=ae.useState(""),pe=44.1,we=[{name:"Squats",weight:40,reps:5,sets:5,setsCompleted:[!1,!1,!1,!1,!1]},{name:"Bench Press",weight:40,reps:5,sets:5,setsCompleted:[!1,!1,!1,!1,!1]},{name:"Mid Row",weight:40,reps:15,sets:3,setsCompleted:[!1,!1,!1]},{name:"Lat Pulldown",weight:40,reps:15,sets:3,setsCompleted:[!1,!1,!1]}],je=[{name:"Squats",weight:40,reps:5,sets:5,setsCompleted:[!1,!1,!1,!1,!1]},{name:"Shoulder Press",weight:40,reps:5,sets:5,setsCompleted:[!1,!1,!1,!1,!1]},{name:"Back Extension",weight:0,reps:12,sets:3,setsCompleted:[!1,!1,!1]},{name:"Lat Pulldown",weight:40,reps:15,sets:3,setsCompleted:[!1,!1,!1]}],nt=[{name:"Squats",weight:pe,reps:5,sets:5,setsCompleted:[!1,!1,!1,!1,!1]},{name:"Bench Press",weight:pe,reps:5,sets:5,setsCompleted:[!1,!1,!1,!1,!1]},{name:"Mid Row",weight:pe,reps:15,sets:3,setsCompleted:[!1,!1,!1]},{name:"Lat Pulldown",weight:pe,reps:15,sets:3,setsCompleted:[!1,!1,!1]}],Te=[{name:"Squats",weight:pe,reps:5,sets:5,setsCompleted:[!1,!1,!1,!1,!1]},{name:"Shoulder Press",weight:pe,reps:5,sets:5,setsCompleted:[!1,!1,!1,!1,!1]},{name:"Back Extension",weight:0,reps:12,sets:3,setsCompleted:[!1,!1,!1]},{name:"Lat Pulldown",weight:pe,reps:15,sets:3,setsCompleted:[!1,!1,!1]}],Gt=E=>(Array.isArray(E)?E:[]).map(q=>{const Q=Number(q?.sets??0)||0,ue=Array.isArray(q?.setsCompleted)?q.setsCompleted:[],qe=Q>0?Array.from({length:Q},(Pe,Fe)=>!!ue[Fe]):[];return{name:q?.name??"Exercise",reps:Number(q?.reps??0)||0,sets:Q||0,weight:q?.weight===""?"":Number(q?.weight??0)||0,setsCompleted:qe}}),ie=E=>{const N=typeof E?.name=="string"?E.name:"";return{id:String(E?.id||crypto.randomUUID()),name:N,exercises:Gt(E?.exercises)}},bt=E=>{const q=(Array.isArray(E?.workouts)?E.workouts:[]).map(ie);return q.length===0?{workouts:[{id:"w_a",name:"Workout A",exercises:Gt(we)},{id:"w_b",name:"Workout B",exercises:Gt(je)}]}:{workouts:q}},yt=E=>bt(E==="kg"?{workouts:[{id:"w_a",name:"Workout A",exercises:nt},{id:"w_b",name:"Workout B",exercises:Te}]}:{workouts:[{id:"w_a",name:"Workout A",exercises:we},{id:"w_b",name:"Workout B",exercises:je}]}),Vt=()=>{const E=localStorage.getItem("workoutAExercises"),N=localStorage.getItem("workoutBExercises"),q=E?JSON.parse(E):we,Q=N?JSON.parse(N):je;return bt({workouts:[{id:"w_a",name:"Workout A",exercises:q},{id:"w_b",name:"Workout B",exercises:Q}]})},Gn=E=>{const N=localStorage.getItem(h);if(N)try{return bt(JSON.parse(N))}catch{}const q=localStorage.getItem("workoutAExercises"),Q=localStorage.getItem("workoutBExercises");return q||Q?Vt():yt(E)},[ot,gn]=ae.useState(()=>Gn(v)),nn="nextWorkoutId",Jn=(E,N)=>{const q=Array.isArray(N)?N:[];if(q.length===0)return"w_a";const Q=q.findIndex(ue=>ue.id===E);return Q===-1?q[0]?.id||"w_a":q[(Q+1)%q.length]?.id||q[0]?.id||"w_a"},jn=()=>{const E=ot?.workouts||[],N=localStorage.getItem(nn);if(N&&E.some(Q=>Q.id===N))return N;try{const Q=localStorage.getItem("history"),ue=Q?JSON.parse(Q):[],Pe=(Array.isArray(ue)&&ue.length>0?ue[0]:null)?.template_id||null;if(Pe&&E.some(Fe=>Fe.id===Pe))return Jn(Pe,E)}catch{}const q=localStorage.getItem("lastWorkoutId");return q&&E.some(Q=>Q.id===q)?Jn(q,E):E[0]?.id||"w_a"},[Ut,Rt]=ae.useState(()=>jn()),[Yt,_t]=ae.useState(()=>{const E=localStorage.getItem("history");return E?JSON.parse(E):[]});ae.useEffect(()=>{localStorage.setItem(h,JSON.stringify(ot))},[ot]),ae.useEffect(()=>{localStorage.setItem("history",JSON.stringify(Yt))},[Yt]),ae.useEffect(()=>{const E=ot?.workouts||[];if(E.length===0)return;if(!E.some(q=>q.id===Ut)){const q=E[0].id;Rt(q);try{localStorage.setItem(nn,q)}catch{}}},[ot]);const na=ae.useRef(!1);ae.useEffect(()=>{const E=ot?.workouts||[];if(E.length===0)return;const N=localStorage.getItem(nn);if(!N||!E.some(q=>q.id===N)){const q=jn();Rt(q);try{localStorage.setItem(nn,q)}catch{}na.current=!0;return}na.current||(Rt(N),na.current=!0)},[ot]),ae.useEffect(()=>{if(!ce)return;(ot?.workouts||[]).some(q=>q.id===ce)||Le(null)},[ot]);const Wn=E=>Array.isArray(E)&&E.every(N=>N===!1),z=(E,N)=>{const q=Array.isArray(E)?E:[],Q=Array.isArray(N)?N:[];if(q.length!==Q.length)return!1;for(let ue=0;ue<q.length;ue++){const qe=q[ue]||{},Pe=Q[ue]||{};if((qe.name||"")!==(Pe.name||"")||Number(qe.reps||0)!==Number(Pe.reps||0)||Number(qe.sets||0)!==Number(Pe.sets||0)||Number(qe.weight||0)!==Number(Pe.weight||0)||!Wn(qe.setsCompleted)||!Wn(Pe.setsCompleted))return!1;const Fe=Array.isArray(qe.setsCompleted)?qe.setsCompleted.length:0,Ue=Array.isArray(Pe.setsCompleted)?Pe.setsCompleted.length:0;if(Fe!==Ue)return!1}return!0},P=(E,N)=>(Array.isArray(E?.workouts)?E.workouts:[]).find(Q=>String(Q?.id)===String(N))||null,de=(E,N)=>{const q=P(E,"w_a"),Q=P(E,"w_b");if(!q||!Q||(q?.name||"")!=="Workout A"||(Q?.name||"")!=="Workout B")return!1;const ue=Array.isArray(q?.exercises)?q.exercises:[],qe=Array.isArray(Q?.exercises)?Q.exercises:[];return N==="kg"?z(ue,nt)&&z(qe,Te):z(ue,we)&&z(qe,je)},w=ae.useRef(v);ae.useEffect(()=>{const E=w.current,N=v;if(E!==N){if(M){w.current=N;return}if((Yt||[]).length>0){w.current=N;return}if(E==="lb"&&N==="kg"&&de(ot,"lb")){const q=yt("kg");gn(q),Rt("w_a"),localStorage.setItem("lastWorkoutId","w_a"),localStorage.setItem(nn,"w_a")}if(E==="kg"&&N==="lb"&&de(ot,"kg")){const q=yt("lb");gn(q),Rt("w_a"),localStorage.setItem("lastWorkoutId","w_a"),localStorage.setItem(nn,"w_a")}w.current=N}},[v]);const L=ae.useMemo(()=>{const E=ot?.workouts||[];return E.find(N=>N.id===Ut)||E[0]||null},[ot,Ut]),C=L?.exercises||[],G=E=>(Array.isArray(E)?E:[]).map(q=>{if(!q||typeof q!="object")return q;const Q={...q};return"repsBySet"in Q&&delete Q.repsBySet,Q}),ne=E=>{const N=G(E);gn(q=>({workouts:(q?.workouts||[]).map(qe=>qe.id!==Ut?qe:{...qe,exercises:N})}))},ge=E=>{let N=!1;return{updated:E.map(Q=>Q?.client_id?Q:(N=!0,{...Q,client_id:crypto.randomUUID()})),changed:N}},se=(E,N)=>{const q=new Map;for(const ue of N)ue?.client_id&&q.set(ue.client_id,ue);for(const ue of E)ue?.client_id&&!q.has(ue.client_id)&&q.set(ue.client_id,ue);const Q=Array.from(q.values());return Q.sort((ue,qe)=>new Date(qe.date).getTime()-new Date(ue.date).getTime()),Q};ae.useEffect(()=>{(async()=>{const{data:q}=await Ht.auth.getSession();k(q.session||null)})();const{data:N}=Ht.auth.onAuthStateChange((q,Q)=>{k(Q||null)});return()=>N?.subscription?.unsubscribe?.()},[]);const Se=async E=>{const{data:N,error:q}=await Ht.from("workouts").select("id, client_id, workout_type, template_id, performed_at, exercises, notes, body_weight_lbs").eq("user_id",E).order("performed_at",{ascending:!1});return q?(console.error("Supabase select failed:",q),[]):(N||[]).map(Q=>({client_id:Q.client_id||String(Q.id),type:Q.workout_type||"",template_id:Q.template_id||null,date:Q.performed_at,exercises:Q.exercises||[],notes:Q.notes||"",body_weight_lbs:typeof Q.body_weight_lbs=="number"&&Number.isFinite(Q.body_weight_lbs)?Q.body_weight_lbs:Q.body_weight_lbs===null||Q.body_weight_lbs===void 0?null:Number(Q.body_weight_lbs)||null})).filter(Q=>!!Q.client_id)},Re=async E=>{const N=await Ht.from("workout_templates").select("templates, updated_at, workout_a, workout_b").eq("user_id",E).maybeSingle();if(!N.error)return N.data||null;const q=String(N.error?.message||"");if(!(q.toLowerCase().includes("column")&&q.toLowerCase().includes("templates")))return console.error("Templates select failed:",N.error),null;const ue=await Ht.from("workout_templates").select("workout_a, workout_b, updated_at").eq("user_id",E).maybeSingle();return ue.error?(console.error("Templates select failed:",ue.error),null):ue.data||null},$e=E=>{const N=E?.workouts||[],q=N[0]?.exercises||Gt(we),Q=N[1]?.exercises||Gt(je);return{workout_a:q,workout_b:Q}},We=async(E,N,q)=>{const Q=bt(N),ue=$e(Q),qe={user_id:E,templates:Q,workout_a:ue.workout_a,workout_b:ue.workout_b,updated_at:q||new Date().toISOString()},Pe=await Ht.from("workout_templates").upsert(qe,{onConflict:"user_id"});if(!Pe.error)return;const Fe=String(Pe.error?.message||"");if(!(Fe.toLowerCase().includes("column")&&Fe.toLowerCase().includes("templates"))){console.error("Templates upsert failed:",Pe.error);return}const vn={user_id:E,workout_a:ue.workout_a,workout_b:ue.workout_b,updated_at:q||new Date().toISOString()},He=await Ht.from("workout_templates").upsert(vn,{onConflict:"user_id"});He.error&&console.error("Templates upsert failed:",He.error)},Me=ae.useRef(!1),wt=ae.useRef(!1);ae.useEffect(()=>{if(!M)return;(async()=>{try{const{updated:N,changed:q}=ge(Yt),Q=q?N:Yt;q&&_t(N);try{await Ht.rpc("claim_workouts",{p_device_id:a})}catch{}const ue=`supabaseUploadedHistory:${M}:${a}`;if(!(localStorage.getItem(ue)==="true")){const Qe=(Q||[]).filter(Ze=>Ze&&Ze.client_id).map(Ze=>({user_id:M,device_id:a,client_id:Ze.client_id,workout_type:Ze.type||"",template_id:Ze.template_id||null,performed_at:Ze.date,exercises:Ze.exercises||[],notes:Ze.notes||"",body_weight_lbs:typeof Ze.body_weight_lbs=="number"&&Number.isFinite(Ze.body_weight_lbs)?Ze.body_weight_lbs:null}));if(Qe.length>0){const{error:Ze}=await Ht.from("workouts").upsert(Qe,{onConflict:"client_id"});Ze?console.error("Supabase local history upload failed:",Ze):localStorage.setItem(ue,"true")}else localStorage.setItem(ue,"true")}const Pe=await Se(M),Fe=se(Q||[],Pe);_t(Fe),Me.current=!1;const Ue=await Re(M),vn=l(),He=vn?c():0,it=bt(ot);if(Ue){const Qe=Ue.updated_at?new Date(Ue.updated_at).getTime():0;let Ze=null;if(Ue.templates&&typeof Ue.templates=="object"?Ze=bt(Ue.templates):Ue.workout_a||Ue.workout_b?Ze=bt({workouts:[{id:"w_a",name:"Workout A",exercises:Ue.workout_a||[]},{id:"w_b",name:"Workout B",exercises:Ue.workout_b||[]}]}):Ze=bt(null),!vn)wt.current=!0,gn(Ze),f(Qe||Date.now()),Me.current=!0;else if((Qe||0)>=(He||0))wt.current=!0,gn(Ze),f(Qe||Date.now()),Me.current=!0;else{const aa=new Date().toISOString();await We(M,it,aa),f(Date.now()),Me.current=!0}}else{const Qe=new Date().toISOString();await We(M,it,Qe),f(Date.now()),Me.current=!0}A(""),Ee("email"),re("")}catch(N){console.error("Login sync failed:",N)}})()},[M]);const St=ae.useRef(null);ae.useEffect(()=>{if(M&&Me.current){if(wt.current){wt.current=!1;return}return St.current&&clearTimeout(St.current),f(Date.now()),St.current=setTimeout(()=>{const E=bt(ot);We(M,E,new Date().toISOString())},700),()=>{St.current&&clearTimeout(St.current)}}},[M,ot]);const Kt=async()=>{A("");const E=Ge.trim();if(!E){A("Enter an email address.");return}const{error:N}=await Ht.auth.signInWithOtp({email:E,options:{shouldCreateUser:!0}});if(N){A(N.message);return}Ee("code"),A("Enter the code sent to your email.")},Tt=async()=>{A("");const E=Ge.trim(),N=J.trim();if(!E){A("Enter an email address.");return}if(!N){A("Enter the code from your email.");return}const{error:q}=await Ht.auth.verifyOtp({email:E,token:N,type:"email"});if(q){A(q.message);return}},ut=async()=>{try{await Ht.auth.signOut({scope:"local"})}catch(E){console.error("signOut error:",E)}O(),k(null),A(""),Ee("email"),re(""),Me.current=!1,wt.current=!1,window.location.reload()},ct=E=>{if(!E||typeof E!="string")return"";const N=E.indexOf("@");if(N===-1)return"*****";const q=E.slice(0,N),Q=E.slice(N+1),ue=Q.lastIndexOf("."),qe=ue===-1?Q:Q.slice(0,ue),Pe=ue===-1?"":Q.slice(ue),Fe=(He,it,Qe,Ze="*")=>{if(!He)return"";if(He.length<=it+Qe)return Ze.repeat(Math.max(1,He.length));const aa=He.slice(0,it),Fa="",Sr=Math.max(1,He.length-it-Qe);return aa+Ze.repeat(Sr)+Fa},Ue=Fe(q,2,0),vn=Fe(qe,2,0);return`${Ue}@${vn}${Pe}`},rn={width:"100%",padding:"0.75rem 1rem",backgroundColor:"#8b5cf6",color:"#fff",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:"bold"},Ve={width:"100%",padding:"0.6rem",borderRadius:"8px",boxSizing:"border-box"},xt=()=>{const E=ot?.workouts||[];if(E.length===0)return null;const N=E.findIndex(ue=>ue.id===Ut),Q=E[(N+1)%E.length]?.id||null;if(Q){Rt(Q);try{localStorage.setItem(nn,Q)}catch{}}return Q},sn=async(E,N=null)=>{const q=L?.id||Ut,Q=L?.name||"",ue=typeof N=="number"&&Number.isFinite(N)?N:null,qe={client_id:crypto.randomUUID(),type:Q,template_id:q,date:new Date,exercises:(E||[]).map(Fe=>({...Fe})),notes:"",body_weight_lbs:ue};if(_t(Fe=>[qe,...Fe||[]]),localStorage.setItem("lastWorkoutId",q),M)try{const{error:Fe}=await Ht.from("workouts").insert({user_id:M,device_id:a,client_id:qe.client_id,workout_type:Q||"",template_id:q,performed_at:qe.date,exercises:qe.exercises,notes:"",body_weight_lbs:ue});Fe&&console.error("Supabase insert failed:",Fe)}catch(Fe){console.error("Supabase insert failed:",Fe)}const Pe=(E||[]).map(Fe=>{const Ue={...Fe||{}};"repsBySet"in Ue&&delete Ue.repsBySet;const vn=Ue.sets||(Ue.setsCompleted?Ue.setsCompleted.length:0);return{...Ue,setsCompleted:Array(vn).fill(!1)}});ne(Pe),xt()},kn=async(E,N)=>{if(_t(q=>{const Q=[...q||[]];return Q[E]?(Q[E]={...Q[E],notes:N},Q):q}),!!M)try{const Q=Yt[E]?.client_id;if(!Q)return;const{error:ue}=await Ht.from("workouts").update({notes:N}).eq("user_id",M).eq("client_id",Q);ue&&console.error("Supabase notes update failed:",ue)}catch(q){console.error("Supabase notes update failed:",q)}},Zn=async E=>{if(!window.confirm("Are you sure you want to delete this workout?"))return;const q=Yt[E];if(_t(Q=>(Q||[]).filter((ue,qe)=>qe!==E)),!!M)try{const Q=q?.client_id;if(!Q)return;const{error:ue}=await Ht.from("workouts").delete().eq("user_id",M).eq("client_id",Q);ue&&console.error("Supabase delete failed:",ue)}catch(Q){console.error("Supabase delete failed:",Q)}},Rn=async()=>{try{const{data:E}=await Ht.auth.getSession();k(E.session||null),oe("")}catch{}},pn=async E=>{const N=String(E||"").trim();if(oe(""),!M){oe("Sign in first.");return}if(!N){oe("Enter a new email address.");return}if(N.includes(" ")){oe("Email addresses cannot contain spaces.");return}const q=String(D?.user?.email||"").trim();if(q&&q.toLowerCase()===N.toLowerCase()){oe("That is already your current email.");return}he(!0);try{const{error:Q}=await Ht.auth.updateUser({email:N});oe(Q?Q.message||"Email update failed.":"Enter the code sent to your new email.")}catch(Q){console.error("Email update failed:",Q),oe("Email update failed.")}finally{he(!1)}},Dn=async(E,N)=>{const q=String(E||"").trim(),Q=String(N||"").trim();if(oe(""),!M){oe("Sign in first.");return}if(!q){oe("Enter a new email address.");return}if(!Q){oe("Enter the code from your email.");return}he(!0);try{const{error:ue}=await Ht.auth.verifyOtp({email:q,token:Q,type:"email_change"});ue?oe(ue.message||"Code verification failed."):(oe("Email updated."),await Rn())}catch(ue){console.error("Email change code verify failed:",ue),oe("Code verification failed.")}finally{he(!1)}},Ea=()=>{const E=Array.isArray(Yt)?Yt:[];if(E.length===0){window.alert("No workouts to export yet.");return}const N=He=>{if(He==null)return"";const it=String(He),Qe=it.includes(",")||it.includes('"')||it.includes(`
`)||it.includes("\r"),Ze=it.replace(/"/g,'""');return Qe?`"${Ze}"`:Ze},q=He=>{try{return new Date(He).toISOString()}catch{return""}},Q=He=>(Array.isArray(He)?He:[]).map(Qe=>Qe?"1":"0").join("|"),ue=He=>{const it=Array.isArray(He)?He:[];let Qe=0;for(const Ze of it)Ze&&(Qe+=1);return Qe},qe=["workout_client_id","performed_at_iso","workout_name","template_id","exercise_index","exercise_name","reps","sets_planned","weight_lb","sets_completed_count","sets_planned_count","sets_completed_pattern","notes","weight_storage_unit","body_weight_lb"],Pe=[];for(const He of E){const it=He?.client_id||"",Qe=q(He?.date),Ze=He?.type||"",aa=He?.template_id||"",Fa=He?.notes||"",Sr=typeof He?.body_weight_lbs=="number"&&Number.isFinite(He.body_weight_lbs)?He.body_weight_lbs:"",Aa=Array.isArray(He?.exercises)?He.exercises:[];for(let ra=0;ra<Aa.length;ra++){const It=Aa[ra]||{},un=Number(It?.reps??0)||0,yi=Number(It?.sets??0)||0,Ml=It?.weight===""||It?.weight===null||It?.weight===void 0?"":Number(It?.weight??0)||0,Pa=Array.isArray(It?.setsCompleted)?It.setsCompleted:[],ys=ue(Pa),xr=Pa.length||yi,Bl=Q(Pa);Pe.push([N(it),N(Qe),N(Ze),N(aa),N(ra),N(It?.name??""),N(un),N(yi),N(Ml),N(ys),N(xr),N(Bl),N(Fa),N("lb"),N(Sr)].join(","))}Aa.length===0&&Pe.push([N(it),N(Qe),N(Ze),N(aa),N(""),N(""),N(""),N(""),N(""),N(""),N(""),N(""),N(Fa),N("lb"),N(Sr)].join(","))}const Fe=[qe.join(","),...Pe].join(`\r
`),vn=`ironloop-history-exercises-${new Date().toISOString().slice(0,10)}.csv`;try{const He=new Blob([Fe],{type:"text/csv;charset=utf-8"}),it=URL.createObjectURL(He),Qe=document.createElement("a");Qe.href=it,Qe.download=vn,Qe.style.display="none",document.body.appendChild(Qe),Qe.click(),setTimeout(()=>{URL.revokeObjectURL(it),document.body.removeChild(Qe)},250)}catch(He){console.error("CSV export failed:",He),window.alert("Export failed.")}},on=()=>{try{localStorage.setItem("history",JSON.stringify([]))}catch{}try{localStorage.removeItem(h),localStorage.removeItem(i),localStorage.removeItem("workoutAExercises"),localStorage.removeItem("workoutBExercises"),localStorage.removeItem("lastWorkoutId"),localStorage.removeItem(nn)}catch{}},At=async()=>{if(!_){W(""),H(!0);try{if(M){const{error:E}=await Ht.from("workouts").delete().eq("user_id",M);E&&console.error("Supabase history delete failed:",E);try{const N=`supabaseUploadedHistory:${M}:${a}`;localStorage.removeItem(N)}catch{}}_t([]);try{localStorage.setItem("history",JSON.stringify([]))}catch{}W("History deleted.")}catch(E){console.error("Delete all history failed:",E),W("Delete failed.")}finally{H(!1)}}},zt=async()=>{if(!_){if(!M){W("Sign in first.");return}W(""),H(!0);try{const{data:E,error:N}=await Ht.functions.invoke("delete-account",{body:{}});if(N){console.error("Delete account function failed:",N),W("Account deletion failed."),H(!1);return}if(!E||E.ok!==!0){console.error("Delete account function unexpected response:",E),W("Account deletion failed."),H(!1);return}on(),O();try{window.alert("Your account and all associated data have been permanently deleted.")}catch{}window.location.reload()}catch(E){console.error("Delete account failed:",E),W("Account deletion failed."),H(!1)}}},Ta=()=>m.jsx(Hm,{children:m.jsx("div",{style:{width:"100%",padding:"1.25rem 1rem 2rem",boxSizing:"border-box",display:"flex",justifyContent:"center"},children:m.jsx("button",{onClick:()=>te(!0),style:{background:"transparent",border:"none",color:"#aaa",cursor:"pointer",textDecoration:"underline",padding:"0.25rem 0.5rem"},children:"FAQ"})})}),mi=()=>{const E={margin:"0 0 1.5rem 0"},N={margin:"0 0 0.5rem 0"},q={margin:"0.5rem 0"};return m.jsx("div",{style:{width:"100%",padding:"0 1rem 2rem",boxSizing:"border-box",display:"flex",justifyContent:"center"},children:m.jsxs("div",{style:{width:"100%",maxWidth:"700px",textAlign:"left"},children:[m.jsx("div",{style:{marginTop:"1rem"},children:m.jsx("button",{onClick:()=>te(!1),style:{backgroundColor:"#1a1a1a",border:"1px solid #333",color:"#fff",borderRadius:"8px",padding:"0.5rem 0.9rem",cursor:"pointer"},children:"Back"})}),m.jsx("h2",{style:{textAlign:"center",margin:"1rem 0"},children:"FAQ"}),m.jsxs("div",{style:{color:"#fff",lineHeight:1.6},children:[m.jsxs("div",{style:E,children:[m.jsx("h3",{style:N,children:"How do I add IronLoop to my iPhone's home screen?"}),m.jsx("p",{style:q,children:"You can add IronLoop to your home screen using Safari."}),m.jsxs("ol",{style:{margin:"0.5rem 0 0.5rem 1.25rem"},children:[m.jsx("li",{children:"Open Safari on your iPhone"}),m.jsx("li",{children:"Go to the IronLoop website"}),m.jsx("li",{children:"Tap the button with 3 dots in the bottom right, then the Share button (the square with the upward arrow)"}),m.jsx("li",{children:"Tap More, then Add to Home Screen"}),m.jsx("li",{children:"Tap Add to confirm"})]}),m.jsx("p",{style:q,children:"IronLoop will now appear like a regular app on your home screen and can be launched by tapping the icon."})]}),m.jsxs("div",{style:E,children:[m.jsx("h3",{style:N,children:"Does it work on other browsers or devices?"}),m.jsx("p",{style:q,children:"IronLoop works in modern browsers on mobile and desktop, but looks best on a phone screen."})]}),m.jsxs("div",{style:E,children:[m.jsx("h3",{style:N,children:"Do I need an account to use IronLoop?"}),m.jsx("p",{style:q,children:"No. You can use IronLoop without signing in."})]}),m.jsxs("div",{style:E,children:[m.jsx("h3",{style:N,children:"What happens if I dont sign in?"}),m.jsx("p",{style:q,children:"If you stay signed out:"}),m.jsxs("ul",{style:{margin:"0.5rem 0 0.5rem 1.25rem"},children:[m.jsx("li",{children:"Your workout templates and history are stored locally in your browser"}),m.jsx("li",{children:"Everything works offline"})]}),m.jsx("p",{style:q,children:"If your browser storage is cleared or you switch devices, that local data may be lost."})]}),m.jsxs("div",{style:E,children:[m.jsx("h3",{style:N,children:"What happens when I sign in?"}),m.jsx("p",{style:q,children:"When you sign in with email:"}),m.jsxs("ul",{style:{margin:"0.5rem 0 0.5rem 1.25rem"},children:[m.jsx("li",{children:"Your workouts and templates are saved to the cloud"}),m.jsx("li",{children:"Your data syncs across devices"}),m.jsx("li",{children:"You can switch phones or browsers without losing history"})]}),m.jsx("p",{style:q,children:"Signing in is optional and can be done at any time."})]}),m.jsxs("div",{style:E,children:[m.jsx("h3",{style:N,children:"Is my data private?"}),m.jsxs("p",{style:q,children:["IronLoop does not sell or share your data.",m.jsx("br",{}),"If you sign in, your data is stored securely and associated only with your account. If you do not sign in, your data never leaves your device."]})]}),m.jsxs("div",{style:E,children:[m.jsx("h3",{style:N,children:"Can IronLoop work offline?"}),m.jsxs("p",{style:q,children:["Yes.",m.jsx("br",{}),"IronLoop is designed to work offline. You can start workouts, complete sets, and log sessions without an internet connection. If you are signed in, your data will sync the next time youre online."]})]}),m.jsxs("div",{style:{margin:"0"},children:[m.jsx("h3",{style:N,children:"Still have a question?"}),m.jsx("p",{style:q,children:"DM @stinkeater on discord"})]})]})]})})},zl=()=>{if(!le)return null;const E=()=>{ye(),ke(!1)},N=()=>{ye(),ke(!1),te(!0)};return m.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",zIndex:9999},onClick:E,children:m.jsxs("div",{style:{width:"100%",maxWidth:"520px",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"12px",padding:"1rem",boxSizing:"border-box",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center"},onClick:q=>q.stopPropagation(),children:[m.jsx("div",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:"Quick tip"}),m.jsxs("div",{style:{color:"#aaa",marginTop:"0.5rem",lineHeight:1.5,textAlign:"center",maxWidth:"420px",marginLeft:"auto",marginRight:"auto"},children:["If you add IronLoop to your iPhone's home screen, it will launch like an app and perform better.",m.jsx("br",{}),m.jsx("br",{}),"Check out the FAQ for instructions."]}),m.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"1rem",justifyContent:"center",width:"100%",flexWrap:"wrap"},children:[m.jsx("button",{onClick:E,style:{backgroundColor:"#121212",border:"1px solid #333",color:"#fff",borderRadius:"8px",padding:"0.6rem 1rem",cursor:"pointer"},children:"Not now"}),m.jsx("button",{onClick:N,style:{backgroundColor:"#8b5cf6",border:"none",color:"#fff",borderRadius:"8px",padding:"0.6rem 1rem",cursor:"pointer",fontWeight:"bold"},children:"Open FAQ"})]})]})})};return m.jsxs("div",{style:{minHeight:"100dvh",width:"100%",backgroundColor:"#121212",color:"#fff",overflowX:"hidden"},children:[m.jsx(zl,{}),m.jsx("h1",{className:"ironloop-title",style:{textAlign:"center",margin:"1rem 0"},children:"IronLoop"}),M?null:m.jsx("div",{style:{width:"100%",padding:"1rem",backgroundColor:"#1a1a1a",boxSizing:"border-box",display:"flex",justifyContent:"center"},children:fe==="email"?m.jsxs("form",{onSubmit:E=>{E.preventDefault(),Kt()},style:{width:"100%",maxWidth:"420px",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[m.jsx("input",{value:Ge,onChange:E=>rt(E.target.value),placeholder:"you@example.com",style:Ve}),m.jsx("button",{type:"submit",style:rn,children:"Send code to sign in"}),De&&m.jsx("div",{style:{color:"#aaa",textAlign:"center"},children:De})]}):m.jsxs("form",{onSubmit:E=>{E.preventDefault(),Tt()},style:{width:"100%",maxWidth:"420px",display:"flex",flexDirection:"column",gap:"0.75rem"},children:[m.jsx("input",{value:J,onChange:E=>re(E.target.value),placeholder:"Enter code",style:Ve}),m.jsx("button",{type:"submit",style:rn,children:"Verify code"}),De&&m.jsx("div",{style:{color:"#aaa",textAlign:"center"},children:De})]})}),m.jsx("div",{style:{width:"100%",padding:"0.75rem 1rem",boxSizing:"border-box",display:"flex",justifyContent:"center",gap:"0.5rem",flexWrap:"nowrap"},children:["Workout","History","Customize","Account"].map(E=>{const N=I===E,q=E==="Account";return m.jsx("button",{onClick:()=>{te(!1),F(E),E!=="Customize"&&Le(null)},"aria-label":q?"Account":E,title:q?"Account":void 0,style:{backgroundColor:N?"#8b5cf6":"#1a1a1a",color:"#fff",borderRadius:"8px",padding:q?"0.5rem 0.65rem":"0.5rem 0.75rem",display:"inline-flex",alignItems:"center",justifyContent:"center",border:"none",cursor:"pointer",whiteSpace:"nowrap",fontSize:"0.95rem"},children:q?m.jsx(sb,{}):E},E)})}),m.jsx("div",{style:{width:"100%"},children:Z?m.jsx(mi,{}):m.jsxs(m.Fragment,{children:[m.jsxs(Hm,{children:[I==="Workout"&&m.jsx(Sp,{workouts:ot.workouts,currentWorkoutId:Ut,setCurrentWorkoutId:E=>{Rt(E);try{localStorage.setItem(nn,E)}catch{}},currentWorkoutName:L?.name||"Workout",exercises:C,setExercises:ne,finishWorkout:sn,preferredUnit:v}),I==="History"&&m.jsx(Ep,{history:Yt,deleteWorkout:Zn,updateWorkoutNotes:kn,preferredUnit:v}),I==="Customize"&&m.jsx(xp,{workouts:ot.workouts,setWorkouts:E=>gn({workouts:E.map(ie)}),selectedWorkoutId:ce,setSelectedWorkoutId:Le,preferredUnit:v,setPreferredUnit:x}),I==="Account"&&m.jsx(Tp,{preferredUnit:v,setPreferredUnit:x,isSignedIn:!!M,sessionEmailMasked:ct(D?.user?.email||""),sessionEmailFull:D?.user?.email||"",onSignOut:ut,onRequestEmailChange:pn,onVerifyEmailChangeCode:Dn,emailChangeBusy:Y,emailChangeMessage:_e,onRefreshAuthStatus:Rn,historyCount:(Array.isArray(Yt)?Yt:[]).length,onExportHistoryCsv:Ea,onDeleteAllHistory:At,onDeleteAccount:zt,dangerBusy:_,dangerMessage:ee})]}),m.jsx(Ta,{})]})})]})}wp.createRoot(document.getElementById("root")).render(m.jsx(hp.StrictMode,{children:m.jsx(lb,{})}));
